{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.ts","webpack:///./node_modules/apprun/src/app.ts","webpack:///./node_modules/apprun/src/createComponent.tsx","webpack:///./node_modules/apprun/src/vdom-my.ts","webpack:///./node_modules/apprun/src/web-component.ts","webpack:///./node_modules/apprun/src/decorator.ts","webpack:///./node_modules/apprun/src/directive.ts","webpack:///./node_modules/apprun/src/component.ts","webpack:///./node_modules/apprun/src/router.ts","webpack:///./node_modules/apprun/src/apprun.ts","webpack:///./node_modules/apprun/src/vdom.ts","webpack:///./src/BaseElement.tsx","webpack:///./src/intl-message.ts","webpack:///./src/intl-datetime.ts","webpack:///./src/intl-number.ts","webpack:///./src/relativeTime.ts","webpack:///./src/intl-relative-time.ts","webpack:///./src/index.ts","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/objectSpread.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/i18next/node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/i18next/dist/esm/i18next.js","webpack:///./test/jsx/test.tsx"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","trueish","val","isDate","date","Date","isNaN","getTime","RE_DATE","toDate","test","String","toJson","def","JSON","parse","e","toNumber","Number","elementText","tag","props","el","document","createElement","entries","forEach","connectedCallback","textContent","attributesToLowerCase","attrs","map","attr","toLowerCase","App","[object Object]","this","_events","fn","options","push","subscribers","filter","sub","args","console","assert","length","once","delay","apply","on","_t","clearTimeout","setTimeout","app","root","self","global","createComponent","node","parent","idx","Array","isArray","child","vdom","getPrototypeOf","__isAppRunComponent","children","id","now","__componentCache","component","mount","state","mounted","new_state","Promise","render","element","setState","ref","_component","_view","renderState","new_parent","collect","ch","keyCache","WeakMap","update","isSvg","key1","nodeName","key2","toUpperCase","updateChildren","updateProps","parentNode","replaceChild","old_len","childNodes","new_len","len","Math","min","nodeType","nodeValue","createText","HTMLElement","SVGElement","insertBefore","old","temp","nextSibling","appendChild","removeChild","lastChild","createDocumentFragment","indexOf","div","insertAdjacentHTML","substring","createTextNode","stringify","createElementNS","cached","oldProps","newProps","keys","startsWith","cname","replace","match","dataset","style","cssText","xname","removeAttributeNS","setAttributeNS","setAttribute","removeAttribute","getAttribute","window","requestAnimationFrame","customElement","componentClass","super","observedAttributes","isConnected","opts","_shadowRoot","shadow","attachShadow","attrMap","reduce","lc","_attrMap","from","attributes","item","attributeChangedCallback","configurable","parentElement","_props","dispatchEvent","run","unload","unmount","oldValue","mappedName","customElements","define","Reflect","meta","metadataKey","metadataValue","target","has","set","getStateValue","setStateValue","componentCache","components","REFRESH","Component","view","_history_idx","_history","history","h","event","handler","type","checked","multiple","selected","html","getElementById","tracking_attr","tracking_id","valueOf","toString","MutationObserver","observer","changes","body","contains","disconnect","save_vdom","observe","childList","subtree","attributeOldValue","attributeFilter","rendered","then","catch","err","error","_state","enable_history","callback","global_event","prev","_history_prev","next","_history_next","route","add_actions","_global_events","action","newState","actions","getMetadataKeys","getMetadata","all","act","split","trim","add_action","is_global_event","_app","_actions","off","url","rest","_","Error","updateElement","nodes","Fragment","webComponent","start","model","NOOP","addEventListener","onpopstate","location","hash","descriptor","events","defineMetadata","constructor","EVENTS","BaseElement","_observedAttributes","_initialized","_i18next","i18next","_disconnect","_connect","_assignProps","_render","_properties","undefined","_off","evName","lng","lngs","languages","navigator","concat","Boolean","ATTR","IntlMessage","interpolation","escapeValue","label","transl","innerHTML","intlMessage","DATE","year","month","day","TIME","hour","minute","second","IntlDatetime","assign","hour12","other","_languages","Intl","DateTimeFormat","format","log","intlDatetime","IntlNumber","NumberFormat","intlNumber","UNITS","LOWER","INTERVALS","quarter","week","weekDiff","diff","dayOfWeek","getDay","realdays","ceil","floor","inUnit","end","divider","trunc","relativeTime","unit","days","abs","getMonth","getFullYear","ms","nextIntervalMs","exact","interval","_timerId","disconnectedCallback","timeout","change","lowerUnit","_setTimer","_valueOrDate","RelativeTimeFormat","intlRelativeTime","g","Function","_typeof","obj","iterator","_defineProperty","writable","_objectSpread","arguments","source","ownKeys","getOwnPropertySymbols","sym","getOwnPropertyDescriptor","_classCallCheck","instance","Constructor","TypeError","_defineProperties","_createClass","protoProps","staticProps","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","_getPrototypeOf","setPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","consoleLogger","output","warn","baseLogger","Logger","concreteLogger","init","prefix","logger","debug","bool","_len","_key","forward","_len2","_key2","_len3","_key3","_len4","_key4","lvl","debugOnly","moduleName","EventEmitter","observers","listener","_this","cloned","_cloned","defer","res","rej","promise","resolve","reject","makeString","copy","a","getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","shift","k","setPath","newValue","_getLastOfPath","getPath","_getLastOfPath3","getPathWithDefaults","data","defaultData","deepExtend","overwrite","prop","regexEscape","str","_entityMap","isIE10","userAgent","_EventEmitter","ResourceStore","defaultNS","keySeparator","index","splice","silent","addNamespaces","emit","resources","addResource","deep","pack","hasResourceBundle","removeNamespaces","getResource","compatibilityAPI","postProcessor","processors","addPostProcessor","handle","translator","processor","process","checkedLoadedFor","Translator","services","language","resolved","nsSeparator","namespaces","interpolator","nestingRegexp","parts","join","_this2","overloadTranslationOptionHandler","_this$extractFromKey","extractFromKey","namespace","appendNamespaceToCIMode","resUsedKey","usedKey","resExactUsedKey","exactUsedKey","resType","noObject","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy$$1","newKeyToUse","deepKey","translate","extendTranslation","usedDefault","isValidLookup","defaultValue","count","suffix","pluralResolver","getSuffix","updateMissing","fk","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","missingKeyHandler","backendConnector","saveMissing","needsPluralHandling","saveMissingPlurals","getPluralFormsOfKey","appendNamespaceToMissingKey","parseMissingKeyHandler","_this3","usedLng","usedNS","skipInterpolation","defaultVariables","interpolate","nest","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","_this4","extracted","fallbackNS","needsContextHandling","context","codes","utils","hasLoadedNamespace","code","pluralSuffix","possibleKey","finalKey","finalKeys","addLookupKeys","contextSeparator","pop","returnNull","returnEmptyString","resourceStore","capitalize","string","charAt","slice","LanguageUtil","whitelist","supportedLngs","formatLanguageCode","specialCases","lowerCaseLng","part","cleanCode","deprecate","isSupportedCode","load","nonExplicitSupportedLngs","getLanguagePartFromCode","cleanedLng","lngOnly","find","supportedLng","fallbacks","getScriptPartFromCode","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","createRules","rules","numbers","plurals","PluralResolver","rule","getRule","ret","noAbs","simplifyPluralSuffix","returnSuffix","prepend","compatibilityJSON","Interpolator","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","RegExp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","f","missingInterpolationHandler","exec","lastIndex","_temp","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","formatters","doReduce","includes","elem","v","Connector","backend","store","queue","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","loaded","errors","addResourceBundle","q","_getLastOfPath2","arr","what","remove","done","fcName","tried","wait","read","queueLoad","loadOne","prepareLoading","_this5","fallbackValue","isUpdate","initImmediate","nonExplicitWhitelist","preload","pluralSeparator","partialBundledLanguages","tDescription","_format","transformOptions","noop","I18n","external","isInitialized","isClone","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","storeApi","_this2$store","deferred","changeLanguage","usedCallback","append","isLanguageChangingTo","setLng","getBestMatchFromCodes","cacheUserLanguage","loadResources","async","detect","fixedT","_this$translator","_this$translator2","exists","_this6","lastLng","loadNotPending","loadState","precheck","preResult","_this7","preloaded","newLngs","_this8","mergedOptions","clone","membersToCopy","en","default","title","item_plural","placeholder","fr","IntlRelativeTime","nextState","onclick","dangerous","weekday","time","timeZone","numeric","styleProp","currency","notation"],"mappings":"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","file":"examples/jsx.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","export const trueish = (val: unknown) : boolean => val === '' || !!val\n\nexport const isDate = (date?: any) : boolean => date instanceof Date && !isNaN(date.getTime())\n\nconst RE_DATE = /^\\d{4}-\\d{2}-\\d{2}/\n\nexport const toDate = (val: any) : Date | undefined => {\n  if (isDate(val)) {\n    return val\n  } else if (typeof val === 'string') {\n    const date = new Date(val)\n    if (RE_DATE.test(String(val)) && isDate(date)) return date\n  }\n}\n\nexport const toJson = (val: any, def?: any) : any => {\n  if (typeof val === 'string') {\n    try {\n      return JSON.parse(val)\n    } catch (e) {}\n  }\n  return def\n}\n\nexport const toNumber = (val: any) => {\n  const n = Number(val)\n  if (!isNaN(n)) return n\n}\n\nexport const elementText = (tag: string, props: object | undefined) => {\n  const el = document.createElement(tag)\n  Object.entries(props).forEach(([name, value]) => { el[name] = value })\n  // @ts-ignore\n  el.connectedCallback()\n  return el.textContent\n}\n\nexport const attributesToLowerCase = (attrs: string[]) => attrs.map(attr => attr.toLowerCase())\n","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public h;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n\n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    const subscribers = this._events[name] || [];\n\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    this._events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      fn.apply(this, args);\n    }, options.delay);\n  }\n}\n\nconst AppRunVersions = 'AppRun-2';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nfunction render(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component || !(component instanceof tag)) {\n    component = parent.__componentCache[key] = new tag({ ...props, children }).mount(id);\n  }\n  let state = component.state;\n  if (component.mounted) {\n    const new_state = component.mounted(props, children, state);\n    if (typeof new_state !== 'undefined') state = component.state = new_state;\n  }\n  if (state instanceof Promise) {\n    const render = el => {\n      component.element = el;\n      component.setState(state);\n    }\n    return <section {...props} ref={e => render(e)} _component={component}></section>;\n  }\n  else {\n    const vdom = component._view(state, props);\n    const render = el => {\n      component.element = el;\n      component.renderState(state, vdom);\n    }\n    return <section {...props} ref={e => render(e)} _component={component}>{vdom}</section>;\n  }\n}\n\nexport default function createComponent(node, parent, idx = 0) {\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, idx++));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) {\n    vdom = render(node, parent, idx);\n  }\n  if (vdom && Array.isArray(vdom.children)) {\n    const new_parent = vdom.props?._component;\n    if (new_parent) {\n      let i = 0;\n      vdom.children = vdom.children.map(child => createComponent(child, new_parent, i++));\n    } else {\n      vdom.children = vdom.children.map(child => createComponent(child, parent, idx++));\n    }\n  }\n  return vdom;\n}\n","import createComponent from './createComponent';\nimport { VDOM, VNode } from './types';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = new WeakMap();\n\nexport const updateElement = render;\n\nexport function render(element: Element, nodes: VDOM, parent = {}) {\n  // console.log('render', element, node);\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n\n  nodes = createComponent(nodes, parent);\n\n  const isSvg = element?.nodeName === \"SVG\";\n\n  if (!element) return;\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes, isSvg);\n  } else {\n    updateChildren(element, [nodes], isSvg);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode, isSvg: boolean) {\n  if (node['_op'] === 3) return;\n  // console.assert(!!element);\n  isSvg = isSvg || node.tag === \"svg\";\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node, isSvg), element);\n    return;\n  }\n  !(node['_op'] & 2) && updateChildren(element, node.children, isSvg);\n  !(node['_op'] & 1) && updateProps(element, node.props, isSvg);\n}\n\nfunction updateChildren(element, children, isSvg: boolean) {\n  const old_len = element.childNodes?.length || 0;\n  const new_len = children?.length || 0;\n  const len = Math.min(old_len, new_len);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    if (child['_op'] === 3) continue;\n    const el = element.childNodes[i];\n    if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.nodeValue = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else if (child instanceof HTMLElement || child instanceof SVGElement) {\n      element.insertBefore(child, el);\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child, isSvg);\n        } else {\n          // console.log(el.key, key);\n          const old = keyCache[key];\n          if (old) {\n            const temp = old.nextSibling;\n            element.insertBefore(old, el);\n            temp ? element.insertBefore(el, temp) : element.appendChild(el);\n          }\n          update(element.childNodes[i], child, isSvg);\n        }\n      } else {\n        update(element.childNodes[i], child, isSvg);\n      }\n    }\n  }\n\n  let n = element.childNodes.length;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (new_len > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i], isSvg));\n    }\n    element.appendChild(d);\n  }\n}\n\nfunction createText(node) {\n  if (node.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node);\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg: boolean): Element {\n  // console.assert(node !== null && node !== undefined);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props, isSvg);\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nfunction updateProps(element: Element, props: {}, isSvg) {\n  // console.assert(!!element);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      if (typeof value === 'string') element.style.cssText = value;\n      else {\n        for (const s in value) {\n          if (element.style[s] !== value[s]) element.style[s] = value[s];\n        }\n      }\n    } else if (name.startsWith('xlink')) {\n      const xname = name.replace('xlink', '').toLowerCase();\n      if (value == null || value === false) {\n        element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n      } else {\n        element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n      }\n    } else if (name.startsWith('on')) {\n      if (!value || typeof value === 'function') {\n        element[name] = value;\n      } else if (typeof value === 'string') {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (/^id$|^class$|^readonly$|^contenteditable$|^role|-/g.test(name) || isSvg) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n      element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(() => props['ref'](element));\n  }\n}\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?: boolean;\n  shadow?: boolean;\n  history?: boolean;\n  global_event?: boolean;\n  observedAttributes?: string[];\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class CustomElement extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  private _attrMap: (arg0: string) => string;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    // attributes need to be set to lowercase in order to get observed\n    return (options.observedAttributes || []).map(attr => attr.toLowerCase());\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = options || {};\n      this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n      const observedAttributes = (opts.observedAttributes || [])\n\n      const attrMap = observedAttributes.reduce((map, name) => {\n        const lc = name.toLowerCase()\n        if (lc !== name) {\n          map[lc] = name\n        }\n        return map\n      }, {})\n      this._attrMap = (name: string) : string => attrMap[name] || name\n\n      const props = {};\n      Array.from(this.attributes).forEach(item => props[this._attrMap(item.name)] = item.value);\n\n      // add getters/ setters to allow observation on observedAttributes\n      observedAttributes.forEach(name => {\n        if (this[name] !== undefined) props[name] = this[name];\n        Object.defineProperty(this, name, {\n          get(): any {\n            return props[name];\n          },\n          set(this: CustomElement, value: unknown) {\n            // trigger change event\n            this.attributeChangedCallback(name, props[name], value)\n          },\n          configurable: true,\n          enumerable: true\n        });\n      })\n\n      const children = this.children ? Array.from(this.children) : [];\n      children.forEach(el => el.parentElement.removeChild(el));\n      this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n      // attach props to component\n      this._component._props = props;\n      // expose dispatchEvent\n      this._component.dispatchEvent = this.dispatchEvent.bind(this)\n      if (this._component.mounted) {\n        const new_state = this._component.mounted(props, children, this._component.state);\n        if (typeof new_state !== 'undefined') this._component.state = new_state;\n      }\n      this.on = this._component.on.bind(this._component);\n      this.run = this._component.run.bind(this._component);\n      if (!(opts.render===false)) this._component.run('.');\n    }\n  }\n\n  disconnectedCallback() {\n    this._component?.unload?.();\n    this._component?.unmount?.();\n    this._component = null;\n  }\n\n  attributeChangedCallback(name: string, oldValue: unknown, value: unknown) {\n    if (this._component) {\n      // camelCase attributes arrive only in lowercase\n      const mappedName = this._attrMap(name);\n      // store the new property/ attribute\n      this._component._props[mappedName] = value;\n      this._component.run('attributeChanged', mappedName, oldValue, value);\n\n      if (value !== oldValue && !(options.render === false)) {\n        window.requestAnimationFrame(() => {\n          // re-render state with new combined props on next animation frame\n          this._component.run('.')\n        })\n      }\n    }\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}\n","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E = string>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = component['state'] || {};\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nexport default (key: string, props: [], tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    } else if (tag === 'textarea') {\n      props['innerHTML'] = getStateValue(component, name);\n      props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions, MountOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = {};\r\napp.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T=any, E=any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n  private observer;\r\n  private save_vdom;\r\n\r\n  render(element: HTMLElement, node) {\r\n    app.render(element, node, this);\r\n  }\r\n\r\n  private _view(state, p = null) {\r\n    if (!this.view) return;\r\n    const h = app.createElement;\r\n    app.createElement = (tag, props, ...children) => {\r\n      props && Object.keys(props).forEach(key => {\r\n        if (key.startsWith('$')) {\r\n          directive(key, props, tag, this);\r\n          delete props[key];\r\n        }\r\n      });\r\n      return h(tag, props, ...children);\r\n    }\r\n    const html = p ? this.view(state, p) : this.view(state);\r\n    app.createElement = h;\r\n    return html;\r\n  }\r\n\r\n  private renderState(state: T, vdom = null) {\r\n    if (!this.view) return;\r\n    let html = vdom || this._view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      state,\r\n      vdom: html || '[vdom is null - no render]',\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string') ?\r\n      document.getElementById(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          if(!this.observer)  this.observer = new MutationObserver(changes => {\r\n            if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\r\n              this.unload(this.state);\r\n              this.observer.disconnect();\r\n              this.observer = null;\r\n              this.save_vdom = [];\r\n            }\r\n          });\r\n          this.observer.observe(document.body, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    if (!vdom) {\r\n      this.render(el, html);\r\n    }\r\n    this.rendered && this.rendered(this.state);\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions\r\n    = { render: true, history: false}) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      state.then(s => {\r\n        this.setState(s, options)\r\n      }).catch(err => {\r\n        console.error(err);\r\n        throw err;\r\n      });\r\n      this._state = state;\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null, options?: MountOptions): Component<T, E> => {\r\n    return this.mount(element, { ...options, render: true });\r\n  }\r\n\r\n  public mount(element = null, options?: MountOptions): Component<T, E>  {\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n\r\n    if (options.route) {\r\n      this.update = this.update || {};\r\n      this.update[options.route] = REFRESH;\r\n    }\r\n\r\n    this.add_actions();\r\n    this.state = this.state ?? this['model'] ?? {};\r\n    if (options.render) {\r\n      this.setState(this.state, { render: true, history: true });\r\n    } else {\r\n      this.setState(this.state, { render: false, history: true });\r\n    }\r\n    if (app['debug']) {\r\n      const id = typeof element === 'string' ? element : element.id;\r\n      componentCache[id] = componentCache[id] || [];\r\n      componentCache[id].push(this);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this. _global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        'event': name,\r\n        e: p,\r\n        state: this.state,\r\n        newState,\r\n        options\r\n      })\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.run(name, ...args) :\r\n      this._app.run(name, ...args);\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this.observer?.disconnect();\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app from './app';\nimport { createElement, render, Fragment } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions, MountOptions, AppStartOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E=any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: AppStartOptions<T>): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  h(tag: string | Function, props, ...children): VNode | VNode[];\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: HTMLElement, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n}\n\napp.h = app.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\n\napp.start = <T, E = any>(element?: Element, model?: T, view?: View<T>, update?: Update<T, E>,\n  options?: AppStartOptions<T>) : Component<T, E> => {\n    const opts = {...options, render: true, global_event: true };\n    const component = new Component<T, E>(model, view, update);\n    if (options && options.rendered) component.rendered = options.rendered;\n    component.mount(element, opts);\n    return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      route(location.hash);\n    }\n  });\n}\n\nexport type StatelessComponent<T={}> = (args: T) => string | VNode | void;\nexport { app, Component, View, Action, Update, on, update, EventOptions, ActionOptions, MountOptions, Fragment }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions, AppStartOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['React'] = app;\n  window['on'] = on;\n  window['customElement'] = customElement;\n}\n\n\n","import { createElement, updateElement, Fragment } from './vdom-my';\nexport function render(element, html, parent?) {\n  updateElement(element, html, parent);\n}\nexport { createElement, Fragment };\n\n\n","import { IFnVoid } from './types'\n\nconst EVENTS = ['initialized', 'loaded', 'languageChanged']\n\nexport class BaseElement extends HTMLElement {\n  private _off: IFnVoid[]\n  private _observedAttributes: string[] = []\n  private _attrMap: (arg0: string) => string\n  protected _initialized: boolean = false\n  protected _props: object = {}\n  protected _i18next: any\n\n  set i18next (i18next :any) {\n    if (this._i18next !== i18next) {\n      this._disconnect()\n      this._i18next = i18next\n      this._connect()\n    }\n  }\n\n  static get observedAttributes () {\n    return []\n  }\n\n  constructor (attributes: string[]) {\n    super()\n    this._i18next = (window as any).i18next\n    const attrMap = attributes.reduce((map, name) => {\n      const lc = name.toLowerCase()\n      if (lc !== name) {\n        map[lc] = name\n      }\n      return map\n    }, {})\n    this._observedAttributes = attributes\n    this._attrMap = (name: string) : string => attrMap[name] || name\n  }\n\n  connectedCallback () {\n    this._assignProps()\n    this._disconnect() // try not to attach more than one event handler\n    this._connect()\n    this._initialized = true\n    this._render()\n  }\n\n  disconnectedCallback () {\n    this._disconnect()\n  }\n\n  attributeChangedCallback (name: string, oldValue: unknown, value: unknown) {\n    if (oldValue !== value) {\n      // camelCase attributes arrive only as lowercase\n      this._properties(this._attrMap(name), value)\n      window.requestAnimationFrame(() => {\n        this._render()\n      })\n    }\n  }\n\n  private _assignProps () {\n    Array.from(this.attributes).forEach(item => this._properties(this._attrMap(item.name), item.value))\n\n    this._observedAttributes.forEach(name => {\n      if (this[name] !== undefined) this._properties(name, this[name])\n\n      Object.defineProperty(this, name, {\n        get (): any {\n          return this._props[name]\n        },\n        set (this: BaseElement, value: unknown) {\n          this.attributeChangedCallback(name, this._props[name], value)\n        },\n        configurable: true,\n        enumerable: true\n      })\n    })\n  }\n\n  private _connect () {\n    if (this._i18next) {\n      this._off = EVENTS.map(evName => {\n        const fn = () => {\n          window.requestAnimationFrame(() => {\n            this._assignProps() // reassure that props are assigned after a remount\n            this._render()\n          })\n        }\n        this._i18next.on(evName, fn)\n        return () => this._i18next.off(evName, fn)\n      })\n    }\n  }\n\n  private _disconnect () {\n    this._off && this._off.forEach(fn => fn())\n  }\n\n  protected _languages (lng: string | undefined) {\n    const lngs = (this._i18next && this._i18next.languages) || (navigator as any).languages\n    return [].concat(lng, lngs).filter(Boolean)\n  }\n\n  protected _properties (name: string, value: unknown) {\n    // Needs implementation\n  }\n\n  protected _render () {\n    // Needs implementation\n  }\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  label?: string\n  key?: string\n  count?: number\n  context?: string\n  lng?: string\n  ns?: string[] | string\n  options?: IOptions\n  interpolation?: object\n  value?: Date | object | string\n  dangerous?: boolean\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  'key',\n  'label',\n  'count',\n  'context',\n  'lng',\n  'ns',\n  'options',\n  // own attribs\n  'value',\n  'dangerous'\n]\n\nexport class IntlMessage extends BaseElement {\n  protected _props: IOptions = {}\n  protected _initialized: boolean\n  protected _i18next: any\n  public innerHTML: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    if (name === 'dangerous') {\n      this._props.interpolation = { escapeValue: !trueish(value) }\n    } else {\n      const val = toDate(value) || toJson(value) || value\n      if (name === 'options' && typeof val === 'object') {\n        this._props = { ...this._props, ...val }\n      } else {\n        this._props[name] = val\n      }\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { label, key, ...options } = this._props\n      const transl = this._i18next.t(label || key, options)\n      if (transl) this.innerHTML = transl\n    }\n  }\n}\n\n// @ts-ignore\ncustomElements.define('intl-message', IntlMessage)\n\nexport function intlMessage (props: object = {}) {\n  return elementText('intl-message', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: Date\n  lng?: string\n  options?: IOptions\n  date?: boolean\n  time?: boolean\n  weekday?: string\n  era?: string\n  year?: string\n  month?: string\n  day?: string\n  hour?: string\n  minute?: string\n  second?: string\n  hour12?: boolean\n  hourCycle?: string\n  timeZone?: string\n  timeZoneName?: string\n  localeMatcher?: string\n  formatMatcher?: string\n  numberingSystem?: string\n  calendar?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  'date',  // show date\n  'time',  // show time\n  // DateTimeFormatOptions\n  'weekday',\n  'era',\n  'year',\n  'month',\n  'day',\n  'hour',\n  'minute',\n  'second',\n  'hour12',\n  'hourCycle',\n  'timeZone',\n  'timeZoneName',\n  'localeMatcher',\n  'formatMatcher',\n  'numberingSystem',\n  'calendar'\n]\n\nconst DATE = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric'\n}\n\nconst TIME = {\n  hour: 'numeric',\n  minute: 'numeric',\n  second: 'numeric'\n}\n\nexport class IntlDatetime extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'value':\n        _props[name] = toDate(value)\n        break\n      case 'date':\n        if (trueish(value)) {\n          this._props = Object.assign(_props, DATE)\n        }\n        break\n      case 'time':\n        if (trueish(value)) {\n          const hour12 = _props.hour12 || false\n          this._props = Object.assign(_props, TIME, { hour12 })\n        } else {\n          const { hour, minute, second, ...other } = _props\n          this._props = other\n        }\n        break\n      case 'hour12': {\n        _props[name] = trueish(value)\n        break\n      }\n      case 'options':\n        this._props = Object.assign(_props, toJson(value, value))\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const date = value || new Date()\n      const lngs = this._languages(lng)\n      try {\n        this.textContent = new Intl.DateTimeFormat(lngs, options).format(date)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.DateTimeFormat(lngs).format(date)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-datetime', IntlDatetime)\n\nexport function intlDatetime (props: object | undefined) {\n  return elementText('intl-datetime', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  style?: string\n  currency?: string\n  currencyDisplay?: string\n  currencySign?: string\n  unit?: string\n  unitDisplay?: string\n  notation?: string\n  compactDisplay?: string\n  useGrouping?: boolean\n  signDisplay?: string\n  localeMatcher?: string\n  minimumIntegerDigits?: number\n  minimumFractionDigits?: number\n  maximumFractionDigits?: number\n  minimumSignificantDigits?: number\n  maximumSignificantDigits?: number\n  numberingSystem?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  // NumberFormatOptions\n  'styleProp',\n  'currency',\n  'currencyDisplay',\n  'currencySign',\n  'unit',\n  'unitDisplay',\n  'notation',\n  'compactDisplay',\n  'useGrouping',\n  'signDisplay',\n  'localeMatcher',\n  'minimumIntegerDigits',\n  'minimumFractionDigits',\n  'maximumFractionDigits',\n  'minimumSignificantDigits',\n  'maximumSignificantDigits',\n  'numberingSystem'\n]\n\nexport class IntlNumber extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n    this._props.value = 0\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'options':\n        this._props = Object.assign(_props, toJson(value))\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const lngs = this._languages(lng)\n      try {\n        this.textContent = new Intl.NumberFormat(lngs, options).format(value)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.NumberFormat(lngs).format(value)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-number', IntlNumber)\n\nexport function intlNumber (props: object | undefined) {\n  return elementText('intl-number', props)\n}\n","\nimport {toNumber} from './utils'\n\ninterface IValueUnit {\n  value: number\n  unit: string\n  date?: Date\n}\n\nconst isDate = (value: any): boolean =>\n  value && (value instanceof Date) && !isNaN(value.getTime())\n\nconst UNITS = ['year', 'month', 'week', 'day', 'hour', 'minute', 'second']\n\nconst LOWER = [12, 4, 7, 24, 60, 60]\n\nconst INTERVAL_DAY = 86400\n\nconst INTERVALS = {\n  year: 365 * INTERVAL_DAY,\n  quarter: 4 * 30 * INTERVAL_DAY,\n  month: 30 * INTERVAL_DAY,\n  week: 7 * INTERVAL_DAY,\n  day: INTERVAL_DAY,\n  hour: 3600,\n  minute: 60\n}\n\nexport const toUnit = (unit?: string) => {\n  unit = String(unit).replace(/s$/, '')\n  return UNITS.indexOf(unit) !== -1 ? unit : 'second'\n}\n\nexport const weekDiff = (diff: any, now: Date) : number => {\n  const dayOfWeek = now.getDay()\n  const { day } = diff\n  const realdays = day < 0 ? day + dayOfWeek - 7 : day - dayOfWeek + 7\n  const realweeks = day < 0 ? Math.ceil(realdays / 7) : Math.floor(realdays / 7)\n  return realweeks\n}\n\nconst inUnit = (end: Date, start: Date, divider: number = 1) =>\n  Math.trunc((end.getTime() - start.getTime()) / 1000 / divider )\n\nconst inMonths = (end: Date, start: Date, days: number) : number => {\n  if (Math.abs(days) < 31) return 0\n  return Math.trunc(end.getMonth() + 12 * end.getFullYear() - (start.getMonth() + 12 * start.getFullYear()))\n}\n\nexport const relativeTime = (date?: Date | number, unit?: string) : IValueUnit => {\n  if (isDate(date)) {\n    date = date as Date\n    const now = new Date()\n    const day = inUnit(date as Date, now, INTERVALS.day)\n    const month = inMonths(date as Date, now, day)\n\n    const diff = {\n      year: Math.trunc(month / 12),\n      month,\n      week: inUnit(date, now, INTERVALS.week),\n      day,\n      hour: inUnit(date, now, INTERVALS.hour),\n      minute: inUnit(date, now, INTERVALS.minute),\n      second: inUnit(date, now)\n    }\n    for (let i = 0; i < UNITS.length; i++) {\n      const unit = UNITS[i]\n      let value = diff[unit]\n      if (value !== 0) {\n        if (unit === 'week') {\n          value = weekDiff(diff, now)\n        }\n        // console.log(date.toISOString(), diff, value, unit)\n        return { value, unit, date }\n      }\n    }\n    return { value: 0, unit: 'second', date: new Date() }\n  } else {\n    const ms = nextIntervalMs({ unit }, true) * (date as number) + Date.now()\n    return { value: toNumber(date), unit, date: new Date(ms) }\n  }\n}\n\nexport const nextIntervalMs = ({date = new Date(), unit}, exact?: boolean) : number => {\n  const interval = (INTERVALS[unit] || 1)\n  const delta = inUnit(date, new Date())\n  let diff = ((interval + delta) % interval) || interval\n  if (diff < 0) {\n    diff = (interval + diff) || 1\n  }\n  if (!exact) {\n    diff = Math.trunc(diff / 6) || 1\n  }\n  return diff * 1000\n}\n\nexport const lowerUnit = ({ value, unit }) : IValueUnit => {\n  if (value === 1) {\n    const i = UNITS.indexOf(unit)\n    value = LOWER[i] || value\n    unit = (i !== -1 && UNITS[i + 1]) || 'second'\n  }\n  return { value, unit }\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, trueish, toNumber, toDate, elementText, attributesToLowerCase } from './utils'\nimport { relativeTime, nextIntervalMs, lowerUnit, toUnit } from './relativeTime'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  unit?: string\n  localeMatcher?: string\n  style?: string\n  numeric?: string\n  update?: boolean\n  updateUnit?: boolean\n  date?: Date\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  //\n  'unit',\n  'localeMatcher',\n  'styleProp', // gets resolved to style\n  'numeric',\n  'update'\n]\n\nexport class IntlRelativeTime extends BaseElement {\n  protected _props: IOptions\n  private _timerId: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  disconnectedCallback () {\n    clearTimeout(this._timerId)\n    super.disconnectedCallback()\n  }\n\n  private _setTimer ()  {\n    const { date, value, unit } = this._props\n    const timeout = nextIntervalMs({ date, unit })\n    this._timerId = setTimeout(() => {\n      this._timerId = null\n      const change = lowerUnit(relativeTime(date, unit))\n      if (change.value !== value) {\n        this._props.value = change.value\n        this._properties('unit', change.unit)\n        this._render()\n      } else if (this._props.update) {\n        this._setTimer()\n      }\n    }, timeout)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n\n    switch (name) {\n      case 'value':\n        const _valueOrDate = toDate(value) || toNumber(value) || 0\n        this._props = Object.assign(_props, relativeTime(_valueOrDate, _props.unit))\n        break\n      case 'options':\n        const options = toJson(value)\n        if (typeof options === 'object') {\n          this._props = Object.assign(_props, options)\n        }\n        break\n      case 'update':\n        const isActive = _props[name] = trueish(value)\n        if (!isActive) clearTimeout(this._timerId)\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      case 'unit':\n        _props[name] = toUnit(value)\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value = 0, lng, unit = 'second', date, update, ...options } = this._props\n      if (update && !this._timerId) this._setTimer()\n      const lngs = this._languages(lng)\n      try {\n        // @ts-ignore - ts does not know Intl.RelativeTimeFormat yet\n        this.textContent = new Intl.RelativeTimeFormat(lngs, options).format(value, unit)\n      } catch (e) {\n        // fail safe display without options\n        // @ts-ignore\n        this.textContent = new Intl.RelativeTimeFormat(lngs).format(value, unit)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-relative-time', IntlRelativeTime)\n\nexport function intlRelativeTime (props: IOptions | undefined) {\n  const { update, ..._props } = props\n  return elementText('intl-relative-time', _props)\n}\n","import { IntlMessage, intlMessage } from './intl-message'\nimport { IntlDatetime, intlDatetime } from './intl-datetime'\nimport { IntlRelativeTime, intlRelativeTime } from './intl-relative-time'\nimport { IntlNumber, intlNumber } from './intl-number'\n\nexport {\n  IntlMessage,\n  intlMessage,\n  IntlDatetime,\n  intlDatetime,\n  IntlNumber,\n  intlNumber,\n  IntlRelativeTime,\n  intlRelativeTime\n }\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty\";\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? Object(arguments[i]) : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","import _typeof from '@babel/runtime/helpers/esm/typeof';\nimport _objectSpread from '@babel/runtime/helpers/esm/objectSpread';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\n\nvar consoleLogger = {\n  type: 'logger',\n  log: function log(args) {\n    this.output('log', args);\n  },\n  warn: function warn(args) {\n    this.output('warn', args);\n  },\n  error: function error(args) {\n    this.output('error', args);\n  },\n  output: function output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\n\nvar Logger = function () {\n  function Logger(concreteLogger) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Logger);\n\n    this.init(concreteLogger, options);\n  }\n\n  _createClass(Logger, [{\n    key: \"init\",\n    value: function init(concreteLogger) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      this.prefix = options.prefix || 'i18next:';\n      this.logger = concreteLogger || consoleLogger;\n      this.options = options;\n      this.debug = options.debug;\n    }\n  }, {\n    key: \"setDebug\",\n    value: function setDebug(bool) {\n      this.debug = bool;\n    }\n  }, {\n    key: \"log\",\n    value: function log() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return this.forward(args, 'log', '', true);\n    }\n  }, {\n    key: \"warn\",\n    value: function warn() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      return this.forward(args, 'warn', '', true);\n    }\n  }, {\n    key: \"error\",\n    value: function error() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n\n      return this.forward(args, 'error', '');\n    }\n  }, {\n    key: \"deprecate\",\n    value: function deprecate() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n    }\n  }, {\n    key: \"forward\",\n    value: function forward(args, lvl, prefix, debugOnly) {\n      if (debugOnly && !this.debug) return null;\n      if (typeof args[0] === 'string') args[0] = \"\".concat(prefix).concat(this.prefix, \" \").concat(args[0]);\n      return this.logger[lvl](args);\n    }\n  }, {\n    key: \"create\",\n    value: function create(moduleName) {\n      return new Logger(this.logger, _objectSpread({}, {\n        prefix: \"\".concat(this.prefix, \":\").concat(moduleName, \":\")\n      }, this.options));\n    }\n  }]);\n\n  return Logger;\n}();\n\nvar baseLogger = new Logger();\n\nvar EventEmitter = function () {\n  function EventEmitter() {\n    _classCallCheck(this, EventEmitter);\n\n    this.observers = {};\n  }\n\n  _createClass(EventEmitter, [{\n    key: \"on\",\n    value: function on(events, listener) {\n      var _this = this;\n\n      events.split(' ').forEach(function (event) {\n        _this.observers[event] = _this.observers[event] || [];\n\n        _this.observers[event].push(listener);\n      });\n      return this;\n    }\n  }, {\n    key: \"off\",\n    value: function off(event, listener) {\n      if (!this.observers[event]) return;\n\n      if (!listener) {\n        delete this.observers[event];\n        return;\n      }\n\n      this.observers[event] = this.observers[event].filter(function (l) {\n        return l !== listener;\n      });\n    }\n  }, {\n    key: \"emit\",\n    value: function emit(event) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.observers[event]) {\n        var cloned = [].concat(this.observers[event]);\n        cloned.forEach(function (observer) {\n          observer.apply(void 0, args);\n        });\n      }\n\n      if (this.observers['*']) {\n        var _cloned = [].concat(this.observers['*']);\n\n        _cloned.forEach(function (observer) {\n          observer.apply(observer, [event].concat(args));\n        });\n      }\n    }\n  }]);\n\n  return EventEmitter;\n}();\n\nfunction defer() {\n  var res;\n  var rej;\n  var promise = new Promise(function (resolve, reject) {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(function (m) {\n    if (s[m]) t[m] = s[m];\n  });\n}\n\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n\n  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    var key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    object = object[key];\n  }\n\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\n\nfunction setPath(object, path, newValue) {\n  var _getLastOfPath = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath.obj,\n      k = _getLastOfPath.k;\n\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  var _getLastOfPath2 = getLastOfPath(object, path, Object),\n      obj = _getLastOfPath2.obj,\n      k = _getLastOfPath2.k;\n\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  var _getLastOfPath3 = getLastOfPath(object, path),\n      obj = _getLastOfPath3.obj,\n      k = _getLastOfPath3.k;\n\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  var value = getPath(data, key);\n\n  if (value !== undefined) {\n    return value;\n  }\n\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (var prop in source) {\n    if (prop in target) {\n      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n        if (overwrite) target[prop] = source[prop];\n      } else {\n        deepExtend(target[prop], source[prop], overwrite);\n      }\n    } else {\n      target[prop] = source[prop];\n    }\n  }\n\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, function (s) {\n      return _entityMap[s];\n    });\n  }\n\n  return data;\n}\nvar isIE10 = typeof window !== 'undefined' && window.navigator && window.navigator.userAgent && window.navigator.userAgent.indexOf('MSIE') > -1;\n\nvar ResourceStore = function (_EventEmitter) {\n  _inherits(ResourceStore, _EventEmitter);\n\n  function ResourceStore(data) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n\n    _classCallCheck(this, ResourceStore);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ResourceStore).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.data = data || {};\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    return _this;\n  }\n\n  _createClass(ResourceStore, [{\n    key: \"addNamespaces\",\n    value: function addNamespaces(ns) {\n      if (this.options.ns.indexOf(ns) < 0) {\n        this.options.ns.push(ns);\n      }\n    }\n  }, {\n    key: \"removeNamespaces\",\n    value: function removeNamespaces(ns) {\n      var index = this.options.ns.indexOf(ns);\n\n      if (index > -1) {\n        this.options.ns.splice(index, 1);\n      }\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(lng, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var path = [lng, ns];\n      if (key && typeof key !== 'string') path = path.concat(key);\n      if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n      }\n\n      return getPath(this.data, path);\n    }\n  }, {\n    key: \"addResource\",\n    value: function addResource(lng, ns, key, value) {\n      var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n        silent: false\n      };\n      var keySeparator = this.options.keySeparator;\n      if (keySeparator === undefined) keySeparator = '.';\n      var path = [lng, ns];\n      if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        value = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      setPath(this.data, path, value);\n      if (!options.silent) this.emit('added', lng, ns, key, value);\n    }\n  }, {\n    key: \"addResources\",\n    value: function addResources(lng, ns, resources) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n        silent: false\n      };\n\n      for (var m in resources) {\n        if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n          silent: true\n        });\n      }\n\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"addResourceBundle\",\n    value: function addResourceBundle(lng, ns, resources, deep, overwrite) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n        silent: false\n      };\n      var path = [lng, ns];\n\n      if (lng.indexOf('.') > -1) {\n        path = lng.split('.');\n        deep = resources;\n        resources = ns;\n        ns = path[1];\n      }\n\n      this.addNamespaces(ns);\n      var pack = getPath(this.data, path) || {};\n\n      if (deep) {\n        deepExtend(pack, resources, overwrite);\n      } else {\n        pack = _objectSpread({}, pack, resources);\n      }\n\n      setPath(this.data, path, pack);\n      if (!options.silent) this.emit('added', lng, ns, resources);\n    }\n  }, {\n    key: \"removeResourceBundle\",\n    value: function removeResourceBundle(lng, ns) {\n      if (this.hasResourceBundle(lng, ns)) {\n        delete this.data[lng][ns];\n      }\n\n      this.removeNamespaces(ns);\n      this.emit('removed', lng, ns);\n    }\n  }, {\n    key: \"hasResourceBundle\",\n    value: function hasResourceBundle(lng, ns) {\n      return this.getResource(lng, ns) !== undefined;\n    }\n  }, {\n    key: \"getResourceBundle\",\n    value: function getResourceBundle(lng, ns) {\n      if (!ns) ns = this.options.defaultNS;\n      if (this.options.compatibilityAPI === 'v1') return _objectSpread({}, {}, this.getResource(lng, ns));\n      return this.getResource(lng, ns);\n    }\n  }, {\n    key: \"getDataByLanguage\",\n    value: function getDataByLanguage(lng) {\n      return this.data[lng];\n    }\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      return this.data;\n    }\n  }]);\n\n  return ResourceStore;\n}(EventEmitter);\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor: function addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle: function handle(processors, value, key, options, translator) {\n    var _this = this;\n\n    processors.forEach(function (processor) {\n      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nvar checkedLoadedFor = {};\n\nvar Translator = function (_EventEmitter) {\n  _inherits(Translator, _EventEmitter);\n\n  function Translator(services) {\n    var _this;\n\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Translator);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Translator).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, _assertThisInitialized(_this));\n    _this.options = options;\n\n    if (_this.options.keySeparator === undefined) {\n      _this.options.keySeparator = '.';\n    }\n\n    _this.logger = baseLogger.create('translator');\n    return _this;\n  }\n\n  _createClass(Translator, [{\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng) {\n      if (lng) this.language = lng;\n    }\n  }, {\n    key: \"exists\",\n    value: function exists(key) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        interpolation: {}\n      };\n      var resolved = this.resolve(key, options);\n      return resolved && resolved.res !== undefined;\n    }\n  }, {\n    key: \"extractFromKey\",\n    value: function extractFromKey(key, options) {\n      var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n      if (nsSeparator === undefined) nsSeparator = ':';\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n      var namespaces = options.ns || this.options.defaultNS;\n\n      if (nsSeparator && key.indexOf(nsSeparator) > -1) {\n        var m = key.match(this.interpolator.nestingRegexp);\n\n        if (m && m.length > 0) {\n          return {\n            key: key,\n            namespaces: namespaces\n          };\n        }\n\n        var parts = key.split(nsSeparator);\n        if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n        key = parts.join(keySeparator);\n      }\n\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      return {\n        key: key,\n        namespaces: namespaces\n      };\n    }\n  }, {\n    key: \"translate\",\n    value: function translate(keys, options) {\n      var _this2 = this;\n\n      if (_typeof(options) !== 'object' && this.options.overloadTranslationOptionHandler) {\n        options = this.options.overloadTranslationOptionHandler(arguments);\n      }\n\n      if (!options) options = {};\n      if (keys === undefined || keys === null) return '';\n      if (!Array.isArray(keys)) keys = [String(keys)];\n      var keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n\n      var _this$extractFromKey = this.extractFromKey(keys[keys.length - 1], options),\n          key = _this$extractFromKey.key,\n          namespaces = _this$extractFromKey.namespaces;\n\n      var namespace = namespaces[namespaces.length - 1];\n      var lng = options.lng || this.language;\n      var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n\n      if (lng && lng.toLowerCase() === 'cimode') {\n        if (appendNamespaceToCIMode) {\n          var nsSeparator = options.nsSeparator || this.options.nsSeparator;\n          return namespace + nsSeparator + key;\n        }\n\n        return key;\n      }\n\n      var resolved = this.resolve(keys, options);\n      var res = resolved && resolved.res;\n      var resUsedKey = resolved && resolved.usedKey || key;\n      var resExactUsedKey = resolved && resolved.exactUsedKey || key;\n      var resType = Object.prototype.toString.apply(res);\n      var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n      var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n      var handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n      var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n\n      if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n        if (!options.returnObjects && !this.options.returnObjects) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n          return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, options) : \"key '\".concat(key, \" (\").concat(this.language, \")' returned an object instead of string.\");\n        }\n\n        if (keySeparator) {\n          var resTypeIsArray = resType === '[object Array]';\n          var copy$$1 = resTypeIsArray ? [] : {};\n          var newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n\n          for (var m in res) {\n            if (Object.prototype.hasOwnProperty.call(res, m)) {\n              var deepKey = \"\".concat(newKeyToUse).concat(keySeparator).concat(m);\n              copy$$1[m] = this.translate(deepKey, _objectSpread({}, options, {\n                joinArrays: false,\n                ns: namespaces\n              }));\n              if (copy$$1[m] === deepKey) copy$$1[m] = res[m];\n            }\n          }\n\n          res = copy$$1;\n        }\n      } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n        res = res.join(joinArrays);\n        if (res) res = this.extendTranslation(res, keys, options);\n      } else {\n        var usedDefault = false;\n        var usedKey = false;\n\n        if (!this.isValidLookup(res) && options.defaultValue !== undefined) {\n          usedDefault = true;\n\n          if (options.count !== undefined) {\n            var suffix = this.pluralResolver.getSuffix(lng, options.count);\n            res = options[\"defaultValue\".concat(suffix)];\n          }\n\n          if (!res) res = options.defaultValue;\n        }\n\n        if (!this.isValidLookup(res)) {\n          usedKey = true;\n          res = key;\n        }\n\n        var updateMissing = options.defaultValue && options.defaultValue !== res && this.options.updateMissing;\n\n        if (usedKey || usedDefault || updateMissing) {\n          this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? options.defaultValue : res);\n\n          if (keySeparator) {\n            var fk = this.resolve(key, _objectSpread({}, options, {\n              keySeparator: false\n            }));\n            if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n          }\n\n          var lngs = [];\n          var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n\n          if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n            for (var i = 0; i < fallbackLngs.length; i++) {\n              lngs.push(fallbackLngs[i]);\n            }\n          } else if (this.options.saveMissingTo === 'all') {\n            lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n          } else {\n            lngs.push(options.lng || this.language);\n          }\n\n          var send = function send(l, k) {\n            if (_this2.options.missingKeyHandler) {\n              _this2.options.missingKeyHandler(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);\n            } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {\n              _this2.backendConnector.saveMissing(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);\n            }\n\n            _this2.emit('missingKey', l, namespace, k, res);\n          };\n\n          if (this.options.saveMissing) {\n            var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n\n            if (this.options.saveMissingPlurals && needsPluralHandling) {\n              lngs.forEach(function (l) {\n                var plurals = _this2.pluralResolver.getPluralFormsOfKey(l, key);\n\n                plurals.forEach(function (p) {\n                  return send([l], p);\n                });\n              });\n            } else {\n              send(lngs, key);\n            }\n          }\n        }\n\n        res = this.extendTranslation(res, keys, options, resolved);\n        if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = \"\".concat(namespace, \":\").concat(key);\n        if (usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"extendTranslation\",\n    value: function extendTranslation(res, key, options, resolved) {\n      var _this3 = this;\n\n      if (this.i18nFormat && this.i18nFormat.parse) {\n        res = this.i18nFormat.parse(res, options, resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n          resolved: resolved\n        });\n      } else if (!options.skipInterpolation) {\n        if (options.interpolation) this.interpolator.init(_objectSpread({}, options, {\n          interpolation: _objectSpread({}, this.options.interpolation, options.interpolation)\n        }));\n        var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n        if (this.options.interpolation.defaultVariables) data = _objectSpread({}, this.options.interpolation.defaultVariables, data);\n        res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n        if (options.nest !== false) res = this.interpolator.nest(res, function () {\n          return _this3.translate.apply(_this3, arguments);\n        }, options);\n        if (options.interpolation) this.interpolator.reset();\n      }\n\n      var postProcess = options.postProcess || this.options.postProcess;\n      var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n\n      if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n        res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? _objectSpread({\n          i18nResolved: resolved\n        }, options) : options, this);\n      }\n\n      return res;\n    }\n  }, {\n    key: \"resolve\",\n    value: function resolve(keys) {\n      var _this4 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var found;\n      var usedKey;\n      var exactUsedKey;\n      var usedLng;\n      var usedNS;\n      if (typeof keys === 'string') keys = [keys];\n      keys.forEach(function (k) {\n        if (_this4.isValidLookup(found)) return;\n\n        var extracted = _this4.extractFromKey(k, options);\n\n        var key = extracted.key;\n        usedKey = key;\n        var namespaces = extracted.namespaces;\n        if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);\n        var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n        var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';\n        var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language, options.fallbackLng);\n        namespaces.forEach(function (ns) {\n          if (_this4.isValidLookup(found)) return;\n          usedNS = ns;\n\n          if (!checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] && _this4.utils && _this4.utils.hasLoadedNamespace && !_this4.utils.hasLoadedNamespace(usedNS)) {\n            checkedLoadedFor[\"\".concat(codes[0], \"-\").concat(ns)] = true;\n\n            _this4.logger.warn(\"key \\\"\".concat(usedKey, \"\\\" for languages \\\"\").concat(codes.join(', '), \"\\\" won't get resolved as namespace \\\"\").concat(usedNS, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n          }\n\n          codes.forEach(function (code) {\n            if (_this4.isValidLookup(found)) return;\n            usedLng = code;\n            var finalKey = key;\n            var finalKeys = [finalKey];\n\n            if (_this4.i18nFormat && _this4.i18nFormat.addLookupKeys) {\n              _this4.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n            } else {\n              var pluralSuffix;\n              if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count);\n              if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);\n              if (needsContextHandling) finalKeys.push(finalKey += \"\".concat(_this4.options.contextSeparator).concat(options.context));\n              if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);\n            }\n\n            var possibleKey;\n\n            while (possibleKey = finalKeys.pop()) {\n              if (!_this4.isValidLookup(found)) {\n                exactUsedKey = possibleKey;\n                found = _this4.getResource(code, ns, possibleKey, options);\n              }\n            }\n          });\n        });\n      });\n      return {\n        res: found,\n        usedKey: usedKey,\n        exactUsedKey: exactUsedKey,\n        usedLng: usedLng,\n        usedNS: usedNS\n      };\n    }\n  }, {\n    key: \"isValidLookup\",\n    value: function isValidLookup(res) {\n      return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n    }\n  }, {\n    key: \"getResource\",\n    value: function getResource(code, ns, key) {\n      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n      return this.resourceStore.getResource(code, ns, key, options);\n    }\n  }]);\n\n  return Translator;\n}(EventEmitter);\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nvar LanguageUtil = function () {\n  function LanguageUtil(options) {\n    _classCallCheck(this, LanguageUtil);\n\n    this.options = options;\n    this.whitelist = this.options.supportedLngs || false;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n\n  _createClass(LanguageUtil, [{\n    key: \"getScriptPartFromCode\",\n    value: function getScriptPartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return null;\n      var p = code.split('-');\n      if (p.length === 2) return null;\n      p.pop();\n      if (p[p.length - 1].toLowerCase() === 'x') return null;\n      return this.formatLanguageCode(p.join('-'));\n    }\n  }, {\n    key: \"getLanguagePartFromCode\",\n    value: function getLanguagePartFromCode(code) {\n      if (!code || code.indexOf('-') < 0) return code;\n      var p = code.split('-');\n      return this.formatLanguageCode(p[0]);\n    }\n  }, {\n    key: \"formatLanguageCode\",\n    value: function formatLanguageCode(code) {\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n        var p = code.split('-');\n\n        if (this.options.lowerCaseLng) {\n          p = p.map(function (part) {\n            return part.toLowerCase();\n          });\n        } else if (p.length === 2) {\n          p[0] = p[0].toLowerCase();\n          p[1] = p[1].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        } else if (p.length === 3) {\n          p[0] = p[0].toLowerCase();\n          if (p[1].length === 2) p[1] = p[1].toUpperCase();\n          if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n          if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n          if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n        }\n\n        return p.join('-');\n      }\n\n      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n    }\n  }, {\n    key: \"isWhitelisted\",\n    value: function isWhitelisted(code) {\n      this.logger.deprecate('languageUtils.isWhitelisted', 'function \"isWhitelisted\" will be renamed to \"isSupportedCode\" in the next major - please make sure to rename it\\'s usage asap.');\n      return this.isSupportedCode(code);\n    }\n  }, {\n    key: \"isSupportedCode\",\n    value: function isSupportedCode(code) {\n      if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n        code = this.getLanguagePartFromCode(code);\n      }\n\n      return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n    }\n  }, {\n    key: \"getBestMatchFromCodes\",\n    value: function getBestMatchFromCodes(codes) {\n      var _this = this;\n\n      if (!codes) return null;\n      var found;\n      codes.forEach(function (code) {\n        if (found) return;\n\n        var cleanedLng = _this.formatLanguageCode(code);\n\n        if (!_this.options.supportedLngs || _this.isSupportedCode(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found && this.options.supportedLngs) {\n        codes.forEach(function (code) {\n          if (found) return;\n\n          var lngOnly = _this.getLanguagePartFromCode(code);\n\n          if (_this.isSupportedCode(lngOnly)) return found = lngOnly;\n          found = _this.options.supportedLngs.find(function (supportedLng) {\n            if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n          });\n        });\n      }\n\n      if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n      return found;\n    }\n  }, {\n    key: \"getFallbackCodes\",\n    value: function getFallbackCodes(fallbacks, code) {\n      if (!fallbacks) return [];\n      if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n      if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n      if (!code) return fallbacks[\"default\"] || [];\n      var found = fallbacks[code];\n      if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n      if (!found) found = fallbacks[this.formatLanguageCode(code)];\n      if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n      if (!found) found = fallbacks[\"default\"];\n      return found || [];\n    }\n  }, {\n    key: \"toResolveHierarchy\",\n    value: function toResolveHierarchy(code, fallbackCode) {\n      var _this2 = this;\n\n      var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n      var codes = [];\n\n      var addCode = function addCode(c) {\n        if (!c) return;\n\n        if (_this2.isSupportedCode(c)) {\n          codes.push(c);\n        } else {\n          _this2.logger.warn(\"rejecting language code not found in supportedLngs: \".concat(c));\n        }\n      };\n\n      if (typeof code === 'string' && code.indexOf('-') > -1) {\n        if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n        if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n        if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n      } else if (typeof code === 'string') {\n        addCode(this.formatLanguageCode(code));\n      }\n\n      fallbackCodes.forEach(function (fc) {\n        if (codes.indexOf(fc) < 0) addCode(_this2.formatLanguageCode(fc));\n      });\n      return codes;\n    }\n  }]);\n\n  return LanguageUtil;\n}();\n\nvar sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nvar _rulesPluralsTypes = {\n  1: function _(n) {\n    return Number(n > 1);\n  },\n  2: function _(n) {\n    return Number(n != 1);\n  },\n  3: function _(n) {\n    return 0;\n  },\n  4: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function _(n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function _(n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function _(n) {\n    return Number(n >= 2);\n  },\n  10: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function _(n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function _(n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function _(n) {\n    return Number(n !== 0);\n  },\n  14: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function _(n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function _(n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function _(n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function _(n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function _(n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function _(n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\n\nfunction createRules() {\n  var rules = {};\n  sets.forEach(function (set) {\n    set.lngs.forEach(function (l) {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\n\nvar PluralResolver = function () {\n  function PluralResolver(languageUtils) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, PluralResolver);\n\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    this.rules = createRules();\n  }\n\n  _createClass(PluralResolver, [{\n    key: \"addRule\",\n    value: function addRule(lng, obj) {\n      this.rules[lng] = obj;\n    }\n  }, {\n    key: \"getRule\",\n    value: function getRule(code) {\n      return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n    }\n  }, {\n    key: \"needsPlural\",\n    value: function needsPlural(code) {\n      var rule = this.getRule(code);\n      return rule && rule.numbers.length > 1;\n    }\n  }, {\n    key: \"getPluralFormsOfKey\",\n    value: function getPluralFormsOfKey(code, key) {\n      var _this = this;\n\n      var ret = [];\n      var rule = this.getRule(code);\n      if (!rule) return ret;\n      rule.numbers.forEach(function (n) {\n        var suffix = _this.getSuffix(code, n);\n\n        ret.push(\"\".concat(key).concat(suffix));\n      });\n      return ret;\n    }\n  }, {\n    key: \"getSuffix\",\n    value: function getSuffix(code, count) {\n      var _this2 = this;\n\n      var rule = this.getRule(code);\n\n      if (rule) {\n        var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n        var suffix = rule.numbers[idx];\n\n        if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          if (suffix === 2) {\n            suffix = 'plural';\n          } else if (suffix === 1) {\n            suffix = '';\n          }\n        }\n\n        var returnSuffix = function returnSuffix() {\n          return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();\n        };\n\n        if (this.options.compatibilityJSON === 'v1') {\n          if (suffix === 1) return '';\n          if (typeof suffix === 'number') return \"_plural_\".concat(suffix.toString());\n          return returnSuffix();\n        } else if (this.options.compatibilityJSON === 'v2') {\n          return returnSuffix();\n        } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n          return returnSuffix();\n        }\n\n        return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n      }\n\n      this.logger.warn(\"no plural rule found for: \".concat(code));\n      return '';\n    }\n  }]);\n\n  return PluralResolver;\n}();\n\nvar Interpolator = function () {\n  function Interpolator() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Interpolator);\n\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n\n    this.format = options.interpolation && options.interpolation.format || function (value) {\n      return value;\n    };\n\n    this.init(options);\n  }\n\n  _createClass(Interpolator, [{\n    key: \"init\",\n    value: function init() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!options.interpolation) options.interpolation = {\n        escapeValue: true\n      };\n      var iOpts = options.interpolation;\n      this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n      this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n      this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n      this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n      this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n      this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n      this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n      this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n      this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n      this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n      this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n      this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n      this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n      this.resetRegExp();\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      if (this.options) this.init(this.options);\n    }\n  }, {\n    key: \"resetRegExp\",\n    value: function resetRegExp() {\n      var regexpStr = \"\".concat(this.prefix, \"(.+?)\").concat(this.suffix);\n      this.regexp = new RegExp(regexpStr, 'g');\n      var regexpUnescapeStr = \"\".concat(this.prefix).concat(this.unescapePrefix, \"(.+?)\").concat(this.unescapeSuffix).concat(this.suffix);\n      this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n      var nestingRegexpStr = \"\".concat(this.nestingPrefix, \"(.+?)\").concat(this.nestingSuffix);\n      this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n    }\n  }, {\n    key: \"interpolate\",\n    value: function interpolate(str, data, lng, options) {\n      var _this = this;\n\n      var match;\n      var value;\n      var replaces;\n      var defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n\n      function regexSafe(val) {\n        return val.replace(/\\$/g, '$$$$');\n      }\n\n      var handleFormat = function handleFormat(key) {\n        if (key.indexOf(_this.formatSeparator) < 0) {\n          var path = getPathWithDefaults(data, defaultData, key);\n          return _this.alwaysFormat ? _this.format(path, undefined, lng) : path;\n        }\n\n        var p = key.split(_this.formatSeparator);\n        var k = p.shift().trim();\n        var f = p.join(_this.formatSeparator).trim();\n        return _this.format(getPathWithDefaults(data, defaultData, k), f, lng, options);\n      };\n\n      this.resetRegExp();\n      var missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n      replaces = 0;\n\n      while (match = this.regexpUnescape.exec(str)) {\n        value = handleFormat(match[1].trim());\n\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            var temp = missingInterpolationHandler(str, match, options);\n            value = typeof temp === 'string' ? temp : '';\n          } else {\n            this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n\n        str = str.replace(match[0], regexSafe(value));\n        this.regexpUnescape.lastIndex = 0;\n        replaces++;\n\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n\n      replaces = 0;\n\n      while (match = this.regexp.exec(str)) {\n        value = handleFormat(match[1].trim());\n\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            var _temp = missingInterpolationHandler(str, match, options);\n\n            value = typeof _temp === 'string' ? _temp : '';\n          } else {\n            this.logger.warn(\"missed to pass in variable \".concat(match[1], \" for interpolating \").concat(str));\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n\n        value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n        replaces++;\n\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n\n      return str;\n    }\n  }, {\n    key: \"nest\",\n    value: function nest(str, fc) {\n      var _this2 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var match;\n      var value;\n\n      var clonedOptions = _objectSpread({}, options);\n\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n\n      function handleHasOptions(key, inheritedOptions) {\n        var sep = this.nestingOptionsSeparator;\n        if (key.indexOf(sep) < 0) return key;\n        var c = key.split(new RegExp(\"\".concat(sep, \"[ ]*{\")));\n        var optionsString = \"{\".concat(c[1]);\n        key = c[0];\n        optionsString = this.interpolate(optionsString, clonedOptions);\n        optionsString = optionsString.replace(/'/g, '\"');\n\n        try {\n          clonedOptions = JSON.parse(optionsString);\n          if (inheritedOptions) clonedOptions = _objectSpread({}, inheritedOptions, clonedOptions);\n        } catch (e) {\n          this.logger.warn(\"failed parsing options string in nesting for key \".concat(key), e);\n          return \"\".concat(key).concat(sep).concat(optionsString);\n        }\n\n        delete clonedOptions.defaultValue;\n        return key;\n      }\n\n      while (match = this.nestingRegexp.exec(str)) {\n        var formatters = [];\n        var doReduce = false;\n\n        if (match[0].includes(this.formatSeparator) && !/{.*}/.test(match[1])) {\n          var r = match[1].split(this.formatSeparator).map(function (elem) {\n            return elem.trim();\n          });\n          match[1] = r.shift();\n          formatters = r;\n          doReduce = true;\n        }\n\n        value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n        if (value && match[0] === str && typeof value !== 'string') return value;\n        if (typeof value !== 'string') value = makeString(value);\n\n        if (!value) {\n          this.logger.warn(\"missed to resolve \".concat(match[1], \" for nesting \").concat(str));\n          value = '';\n        }\n\n        if (doReduce) {\n          value = formatters.reduce(function (v, f) {\n            return _this2.format(v, f, options.lng, options);\n          }, value.trim());\n        }\n\n        str = str.replace(match[0], value);\n        this.regexp.lastIndex = 0;\n      }\n\n      return str;\n    }\n  }]);\n\n  return Interpolator;\n}();\n\nfunction remove(arr, what) {\n  var found = arr.indexOf(what);\n\n  while (found !== -1) {\n    arr.splice(found, 1);\n    found = arr.indexOf(what);\n  }\n}\n\nvar Connector = function (_EventEmitter) {\n  _inherits(Connector, _EventEmitter);\n\n  function Connector(backend, store, services) {\n    var _this;\n\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Connector);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Connector).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.backend = backend;\n    _this.store = store;\n    _this.services = services;\n    _this.languageUtils = services.languageUtils;\n    _this.options = options;\n    _this.logger = baseLogger.create('backendConnector');\n    _this.state = {};\n    _this.queue = [];\n\n    if (_this.backend && _this.backend.init) {\n      _this.backend.init(services, options.backend, options);\n    }\n\n    return _this;\n  }\n\n  _createClass(Connector, [{\n    key: \"queueLoad\",\n    value: function queueLoad(languages, namespaces, options, callback) {\n      var _this2 = this;\n\n      var toLoad = [];\n      var pending = [];\n      var toLoadLanguages = [];\n      var toLoadNamespaces = [];\n      languages.forEach(function (lng) {\n        var hasAllNamespaces = true;\n        namespaces.forEach(function (ns) {\n          var name = \"\".concat(lng, \"|\").concat(ns);\n\n          if (!options.reload && _this2.store.hasResourceBundle(lng, ns)) {\n            _this2.state[name] = 2;\n          } else if (_this2.state[name] < 0) ; else if (_this2.state[name] === 1) {\n            if (pending.indexOf(name) < 0) pending.push(name);\n          } else {\n            _this2.state[name] = 1;\n            hasAllNamespaces = false;\n            if (pending.indexOf(name) < 0) pending.push(name);\n            if (toLoad.indexOf(name) < 0) toLoad.push(name);\n            if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);\n          }\n        });\n        if (!hasAllNamespaces) toLoadLanguages.push(lng);\n      });\n\n      if (toLoad.length || pending.length) {\n        this.queue.push({\n          pending: pending,\n          loaded: {},\n          errors: [],\n          callback: callback\n        });\n      }\n\n      return {\n        toLoad: toLoad,\n        pending: pending,\n        toLoadLanguages: toLoadLanguages,\n        toLoadNamespaces: toLoadNamespaces\n      };\n    }\n  }, {\n    key: \"loaded\",\n    value: function loaded(name, err, data) {\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      if (err) this.emit('failedLoading', lng, ns, err);\n\n      if (data) {\n        this.store.addResourceBundle(lng, ns, data);\n      }\n\n      this.state[name] = err ? -1 : 2;\n      var loaded = {};\n      this.queue.forEach(function (q) {\n        pushPath(q.loaded, [lng], ns);\n        remove(q.pending, name);\n        if (err) q.errors.push(err);\n\n        if (q.pending.length === 0 && !q.done) {\n          Object.keys(q.loaded).forEach(function (l) {\n            if (!loaded[l]) loaded[l] = [];\n\n            if (q.loaded[l].length) {\n              q.loaded[l].forEach(function (ns) {\n                if (loaded[l].indexOf(ns) < 0) loaded[l].push(ns);\n              });\n            }\n          });\n          q.done = true;\n\n          if (q.errors.length) {\n            q.callback(q.errors);\n          } else {\n            q.callback();\n          }\n        }\n      });\n      this.emit('loaded', loaded);\n      this.queue = this.queue.filter(function (q) {\n        return !q.done;\n      });\n    }\n  }, {\n    key: \"read\",\n    value: function read(lng, ns, fcName) {\n      var _this3 = this;\n\n      var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 350;\n      var callback = arguments.length > 5 ? arguments[5] : undefined;\n      if (!lng.length) return callback(null, {});\n      return this.backend[fcName](lng, ns, function (err, data) {\n        if (err && data && tried < 5) {\n          setTimeout(function () {\n            _this3.read.call(_this3, lng, ns, fcName, tried + 1, wait * 2, callback);\n          }, wait);\n          return;\n        }\n\n        callback(err, data);\n      });\n    }\n  }, {\n    key: \"prepareLoading\",\n    value: function prepareLoading(languages, namespaces) {\n      var _this4 = this;\n\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var callback = arguments.length > 3 ? arguments[3] : undefined;\n\n      if (!this.backend) {\n        this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n        return callback && callback();\n      }\n\n      if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n      if (typeof namespaces === 'string') namespaces = [namespaces];\n      var toLoad = this.queueLoad(languages, namespaces, options, callback);\n\n      if (!toLoad.toLoad.length) {\n        if (!toLoad.pending.length) callback();\n        return null;\n      }\n\n      toLoad.toLoad.forEach(function (name) {\n        _this4.loadOne(name);\n      });\n    }\n  }, {\n    key: \"load\",\n    value: function load(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {}, callback);\n    }\n  }, {\n    key: \"reload\",\n    value: function reload(languages, namespaces, callback) {\n      this.prepareLoading(languages, namespaces, {\n        reload: true\n      }, callback);\n    }\n  }, {\n    key: \"loadOne\",\n    value: function loadOne(name) {\n      var _this5 = this;\n\n      var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n      var s = name.split('|');\n      var lng = s[0];\n      var ns = s[1];\n      this.read(lng, ns, 'read', undefined, undefined, function (err, data) {\n        if (err) _this5.logger.warn(\"\".concat(prefix, \"loading namespace \").concat(ns, \" for language \").concat(lng, \" failed\"), err);\n        if (!err && data) _this5.logger.log(\"\".concat(prefix, \"loaded namespace \").concat(ns, \" for language \").concat(lng), data);\n\n        _this5.loaded(name, err, data);\n      });\n    }\n  }, {\n    key: \"saveMissing\",\n    value: function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n      var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n        this.logger.warn(\"did not save key \\\"\".concat(key, \"\\\" as the namespace \\\"\").concat(namespace, \"\\\" was not yet loaded\"), 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        return;\n      }\n\n      if (key === undefined || key === null || key === '') return;\n\n      if (this.backend && this.backend.create) {\n        this.backend.create(languages, namespace, key, fallbackValue, null, _objectSpread({}, options, {\n          isUpdate: isUpdate\n        }));\n      }\n\n      if (!languages || !languages[0]) return;\n      this.store.addResource(languages[0], namespace, key, fallbackValue);\n    }\n  }]);\n\n  return Connector;\n}(EventEmitter);\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    whitelist: false,\n    nonExplicitWhitelist: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: true,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      var ret = {};\n      if (_typeof(args[1]) === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n\n      if (_typeof(args[2]) === 'object' || _typeof(args[3]) === 'object') {\n        var options = args[3] || args[2];\n        Object.keys(options).forEach(function (key) {\n          ret[key] = options[key];\n        });\n      }\n\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: function format(value, _format, lng, options) {\n        return value;\n      },\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n\n  if (options.whitelist) {\n    if (options.whitelist && options.whitelist.indexOf('cimode') < 0) {\n      options.whitelist = options.whitelist.concat(['cimode']);\n    }\n\n    options.supportedLngs = options.whitelist;\n  }\n\n  if (options.nonExplicitWhitelist) {\n    options.nonExplicitSupportedLngs = options.nonExplicitWhitelist;\n  }\n\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n\n  return options;\n}\n\nfunction noop() {}\n\nvar I18n = function (_EventEmitter) {\n  _inherits(I18n, _EventEmitter);\n\n  function I18n() {\n    var _this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n    _classCallCheck(this, I18n);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(I18n).call(this));\n\n    if (isIE10) {\n      EventEmitter.call(_assertThisInitialized(_this));\n    }\n\n    _this.options = transformOptions(options);\n    _this.services = {};\n    _this.logger = baseLogger;\n    _this.modules = {\n      external: []\n    };\n\n    if (callback && !_this.isInitialized && !options.isClone) {\n      if (!_this.options.initImmediate) {\n        _this.init(options, callback);\n\n        return _possibleConstructorReturn(_this, _assertThisInitialized(_this));\n      }\n\n      setTimeout(function () {\n        _this.init(options, callback);\n      }, 0);\n    }\n\n    return _this;\n  }\n\n  _createClass(I18n, [{\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      if (options.whitelist && !options.supportedLngs) {\n        this.logger.deprecate('whitelist', 'option \"whitelist\" will be renamed to \"supportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      if (options.nonExplicitWhitelist && !options.nonExplicitSupportedLngs) {\n        this.logger.deprecate('whitelist', 'options \"nonExplicitWhitelist\" will be renamed to \"nonExplicitSupportedLngs\" in the next major - please make sure to rename this option asap.');\n      }\n\n      this.options = _objectSpread({}, get(), this.options, transformOptions(options));\n      this.format = this.options.interpolation.format;\n      if (!callback) callback = noop;\n\n      function createClassOnDemand(ClassOrObject) {\n        if (!ClassOrObject) return null;\n        if (typeof ClassOrObject === 'function') return new ClassOrObject();\n        return ClassOrObject;\n      }\n\n      if (!this.options.isClone) {\n        if (this.modules.logger) {\n          baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n        } else {\n          baseLogger.init(null, this.options);\n        }\n\n        var lu = new LanguageUtil(this.options);\n        this.store = new ResourceStore(this.options.resources, this.options);\n        var s = this.services;\n        s.logger = baseLogger;\n        s.resourceStore = this.store;\n        s.languageUtils = lu;\n        s.pluralResolver = new PluralResolver(lu, {\n          prepend: this.options.pluralSeparator,\n          compatibilityJSON: this.options.compatibilityJSON,\n          simplifyPluralSuffix: this.options.simplifyPluralSuffix\n        });\n        s.interpolator = new Interpolator(this.options);\n        s.utils = {\n          hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n        };\n        s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n        s.backendConnector.on('*', function (event) {\n          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n\n        if (this.modules.languageDetector) {\n          s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n          s.languageDetector.init(s, this.options.detection, this.options);\n        }\n\n        if (this.modules.i18nFormat) {\n          s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n          if (s.i18nFormat.init) s.i18nFormat.init(this);\n        }\n\n        this.translator = new Translator(this.services, this.options);\n        this.translator.on('*', function (event) {\n          for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          _this2.emit.apply(_this2, [event].concat(args));\n        });\n        this.modules.external.forEach(function (m) {\n          if (m.init) m.init(_this2);\n        });\n      }\n\n      if (!this.modules.languageDetector && !this.options.lng) {\n        this.logger.warn('init: no languageDetector is used and no lng is defined');\n      }\n\n      var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n      storeApi.forEach(function (fcName) {\n        _this2[fcName] = function () {\n          var _this2$store;\n\n          return (_this2$store = _this2.store)[fcName].apply(_this2$store, arguments);\n        };\n      });\n      var deferred = defer();\n\n      var load = function load() {\n        _this2.changeLanguage(_this2.options.lng, function (err, t) {\n          _this2.isInitialized = true;\n\n          _this2.logger.log('initialized', _this2.options);\n\n          _this2.emit('initialized', _this2.options);\n\n          deferred.resolve(t);\n          callback(err, t);\n        });\n      };\n\n      if (this.options.resources || !this.options.initImmediate) {\n        load();\n      } else {\n        setTimeout(load, 0);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"loadResources\",\n    value: function loadResources(language) {\n      var _this3 = this;\n\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n      var usedCallback = callback;\n      var usedLng = typeof language === 'string' ? language : this.language;\n      if (typeof language === 'function') usedCallback = language;\n\n      if (!this.options.resources || this.options.partialBundledLanguages) {\n        if (usedLng && usedLng.toLowerCase() === 'cimode') return usedCallback();\n        var toLoad = [];\n\n        var append = function append(lng) {\n          if (!lng) return;\n\n          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);\n\n          lngs.forEach(function (l) {\n            if (toLoad.indexOf(l) < 0) toLoad.push(l);\n          });\n        };\n\n        if (!usedLng) {\n          var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n          fallbacks.forEach(function (l) {\n            return append(l);\n          });\n        } else {\n          append(usedLng);\n        }\n\n        if (this.options.preload) {\n          this.options.preload.forEach(function (l) {\n            return append(l);\n          });\n        }\n\n        this.services.backendConnector.load(toLoad, this.options.ns, usedCallback);\n      } else {\n        usedCallback(null);\n      }\n    }\n  }, {\n    key: \"reloadResources\",\n    value: function reloadResources(lngs, ns, callback) {\n      var deferred = defer();\n      if (!lngs) lngs = this.languages;\n      if (!ns) ns = this.options.ns;\n      if (!callback) callback = noop;\n      this.services.backendConnector.reload(lngs, ns, function (err) {\n        deferred.resolve();\n        callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"use\",\n    value: function use(module) {\n      if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n      if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n\n      if (module.type === 'backend') {\n        this.modules.backend = module;\n      }\n\n      if (module.type === 'logger' || module.log && module.warn && module.error) {\n        this.modules.logger = module;\n      }\n\n      if (module.type === 'languageDetector') {\n        this.modules.languageDetector = module;\n      }\n\n      if (module.type === 'i18nFormat') {\n        this.modules.i18nFormat = module;\n      }\n\n      if (module.type === 'postProcessor') {\n        postProcessor.addPostProcessor(module);\n      }\n\n      if (module.type === '3rdParty') {\n        this.modules.external.push(module);\n      }\n\n      return this;\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage(lng, callback) {\n      var _this4 = this;\n\n      this.isLanguageChangingTo = lng;\n      var deferred = defer();\n      this.emit('languageChanging', lng);\n\n      var done = function done(err, l) {\n        if (l) {\n          _this4.language = l;\n          _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n\n          _this4.translator.changeLanguage(l);\n\n          _this4.isLanguageChangingTo = undefined;\n\n          _this4.emit('languageChanged', l);\n\n          _this4.logger.log('languageChanged', l);\n        } else {\n          _this4.isLanguageChangingTo = undefined;\n        }\n\n        deferred.resolve(function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n        if (callback) callback(err, function () {\n          return _this4.t.apply(_this4, arguments);\n        });\n      };\n\n      var setLng = function setLng(lngs) {\n        var l = typeof lngs === 'string' ? lngs : _this4.services.languageUtils.getBestMatchFromCodes(lngs);\n\n        if (l) {\n          if (!_this4.language) {\n            _this4.language = l;\n            _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);\n          }\n\n          if (!_this4.translator.language) _this4.translator.changeLanguage(l);\n          if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);\n        }\n\n        _this4.loadResources(l, function (err) {\n          done(err, l);\n        });\n      };\n\n      if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n        setLng(this.services.languageDetector.detect());\n      } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n        this.services.languageDetector.detect(setLng);\n      } else {\n        setLng(lng);\n      }\n\n      return deferred;\n    }\n  }, {\n    key: \"getFixedT\",\n    value: function getFixedT(lng, ns) {\n      var _this5 = this;\n\n      var fixedT = function fixedT(key, opts) {\n        var options;\n\n        if (_typeof(opts) !== 'object') {\n          for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n            rest[_key3 - 2] = arguments[_key3];\n          }\n\n          options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n        } else {\n          options = _objectSpread({}, opts);\n        }\n\n        options.lng = options.lng || fixedT.lng;\n        options.lngs = options.lngs || fixedT.lngs;\n        options.ns = options.ns || fixedT.ns;\n        return _this5.t(key, options);\n      };\n\n      if (typeof lng === 'string') {\n        fixedT.lng = lng;\n      } else {\n        fixedT.lngs = lng;\n      }\n\n      fixedT.ns = ns;\n      return fixedT;\n    }\n  }, {\n    key: \"t\",\n    value: function t() {\n      var _this$translator;\n\n      return this.translator && (_this$translator = this.translator).translate.apply(_this$translator, arguments);\n    }\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      var _this$translator2;\n\n      return this.translator && (_this$translator2 = this.translator).exists.apply(_this$translator2, arguments);\n    }\n  }, {\n    key: \"setDefaultNamespace\",\n    value: function setDefaultNamespace(ns) {\n      this.options.defaultNS = ns;\n    }\n  }, {\n    key: \"hasLoadedNamespace\",\n    value: function hasLoadedNamespace(ns) {\n      var _this6 = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (!this.isInitialized) {\n        this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n        return false;\n      }\n\n      if (!this.languages || !this.languages.length) {\n        this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n        return false;\n      }\n\n      var lng = this.languages[0];\n      var fallbackLng = this.options ? this.options.fallbackLng : false;\n      var lastLng = this.languages[this.languages.length - 1];\n      if (lng.toLowerCase() === 'cimode') return true;\n\n      var loadNotPending = function loadNotPending(l, n) {\n        var loadState = _this6.services.backendConnector.state[\"\".concat(l, \"|\").concat(n)];\n\n        return loadState === -1 || loadState === 2;\n      };\n\n      if (options.precheck) {\n        var preResult = options.precheck(this, loadNotPending);\n        if (preResult !== undefined) return preResult;\n      }\n\n      if (this.hasResourceBundle(lng, ns)) return true;\n      if (!this.services.backendConnector.backend) return true;\n      if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n      return false;\n    }\n  }, {\n    key: \"loadNamespaces\",\n    value: function loadNamespaces(ns, callback) {\n      var _this7 = this;\n\n      var deferred = defer();\n\n      if (!this.options.ns) {\n        callback && callback();\n        return Promise.resolve();\n      }\n\n      if (typeof ns === 'string') ns = [ns];\n      ns.forEach(function (n) {\n        if (_this7.options.ns.indexOf(n) < 0) _this7.options.ns.push(n);\n      });\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"loadLanguages\",\n    value: function loadLanguages(lngs, callback) {\n      var deferred = defer();\n      if (typeof lngs === 'string') lngs = [lngs];\n      var preloaded = this.options.preload || [];\n      var newLngs = lngs.filter(function (lng) {\n        return preloaded.indexOf(lng) < 0;\n      });\n\n      if (!newLngs.length) {\n        if (callback) callback();\n        return Promise.resolve();\n      }\n\n      this.options.preload = preloaded.concat(newLngs);\n      this.loadResources(function (err) {\n        deferred.resolve();\n        if (callback) callback(err);\n      });\n      return deferred;\n    }\n  }, {\n    key: \"dir\",\n    value: function dir(lng) {\n      if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;\n      if (!lng) return 'rtl';\n      var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];\n      return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';\n    }\n  }, {\n    key: \"createInstance\",\n    value: function createInstance() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 ? arguments[1] : undefined;\n      return new I18n(options, callback);\n    }\n  }, {\n    key: \"cloneInstance\",\n    value: function cloneInstance() {\n      var _this8 = this;\n\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n      var mergedOptions = _objectSpread({}, this.options, options, {\n        isClone: true\n      });\n\n      var clone = new I18n(mergedOptions);\n      var membersToCopy = ['store', 'services', 'language'];\n      membersToCopy.forEach(function (m) {\n        clone[m] = _this8[m];\n      });\n      clone.services = _objectSpread({}, this.services);\n      clone.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      clone.translator = new Translator(clone.services, clone.options);\n      clone.translator.on('*', function (event) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n\n        clone.emit.apply(clone, [event].concat(args));\n      });\n      clone.init(mergedOptions, callback);\n      clone.translator.options = clone.options;\n      clone.translator.backendConnector.services.utils = {\n        hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n      };\n      return clone;\n    }\n  }]);\n\n  return I18n;\n}(EventEmitter);\n\nvar i18next = new I18n();\n\nexport default i18next;\n","import app from 'apprun'\n\nimport i18next from \"i18next\"\n\n// take care of treeshaking - removing the below line may cause that the Wc gets removed by treeshaking\nimport '../../src'\nimport { intlMessage, intlDatetime, intlRelativeTime, intlNumber } from '../../src'\n\n// our app state\nconst state = 'en-GB'\n\n// initialize i18next\ni18next.init({\n  lng: state,\n  fallbackLng: \"en\",\n  resources: {\n    en: {\n      default: {\n        title: \"My {{value}}\",\n        deep: \"In English: {{value.key}} {{value.val}}!\",\n        html: \"With HTML it might get {{value}}\",\n        item: \"One item\",\n        item_plural: \"{{count}} items\",\n        placeholder: 'fill in here',\n        'Selected language': 'Selected language:'\n      },\n      test: {\n        key: \"A value\"\n      }\n    },\n    'en-US': {\n      default: {\n        deep: \"In US English: {{value.key}} {{value.val}}!\"\n      }\n    },\n    fr: {\n      default: {\n        title: \"Mon {{value}}\",\n        deep: \"En anglais: {{value.key}} {{value.val}} !\",\n        html: \"Avec le HTML, cela pourrait devenir {{value}}\",\n        item: \"Un seul article\",\n        item_plural: \"{{count}} articles\",\n        placeholder: 'remplir ici',\n        'Selected language': 'Langue choisie :'\n      },\n      test: {\n        key: \"une valeur\"\n      }\n    }\n  },\n  defaultNS: \"default\",\n  fallbackNS: \"global\"\n})\n\n// inject i18next into web-components\nconst IntlMessage = (props: object) => (<intl-message { ...{i18next, ...props }} />)\nconst IntlDatetime = (props: object) => (<intl-datetime { ...{i18next, ...props }} />)\nconst IntlRelativeTime = (props: object) => (<intl-relative-time { ...{i18next, ...props }} />)\nconst IntlNumber = (props: object) => (<intl-number { ...{i18next, ...props }} />)\n\n// our view\nconst view = (state: string) => (\n  <section>\n    <h1>demo with JSX</h1>\n\n    <p><IntlMessage label='Selected language' /> <strong>{state}</strong></p>\n    <button onclick={() => app.run('lng', 'en-GB')}>en-GB</button>\n    <button onclick={() => app.run('lng', 'en-US')}>en-US</button>\n    <button onclick={() => app.run('lng', 'fr')}>fr</button>\n    <button onclick={() => app.run('lng', 'ar')}>ar</button>\n    <button onclick={() => app.run('lng', 'zh-CN')}>zh-CN</button>\n\n    <section>\n      <h2>intl-message</h2>\n      <IntlMessage label='deep' value={{ key:'Hello', val:'World' }} />\n      <IntlMessage label='html' value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='html' dangerous value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='item' count={1} />\n      <IntlMessage label='item' count={10} />\n      <p><input placeholder={intlMessage({i18next, key: 'placeholder'})} /></p>\n    </section>\n\n    <section>\n      <h2>intl-datetime</h2>\n      <IntlDatetime />\n      <IntlDatetime value='2020-03-12' />\n      <IntlDatetime value={new Date('2020-03-12')} lng='en-US' />\n      <IntlDatetime value='2020-03-12' options={{weekday: 'short', year: 'numeric', month: 'long', day: 'numeric'}} />\n      <IntlDatetime value='2020-03-12 12:00:00' date time timeZone='Asia/Tokyo'/>\n      <p>as text: \"{intlDatetime({i18next, time: true, date: true})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-relative-time</h2>\n      <IntlRelativeTime numeric='auto'/>\n      <IntlRelativeTime value={new Date(Date.now() - (3 * 7 * 24 * 3600000))} />\n      <p>as text: \"{intlRelativeTime({i18next})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-number</h2>\n      <IntlNumber />\n      <IntlNumber value={123456.789} />\n      <IntlNumber value={123456.789} options={{\"style\":\"currency\",\"currency\":\"EUR\"}} />\n      <IntlNumber value={123456.789} styleProp=\"currency\" currency=\"JPY\" />\n      <IntlNumber value={50} styleProp=\"unit\" unit=\"mile-per-hour\" />\n      <IntlNumber value={987654321} notation=\"scientific\" />\n      <IntlNumber value=\"987654321\" notation=\"engineering\" />\n      <IntlNumber value={987654321} notation=\"compact\" />\n      <p>as text: \"{intlNumber({i18next, value: 987654321, notation: 'compact'})}\"</p>\n    </section>\n  </section>\n)\n\nconst update = {\n  lng: (state: string, nextState: string): string => {\n    i18next.changeLanguage(nextState)\n    return nextState\n  }\n}\n\napp.start(document.body, state, view, update)\n"],"sourceRoot":""}