{"version":3,"file":"examples/jsx.js","mappings":"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","sources":["webpack://i18next-wc/./src/BaseElement.tsx","webpack://i18next-wc/./src/intl-datetime.ts","webpack://i18next-wc/./src/intl-message.ts","webpack://i18next-wc/./src/intl-number.ts","webpack://i18next-wc/./src/relativeTime.ts","webpack://i18next-wc/./src/intl-relative-time.ts","webpack://i18next-wc/./src/utils.ts","webpack://i18next-wc/webpack/bootstrap","webpack://i18next-wc/webpack/runtime/define property getters","webpack://i18next-wc/webpack/runtime/global","webpack://i18next-wc/webpack/runtime/hasOwnProperty shorthand","webpack://i18next-wc/./node_modules/apprun/src/app.ts","webpack://i18next-wc/./node_modules/apprun/src/directive.ts","webpack://i18next-wc/./node_modules/apprun/src/vdom-my.ts","webpack://i18next-wc/./node_modules/apprun/src/web-component.ts","webpack://i18next-wc/./node_modules/apprun/src/decorator.ts","webpack://i18next-wc/./node_modules/apprun/src/component.ts","webpack://i18next-wc/./node_modules/apprun/src/router.ts","webpack://i18next-wc/./node_modules/apprun/src/apprun.ts","webpack://i18next-wc/./node_modules/i18next/dist/esm/i18next.js","webpack://i18next-wc/./test/jsx/test.tsx"],"sourcesContent":["import { IFnVoid } from './types'\n\nconst EVENTS = ['initialized', 'loaded', 'languageChanged']\n\nexport class BaseElement extends HTMLElement {\n  private _off: IFnVoid[]\n  private _observedAttributes: string[] = []\n  private _attrMap: (arg0: string) => string\n  protected _initialized: boolean = false\n  protected _props: object = {}\n  protected _i18next: any\n\n  set i18next (i18next :any) {\n    if (this._i18next !== i18next) {\n      this._disconnect()\n      this._i18next = i18next\n      this._connect()\n    }\n  }\n\n  static get observedAttributes () {\n    return []\n  }\n\n  constructor (attributes: string[]) {\n    super()\n    this._i18next = (window as any).i18next\n    const attrMap = attributes.reduce((map, name) => {\n      const lc = name.toLowerCase()\n      if (lc !== name) {\n        map[lc] = name\n      }\n      return map\n    }, {})\n    this._observedAttributes = attributes\n    this._attrMap = (name: string) : string => attrMap[name] || name\n  }\n\n  connectedCallback () {\n    this._assignProps()\n    this._disconnect() // try not to attach more than one event handler\n    this._connect()\n    this._initialized = true\n    this._render()\n  }\n\n  disconnectedCallback () {\n    this._disconnect()\n  }\n\n  attributeChangedCallback (name: string, oldValue: unknown, value: unknown) {\n    if (oldValue !== value) {\n      // camelCase attributes arrive only as lowercase\n      this._properties(this._attrMap(name), value)\n      window.requestAnimationFrame(() => {\n        this._render()\n      })\n    }\n  }\n\n  private _assignProps () {\n    Array.from(this.attributes).forEach(item => this._properties(this._attrMap(item.name), item.value))\n\n    this._observedAttributes.forEach(name => {\n      if (this[name] !== undefined) this._properties(name, this[name])\n\n      Object.defineProperty(this, name, {\n        get (): any {\n          return this._props[name]\n        },\n        set (this: BaseElement, value: unknown) {\n          this.attributeChangedCallback(name, this._props[name], value)\n        },\n        configurable: true,\n        enumerable: true\n      })\n    })\n  }\n\n  private _connect () {\n    if (this._i18next) {\n      this._off = EVENTS.map(evName => {\n        const fn = () => {\n          window.requestAnimationFrame(() => {\n            this._assignProps() // reassure that props are assigned after a remount\n            this._render()\n          })\n        }\n        this._i18next.on(evName, fn)\n        return () => this._i18next.off(evName, fn)\n      })\n    }\n  }\n\n  private _disconnect () {\n    this._off && this._off.forEach(fn => fn())\n  }\n\n  protected _languages (lng: string | undefined) {\n    const lngs = (this._i18next && this._i18next.languages) || (navigator as any).languages\n    return [].concat(lng, lngs).filter(Boolean)\n  }\n\n  protected _properties (name: string, value: unknown) {\n    // Needs implementation\n  }\n\n  protected _render () {\n    // Needs implementation\n  }\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: Date\n  lng?: string\n  options?: IOptions\n  date?: boolean\n  time?: boolean\n  weekday?: string\n  era?: string\n  year?: string\n  month?: string\n  day?: string\n  hour?: string\n  minute?: string\n  second?: string\n  hour12?: boolean\n  hourCycle?: string\n  timeZone?: string\n  timeZoneName?: string\n  localeMatcher?: string\n  formatMatcher?: string\n  numberingSystem?: string\n  calendar?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  'date',  // show date\n  'time',  // show time\n  // DateTimeFormatOptions\n  'weekday',\n  'era',\n  'year',\n  'month',\n  'day',\n  'hour',\n  'minute',\n  'second',\n  'hour12',\n  'hourCycle',\n  'timeZone',\n  'timeZoneName',\n  'localeMatcher',\n  'formatMatcher',\n  'numberingSystem',\n  'calendar'\n]\n\nconst DATE = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric'\n}\n\nconst TIME = {\n  hour: 'numeric',\n  minute: 'numeric',\n  second: 'numeric'\n}\n\nexport class IntlDatetime extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'value':\n        _props[name] = toDate(value)\n        break\n      case 'date':\n        if (trueish(value)) {\n          this._props = Object.assign(_props, DATE)\n        }\n        break\n      case 'time':\n        if (trueish(value)) {\n          const hour12 = _props.hour12 || false\n          this._props = Object.assign(_props, TIME, { hour12 })\n        } else {\n          const { hour, minute, second, ...other } = _props\n          this._props = other\n        }\n        break\n      case 'hour12': {\n        _props[name] = trueish(value)\n        break\n      }\n      case 'options':\n        this._props = Object.assign(_props, toJson(value, value))\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const date = value || new Date()\n      const lngs = this._languages(lng)\n      try {\n        // @ts-expect-error\n        this.textContent = new Intl.DateTimeFormat(lngs, options).format(date)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.DateTimeFormat(lngs).format(date)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-datetime', IntlDatetime)\n\nexport function intlDatetime (props: object | undefined) {\n  return elementText('intl-datetime', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  label?: string\n  key?: string\n  count?: number\n  context?: string\n  lng?: string\n  ns?: string[] | string\n  options?: IOptions\n  interpolation?: object\n  value?: Date | object | string\n  dangerous?: boolean\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  'key',\n  'label',\n  'count',\n  'context',\n  'lng',\n  'ns',\n  'options',\n  // own attribs\n  'value',\n  'dangerous'\n]\n\nexport class IntlMessage extends BaseElement {\n  protected _props: IOptions = {}\n  protected _initialized: boolean\n  protected _i18next: any\n  public innerHTML: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    if (name === 'dangerous') {\n      this._props.interpolation = { escapeValue: !trueish(value) }\n    } else {\n      const val = toDate(value) || toJson(value) || value\n      if (name === 'options' && typeof val === 'object') {\n        this._props = { ...this._props, ...val }\n      } else {\n        this._props[name] = val\n      }\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { label, key, ...options } = this._props\n      const transl = this._i18next.t(label || key, options)\n      if (transl) this.innerHTML = transl\n    }\n  }\n}\n\n// @ts-ignore\ncustomElements.define('intl-message', IntlMessage)\n\nexport function intlMessage (props: object = {}) {\n  return elementText('intl-message', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  style?: string\n  currency?: string\n  currencyDisplay?: string\n  currencySign?: string\n  unit?: string\n  unitDisplay?: string\n  notation?: string\n  compactDisplay?: string\n  useGrouping?: boolean\n  signDisplay?: string\n  localeMatcher?: string\n  minimumIntegerDigits?: number\n  minimumFractionDigits?: number\n  maximumFractionDigits?: number\n  minimumSignificantDigits?: number\n  maximumSignificantDigits?: number\n  numberingSystem?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  // NumberFormatOptions\n  'styleProp',\n  'currency',\n  'currencyDisplay',\n  'currencySign',\n  'unit',\n  'unitDisplay',\n  'notation',\n  'compactDisplay',\n  'useGrouping',\n  'signDisplay',\n  'localeMatcher',\n  'minimumIntegerDigits',\n  'minimumFractionDigits',\n  'maximumFractionDigits',\n  'minimumSignificantDigits',\n  'maximumSignificantDigits',\n  'numberingSystem'\n]\n\nexport class IntlNumber extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n    this._props.value = 0\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'options':\n        this._props = Object.assign(_props, toJson(value))\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const lngs = this._languages(lng)\n      try {\n        // @ts-expect-error\n        this.textContent = new Intl.NumberFormat(lngs, options).format(value)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.NumberFormat(lngs).format(value)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-number', IntlNumber)\n\nexport function intlNumber (props: object | undefined) {\n  return elementText('intl-number', props)\n}\n","\nimport {toNumber} from './utils'\n\ninterface IValueUnit {\n  value: number\n  unit: string\n  date?: Date\n}\n\nconst isDate = (value: any): boolean =>\n  value && (value instanceof Date) && !isNaN(value.getTime())\n\nconst UNITS = ['year', 'month', 'week', 'day', 'hour', 'minute', 'second']\n\nconst LOWER = [12, 4, 7, 24, 60, 60]\n\nconst INTERVAL_DAY = 86400\n\nconst INTERVALS = {\n  year: 365 * INTERVAL_DAY,\n  quarter: 4 * 30 * INTERVAL_DAY,\n  month: 30 * INTERVAL_DAY,\n  week: 7 * INTERVAL_DAY,\n  day: INTERVAL_DAY,\n  hour: 3600,\n  minute: 60\n}\n\nexport const toUnit = (unit?: string) => {\n  unit = String(unit).replace(/s$/, '')\n  return UNITS.indexOf(unit) !== -1 ? unit : 'second'\n}\n\nexport const weekDiff = (diff: any, now: Date) : number => {\n  const dayOfWeek = now.getDay()\n  const { day } = diff\n  const realdays = day < 0 ? day + dayOfWeek - 7 : day - dayOfWeek + 7\n  const realweeks = day < 0 ? Math.ceil(realdays / 7) : Math.floor(realdays / 7)\n  return realweeks\n}\n\nconst inUnit = (end: Date, start: Date, divider: number = 1) =>\n  Math.trunc((end.getTime() - start.getTime()) / 1000 / divider )\n\nconst inMonths = (end: Date, start: Date, days: number) : number => {\n  if (Math.abs(days) < 31) return 0\n  return Math.trunc(end.getMonth() + 12 * end.getFullYear() - (start.getMonth() + 12 * start.getFullYear()))\n}\n\nexport const relativeTime = (date?: Date | number, unit?: string) : IValueUnit => {\n  if (isDate(date)) {\n    date = date as Date\n    const now = new Date()\n    const day = inUnit(date as Date, now, INTERVALS.day)\n    const month = inMonths(date as Date, now, day)\n\n    const diff = {\n      year: Math.trunc(month / 12),\n      month,\n      week: inUnit(date, now, INTERVALS.week),\n      day,\n      hour: inUnit(date, now, INTERVALS.hour),\n      minute: inUnit(date, now, INTERVALS.minute),\n      second: inUnit(date, now)\n    }\n    for (let i = 0; i < UNITS.length; i++) {\n      const unit = UNITS[i]\n      let value = diff[unit]\n      if (value !== 0) {\n        if (unit === 'week') {\n          value = weekDiff(diff, now)\n        }\n        // console.log(date.toISOString(), diff, value, unit)\n        return { value, unit, date }\n      }\n    }\n    return { value: 0, unit: 'second', date: new Date() }\n  } else {\n    const ms = nextIntervalMs({ unit }, true) * (date as number) + Date.now()\n    return { value: toNumber(date), unit, date: new Date(ms) }\n  }\n}\n\nexport const nextIntervalMs = ({date = new Date(), unit}, exact?: boolean) : number => {\n  const interval = (INTERVALS[unit] || 1)\n  const delta = inUnit(date, new Date())\n  let diff = ((interval + delta) % interval) || interval\n  if (diff < 0) {\n    diff = (interval + diff) || 1\n  }\n  if (!exact) {\n    diff = Math.trunc(diff / 6) || 1\n  }\n  return diff * 1000\n}\n\nexport const lowerUnit = ({ value, unit }) : IValueUnit => {\n  if (value === 1) {\n    const i = UNITS.indexOf(unit)\n    value = LOWER[i] || value\n    unit = (i !== -1 && UNITS[i + 1]) || 'second'\n  }\n  return { value, unit }\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, trueish, toNumber, toDate, elementText, attributesToLowerCase } from './utils'\nimport { relativeTime, nextIntervalMs, lowerUnit, toUnit } from './relativeTime'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  unit?: string\n  localeMatcher?: string\n  style?: string\n  numeric?: string\n  update?: boolean\n  updateUnit?: boolean\n  date?: Date\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  //\n  'unit',\n  'localeMatcher',\n  'styleProp', // gets resolved to style\n  'numeric',\n  'update'\n]\n\nexport class IntlRelativeTime extends BaseElement {\n  protected _props: IOptions\n  private _timerId: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  disconnectedCallback () {\n    clearTimeout(this._timerId)\n    super.disconnectedCallback()\n  }\n\n  private _setTimer ()  {\n    const { date, value, unit } = this._props\n    const timeout = nextIntervalMs({ date, unit })\n    this._timerId = setTimeout(() => {\n      this._timerId = null\n      const change = lowerUnit(relativeTime(date, unit))\n      if (change.value !== value) {\n        this._props.value = change.value\n        this._properties('unit', change.unit)\n        this._render()\n      } else if (this._props.update) {\n        this._setTimer()\n      }\n    }, timeout)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n\n    switch (name) {\n      case 'value':\n        const _valueOrDate = toDate(value) || toNumber(value) || 0\n        this._props = Object.assign(_props, relativeTime(_valueOrDate, _props.unit))\n        break\n      case 'options':\n        const options = toJson(value)\n        if (typeof options === 'object') {\n          this._props = Object.assign(_props, options)\n        }\n        break\n      case 'update':\n        const isActive = _props[name] = trueish(value)\n        if (!isActive) clearTimeout(this._timerId)\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      case 'unit':\n        _props[name] = toUnit(value)\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value = 0, lng, unit = 'second', date, update, ...options } = this._props\n      if (update && !this._timerId) this._setTimer()\n      const lngs = this._languages(lng)\n      try {\n        // @ts-ignore - ts does not know Intl.RelativeTimeFormat yet\n        this.textContent = new Intl.RelativeTimeFormat(lngs, options).format(value, unit)\n      } catch (e) {\n        // fail safe display without options\n        // @ts-ignore\n        this.textContent = new Intl.RelativeTimeFormat(lngs).format(value, unit)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-relative-time', IntlRelativeTime)\n\nexport function intlRelativeTime (props: IOptions | undefined) {\n  const { update, ..._props } = props\n  return elementText('intl-relative-time', _props)\n}\n","export const trueish = (val: unknown) : boolean => val === '' || !!val\n\nexport const isDate = (date?: any) : boolean => date instanceof Date && !isNaN(date.getTime())\n\nconst RE_DATE = /^\\d{4}-\\d{2}-\\d{2}/\n\nexport const toDate = (val: any) : Date | undefined => {\n  if (isDate(val)) {\n    return val\n  } else if (typeof val === 'string') {\n    const date = new Date(val)\n    if (RE_DATE.test(String(val)) && isDate(date)) return date\n  }\n}\n\nexport const toJson = (val: any, def?: any) : any => {\n  if (typeof val === 'string') {\n    try {\n      return JSON.parse(val)\n    } catch (e) {}\n  }\n  return def\n}\n\nexport const toNumber = (val: any) => {\n  const n = Number(val)\n  if (!isNaN(n)) return n\n}\n\nexport const elementText = (tag: string, props: object | undefined) => {\n  const el = document.createElement(tag)\n  Object.entries(props).forEach(([name, value]) => { el[name] = value })\n  // @ts-ignore\n  el.connectedCallback()\n  return el.textContent\n}\n\nexport const attributesToLowerCase = (attrs: string[]) => attrs.map(attr => attr.toLowerCase())\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public h;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n  public safeHTML;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n\n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    }, options.delay);\n  }\n\n  query(name: string, ...args): Promise<any[]> {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    const promises = subscribers.map(sub => {\n      const { fn, options } = sub;\n      return Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    });\n    return Promise.all(promises);\n  }\n\n  private getSubscribers(name: string, events) {\n    const subscribers = events[name] || [];\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n    Object.keys(events).filter(evt => evt.endsWith('*') && name.startsWith(evt.replace('*', '')))\n      .sort((a, b) => b.length - a.length)\n      .forEach(evt => subscribers.push(...events[evt].map(sub => ({\n        ...sub,\n        options: { ...sub.options, event: name }\n      }))));\n    return subscribers;\n  }\n}\n\nconst AppRunVersions = 'AppRun-3';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = component['state'] || {};\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nconst apply_directive = (key: string, props: {}, tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run ? component.run(key, e) : app.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run ? component.run(event, e) : app.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run ? component.run(handler, ...p, e) : app.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    } else if (tag === 'textarea') {\n      props['innerHTML'] = getStateValue(component, name);\n      props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}\n\nconst directive = (vdom, component) => {\n  if (Array.isArray(vdom)) {\n    return vdom.map(element => directive(element, component));\n  } else {\n    let { tag, props, children } = vdom;\n    if (tag) {\n      if (props) Object.keys(props).forEach(key => {\n        if (key.startsWith('$')) {\n          apply_directive(key, props, tag, component);\n          delete props[key];\n        }\n      });\n      if (children) children = directive(children, component);\n      return { tag, props, children };\n    } else {\n      return vdom;\n    }\n  }\n}\n\nexport default directive;","import { VDOM, VNode } from './types';\nimport directive from './directive';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = new WeakMap();\n\nexport const updateElement = (element: Element | string, nodes: VDOM, component = {}) => {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  const el = (typeof element === 'string' && element) ?\n    document.getElementById(element) || document.querySelector(element) : element;\n  nodes = directive(nodes, component);\n  render(el, nodes, component);\n}\n\nfunction render(element: Element, nodes: VDOM, parent = {}) {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  nodes = createComponent(nodes, parent);\n  if (!element) return;\n  const isSvg = element.nodeName === \"SVG\";\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes, isSvg);\n  } else {\n    updateChildren(element, [nodes], isSvg);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode, isSvg: boolean) {\n  if (node['_op'] === 3) return;\n  // console.assert(!!element);\n  isSvg = isSvg || node.tag === \"svg\";\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node, isSvg), element);\n    return;\n  }\n  !(node['_op'] & 2) && updateChildren(element, node.children, isSvg);\n  !(node['_op'] & 1) && updateProps(element, node.props, isSvg);\n}\n\nfunction updateChildren(element, children, isSvg: boolean) {\n  const old_len = element.childNodes?.length || 0;\n  const new_len = children?.length || 0;\n  const len = Math.min(old_len, new_len);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    if (child['_op'] === 3) continue;\n    const el = element.childNodes[i];\n    if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.nodeValue = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else if (child instanceof HTMLElement || child instanceof SVGElement) {\n      element.insertBefore(child, el);\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child, isSvg);\n        } else {\n          // console.log(el.key, key);\n          const old = keyCache[key];\n          if (old) {\n            const temp = old.nextSibling;\n            element.insertBefore(old, el);\n            temp ? element.insertBefore(el, temp) : element.appendChild(el);\n            update(element.childNodes[i], child, isSvg);\n          } else {\n            element.replaceChild(create(child, isSvg), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child, isSvg);\n      }\n    }\n  }\n\n  let n = element.childNodes?.length || 0;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (new_len > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i], isSvg));\n    }\n    element.appendChild(d);\n  }\n}\n\nexport const safeHTML = (html: string) => {\n  const div = document.createElement('section');\n  div.insertAdjacentHTML('afterbegin', html)\n  return Array.from(div.children);\n}\n\nfunction createText(node) {\n  if (node?.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node??'');\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg: boolean): Element {\n  // console.assert(node !== null && node !== undefined);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props, isSvg);\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nexport function updateProps(element: Element, props: {}, isSvg) {\n  // console.assert(!!element);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      if (typeof value === 'string') element.style.cssText = value;\n      else {\n        for (const s in value) {\n          if (element.style[s] !== value[s]) element.style[s] = value[s];\n        }\n      }\n    } else if (name.startsWith('xlink')) {\n      const xname = name.replace('xlink', '').toLowerCase();\n      if (value == null || value === false) {\n        element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n      } else {\n        element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n      }\n    } else if (name.startsWith('on')) {\n      if (!value || typeof value === 'function') {\n        element[name] = value;\n      } else if (typeof value === 'string') {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-/g.test(name) || isSvg) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n      element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(() => props['ref'](element));\n  }\n}\n\nfunction render_component(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  let asTag = 'section';\n  if (props && props['as']) {\n    asTag = props['as'];\n    delete props['as'];\n  }\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component || !(component instanceof tag) || !component.element) {\n    const element = document.createElement(asTag);\n    component = parent.__componentCache[key] = new tag({ ...props, children }).start(element);\n  } else {\n    component.renderState(component.state);\n  }\n  if (component.mounted) {\n    const new_state = component.mounted(props, children, component.state);\n    (typeof new_state !== 'undefined') && component.setState(new_state);\n  }\n  updateProps(component.element, props, false);\n  return component.element;\n}\n\nfunction createComponent(node, parent, idx = 0) {\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, idx++));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) {\n    vdom = render_component(node, parent, idx);\n  }\n  if (vdom && Array.isArray(vdom.children)) {\n    const new_parent = vdom.props?._component;\n    if (new_parent) {\n      let i = 0;\n      vdom.children = vdom.children.map(child => createComponent(child, new_parent, i++));\n    } else {\n      vdom.children = vdom.children.map(child => createComponent(child, parent, idx++));\n    }\n  }\n  return vdom;\n}\n","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?: boolean;\n  shadow?: boolean;\n  history?: boolean;\n  global_event?: boolean;\n  observedAttributes?: string[];\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class CustomElement extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  private _attrMap: (arg0: string) => string;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    // attributes need to be set to lowercase in order to get observed\n    return (options.observedAttributes || []).map(attr => attr.toLowerCase());\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = options || {};\n      this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n      const observedAttributes = (opts.observedAttributes || [])\n\n      const attrMap = observedAttributes.reduce((map, name) => {\n        const lc = name.toLowerCase()\n        if (lc !== name) {\n          map[lc] = name\n        }\n        return map\n      }, {})\n      this._attrMap = (name: string) : string => attrMap[name] || name\n\n      const props = {};\n      Array.from(this.attributes).forEach(item => props[this._attrMap(item.name)] = item.value);\n\n      // add getters/ setters to allow observation on observedAttributes\n      observedAttributes.forEach(name => {\n        if (this[name] !== undefined) props[name] = this[name];\n        Object.defineProperty(this, name, {\n          get(): any {\n            return props[name];\n          },\n          set(this: CustomElement, value: unknown) {\n            // trigger change event\n            this.attributeChangedCallback(name, props[name], value)\n          },\n          configurable: true,\n          enumerable: true\n        });\n      })\n\n      requestAnimationFrame(() => {\n        const children = this.children ? Array.from(this.children) : [];\n        children.forEach(el => el.parentElement.removeChild(el));\n        this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n        // attach props to component\n        this._component._props = props;\n        // expose dispatchEvent\n        this._component.dispatchEvent = this.dispatchEvent.bind(this)\n        if (this._component.mounted) {\n          const new_state = this._component.mounted(props, children, this._component.state);\n          if (typeof new_state !== 'undefined') this._component.state = new_state;\n        }\n        this.on = this._component.on.bind(this._component);\n        this.run = this._component.run.bind(this._component);\n        if (!(opts.render === false)) this._component.run('.');\n      });\n    }\n  }\n\n  disconnectedCallback() {\n    this._component?.unload?.();\n    this._component?.unmount?.();\n    this._component = null;\n  }\n\n  attributeChangedCallback(name: string, oldValue: unknown, value: unknown) {\n    if (this._component) {\n      // camelCase attributes arrive only in lowercase\n      const mappedName = this._attrMap(name);\n      // store the new property/ attribute\n      this._component._props[mappedName] = value;\n      this._component.run('attributeChanged', mappedName, oldValue, value);\n\n      if (value !== oldValue && !(options.render === false)) {\n        window.requestAnimationFrame(() => {\n          // re-render state with new combined props on next animation frame\n          this._component.run('.')\n        })\n      }\n    }\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}\n","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E = string>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions, MountOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = new Map();\r\nif (!app.find('get-components')) app.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T = any, E = any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n  private observer;\r\n\r\n\r\n  private renderState(state: T, vdom = null) {\r\n    if (!this.view) return;\r\n    let html = vdom || this.view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      _: html ? '.' : '-',\r\n      state,\r\n      vdom: html,\r\n      el: this.element\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string' && this.element) ?\r\n      document.getElementById(this.element) || document.querySelector(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          if (!this.observer) this.observer = new MutationObserver(changes => {\r\n            if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\r\n              this.unload(this.state);\r\n              this.observer.disconnect();\r\n              this.observer = null;\r\n            }\r\n          });\r\n          this.observer.observe(document.body, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    if (!vdom && html) {\r\n      html = directive(html, this);\r\n      app.render(el, html, this);\r\n    }\r\n    this.rendered && this.rendered(this.state);\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions\r\n    = { render: true, history: false }) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      Promise.resolve(state).then(v => {\r\n        this.setState(v, options);\r\n        this._state = state;\r\n      });\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) this.renderState(state);\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null, options?: MountOptions): Component<T, E> => {\r\n    return this.mount(element, { render: true, ...options });\r\n  }\r\n\r\n  public mount(element = null, options?: MountOptions): Component<T, E> {\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n\r\n    if (options.route) {\r\n      this.update = this.update || {};\r\n      if (!this.update[options.route]) this.update[options.route] = REFRESH;\r\n    }\r\n\r\n    this.add_actions();\r\n    this.state = this.state ?? this['model'] ?? {};\r\n    if (typeof this.state === 'function') this.state = this.state();\r\n\r\n    this.setState(this.state, { render: !!options.render, history: true });\r\n\r\n    if (app['debug']) {\r\n      if (componentCache.get(element)) { componentCache.get(element).push(this) }\r\n      else { componentCache.set(element, [this]) }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this._global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '>',\r\n        event: name, p,\r\n        current_state: this.state,\r\n        options\r\n      });\r\n\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '<',\r\n        event: name, p,\r\n        newState,\r\n        state: this.state,\r\n        options\r\n      });\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    if (this.state instanceof Promise) {\r\n      return Promise.resolve(this.state).then(state => {\r\n        this.state = state;\r\n        this.run(event, ...args)\r\n      });\r\n    } else {\r\n      const name = event.toString();\r\n      return this.is_global_event(name) ?\r\n        app.run(name, ...args) :\r\n        this._app.run(name, ...args);\r\n    }\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public unmount() {\r\n    this.observer?.disconnect();\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app, { App } from './app';\nimport { createElement, render, Fragment, safeHTML } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions, MountOptions, AppStartOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: AppStartOptions<T>): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  find(name: string): any | any[];\n  h(tag: string | Function, props, ...children): VNode | VNode[];\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: Element | string, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n  safeHTML(html: string): any[];\n}\n\napp.h = app.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\napp.safeHTML = safeHTML;\n\napp.start = <T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n  options?: AppStartOptions<T>): Component<T, E> => {\n  const opts = { render: true, global_event: true, ...options };\n  const component = new Component<T, E>(model, view, update);\n  if (options && options.rendered) component.rendered = options.rendered;\n  component.mount(element, opts);\n  return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      document.body.hasAttribute('apprun-no-init') || app['no-init-route'] || route(location.hash);\n    }\n  });\n}\nexport type StatelessComponent<T = {}> = (args: T) => string | VNode | void;\nexport { App, app, Component, View, Action, Update, on, update, EventOptions, ActionOptions, MountOptions, Fragment, safeHTML }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions, AppStartOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['_React'] = window['React'];\n  window['React'] = app;\n  window['on'] = on;\n  window['customElement'] = customElement;\n  window['safeHTML'] = safeHTML;\n}\n\n\n","const consoleLogger = {\n  type: 'logger',\n  log(args) {\n    this.output('log', args);\n  },\n  warn(args) {\n    this.output('warn', args);\n  },\n  error(args) {\n    this.output('error', args);\n  },\n  output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nclass Logger {\n  constructor(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.init(concreteLogger, options);\n  }\n  init(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n  log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.forward(args, 'log', '', true);\n  }\n  warn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.forward(args, 'warn', '', true);\n  }\n  error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.forward(args, 'error', '');\n  }\n  deprecate() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (typeof args[0] === 'string') args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{\n        prefix: `${this.prefix}:${moduleName}:`\n      },\n      ...this.options\n    });\n  }\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\nvar baseLogger = new Logger();\n\nclass EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n  on(events, listener) {\n    events.split(' ').forEach(event => {\n      this.observers[event] = this.observers[event] || [];\n      this.observers[event].push(listener);\n    });\n    return this;\n  }\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n    this.observers[event] = this.observers[event].filter(l => l !== listener);\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.observers[event]) {\n      const cloned = [].concat(this.observers[event]);\n      cloned.forEach(observer => {\n        observer(...args);\n      });\n    }\n    if (this.observers['*']) {\n      const cloned = [].concat(this.observers['*']);\n      cloned.forEach(observer => {\n        observer.apply(observer, [event, ...args]);\n      });\n    }\n  }\n}\n\nfunction defer() {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(m => {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  const stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    const key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path);\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, s => _entityMap[s]);\n  }\n  return data;\n}\nconst chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);\n  if (possibleChars.length === 0) return true;\n  const r = new RegExp(`(${possibleChars.map(c => c === '?' ? '\\\\?' : c).join('|')})`);\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  const paths = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      let j = 2;\n      let p = paths.slice(i, i + j).join(keySeparator);\n      let mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      const joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\nfunction getCleanedCode(code) {\n  if (code && code.indexOf('_') > 0) return code.replace('_', '-');\n  return code;\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    super();\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n  getResource(lng, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n    let path = [lng, ns];\n    if (key && typeof key !== 'string') path = path.concat(key);\n    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    }\n    const result = getPath(this.data, path);\n    if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n  }\n  addResource(lng, ns, key, value) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      silent: false\n    };\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    setPath(this.data, path, value);\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n  addResources(lng, ns, resources) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      silent: false\n    };\n    for (const m in resources) {\n      if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n        silent: true\n      });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  addResourceBundle(lng, ns, resources, deep, overwrite) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      silent: false\n    };\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    let pack = getPath(this.data, path) || {};\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = {\n        ...pack,\n        ...resources\n      };\n    }\n    setPath(this.data, path, pack);\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n    this.emit('removed', lng, ns);\n  }\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    if (this.options.compatibilityAPI === 'v1') return {\n      ...{},\n      ...this.getResource(lng, ns)\n    };\n    return this.getResource(lng, ns);\n  }\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = data && Object.keys(data) || [];\n    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);\n  }\n  toJSON() {\n    return this.data;\n  }\n}\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle(processors, value, key, options, translator) {\n    processors.forEach(processor => {\n      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nconst checkedLoadedFor = {};\nclass Translator extends EventEmitter {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    this.logger = baseLogger.create('translator');\n  }\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n  exists(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    if (key === undefined || key === null) {\n      return false;\n    }\n    const resolved = this.resolve(key, options);\n    return resolved && resolved.res !== undefined;\n  }\n  extractFromKey(key, options) {\n    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let namespaces = options.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n    return {\n      key,\n      namespaces\n    };\n  }\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof options === 'object') options = {\n      ...options\n    };\n    if (!options) options = {};\n    if (keys === undefined || keys === null) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const {\n      key,\n      namespaces\n    } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng && lng.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace\n        };\n      }\n      return key;\n    }\n    const resolved = this.resolve(keys, options);\n    let res = resolved && resolved.res;\n    const resUsedKey = resolved && resolved.usedKey || key;\n    const resExactUsedKey = resolved && resolved.exactUsedKey || key;\n    const resType = Object.prototype.toString.apply(res);\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {\n          ...options,\n          ns: namespaces\n        }) : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          return resolved;\n        }\n        return r;\n      }\n      if (keySeparator) {\n        const resTypeIsArray = resType === '[object Array]';\n        const copy = resTypeIsArray ? [] : {};\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in res) {\n          if (Object.prototype.hasOwnProperty.call(res, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            copy[m] = this.translate(deepKey, {\n              ...options,\n              ...{\n                joinArrays: false,\n                ns: namespaces\n              }\n            });\n            if (copy[m] === deepKey) copy[m] = res[m];\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      let usedDefault = false;\n      let usedKey = false;\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const hasDefaultValue = Translator.hasDefaultValue(options);\n      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {\n        ordinal: false\n      }) : '';\n      const defaultValue = options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n        if (keySeparator) {\n          const fk = this.resolve(key, {\n            ...options,\n            keySeparator: false\n          });\n          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n        }\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n          } else if (this.backendConnector && this.backendConnector.saveMissing) {\n            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach(language => {\n              this.pluralResolver.getSuffixes(language, options).forEach(suffix => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        if (this.options.compatibilityAPI !== 'v1') {\n          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);\n        } else {\n          res = this.options.parseMissingKeyHandler(res);\n        }\n      }\n    }\n    if (returnDetails) {\n      resolved.res = res;\n      return resolved;\n    }\n    return res;\n  }\n  extendTranslation(res, key, options, resolved, lastKey) {\n    var _this = this;\n    if (this.i18nFormat && this.i18nFormat.parse) {\n      res = this.i18nFormat.parse(res, {\n        ...this.options.interpolation.defaultVariables,\n        ...options\n      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n        resolved\n      });\n    } else if (!options.skipInterpolation) {\n      if (options.interpolation) this.interpolator.init({\n        ...options,\n        ...{\n          interpolation: {\n            ...this.options.interpolation,\n            ...options.interpolation\n          }\n        }\n      });\n      const skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        nestBef = nb && nb.length;\n      }\n      let data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n      if (this.options.interpolation.defaultVariables) data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n      if (options.nest !== false) res = this.interpolator.nest(res, function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (lastKey && lastKey[0] === args[0] && !options.context) {\n          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);\n          return null;\n        }\n        return _this.translate(...args, key);\n      }, options);\n      if (options.interpolation) this.interpolator.reset();\n    }\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {\n        i18nResolved: resolved,\n        ...options\n      } : options, this);\n    }\n    return res;\n  }\n  resolve(keys) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let found;\n    let usedKey;\n    let exactUsedKey;\n    let usedLng;\n    let usedNS;\n    if (typeof keys === 'string') keys = [keys];\n    keys.forEach(k => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n      namespaces.forEach(ns => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(`key \"${usedKey}\" for languages \"${codes.join(', ')}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        }\n        codes.forEach(code => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n          const finalKeys = [key];\n          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            if (needsPluralHandling) {\n              finalKeys.push(key + pluralSuffix);\n              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n              }\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;\n              finalKeys.push(contextKey);\n              if (needsPluralHandling) {\n                finalKeys.push(contextKey + pluralSuffix);\n                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n                }\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n          let possibleKey;\n          while (possibleKey = finalKeys.pop()) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n    return {\n      res: found,\n      usedKey,\n      exactUsedKey,\n      usedLng,\n      usedNS\n    };\n  }\n  isValidLookup(res) {\n    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n  }\n  getResource(code, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n    for (const option in options) {\n      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n  formatLanguageCode(code) {\n    if (typeof code === 'string' && code.indexOf('-') > -1) {\n      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n      let p = code.split('-');\n      if (this.options.lowerCaseLng) {\n        p = p.map(part => part.toLowerCase());\n      } else if (p.length === 2) {\n        p[0] = p[0].toLowerCase();\n        p[1] = p[1].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n      } else if (p.length === 3) {\n        p[0] = p[0].toLowerCase();\n        if (p[1].length === 2) p[1] = p[1].toUpperCase();\n        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n      }\n      return p.join('-');\n    }\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n  }\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n    let found;\n    codes.forEach(code => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n    if (!found && this.options.supportedLngs) {\n      codes.forEach(code => {\n        if (found) return;\n        const lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return found = lngOnly;\n        found = this.options.supportedLngs.find(supportedLng => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n        });\n      });\n    }\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n    return found;\n  }\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n    if (!code) return fallbacks.default || [];\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n    return found || [];\n  }\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n    const codes = [];\n    const addCode = c => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n    if (typeof code === 'string' && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (typeof code === 'string') {\n      addCode(this.formatLanguageCode(code));\n    }\n    fallbackCodes.forEach(fc => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n    return codes;\n  }\n}\n\nlet sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nlet _rulesPluralsTypes = {\n  1: function (n) {\n    return Number(n > 1);\n  },\n  2: function (n) {\n    return Number(n != 1);\n  },\n  3: function (n) {\n    return 0;\n  },\n  4: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function (n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function (n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function (n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function (n) {\n    return Number(n >= 2);\n  },\n  10: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function (n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function (n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function (n) {\n    return Number(n !== 0);\n  },\n  14: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function (n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function (n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function (n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function (n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function (n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nconst nonIntlVersions = ['v1', 'v2', 'v3'];\nconst intlVersions = ['v4'];\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  const rules = {};\n  sets.forEach(set => {\n    set.lngs.forEach(l => {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nclass PluralResolver {\n  constructor(languageUtils) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n  getRule(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.shouldUseIntlApi()) {\n      try {\n        return new Intl.PluralRules(getCleanedCode(code), {\n          type: options.ordinal ? 'ordinal' : 'cardinal'\n        });\n      } catch {\n        return;\n      }\n    }\n    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n  }\n  needsPlural(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (this.shouldUseIntlApi()) {\n      return rule && rule.resolvedOptions().pluralCategories.length > 1;\n    }\n    return rule && rule.numbers.length > 1;\n  }\n  getPluralFormsOfKey(code, key) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);\n  }\n  getSuffixes(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (!rule) {\n      return [];\n    }\n    if (this.shouldUseIntlApi()) {\n      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n    }\n    return rule.numbers.map(number => this.getSuffix(code, number, options));\n  }\n  getSuffix(code, count) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const rule = this.getRule(code, options);\n    if (rule) {\n      if (this.shouldUseIntlApi()) {\n        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n      }\n      return this.getSuffixRetroCompatible(rule, count);\n    }\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return '';\n  }\n  getSuffixRetroCompatible(rule, count) {\n    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n    let suffix = rule.numbers[idx];\n    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      if (suffix === 2) {\n        suffix = 'plural';\n      } else if (suffix === 1) {\n        suffix = '';\n      }\n    }\n    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();\n    if (this.options.compatibilityJSON === 'v1') {\n      if (suffix === 1) return '';\n      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;\n      return returnSuffix();\n    } else if (this.options.compatibilityJSON === 'v2') {\n      return returnSuffix();\n    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      return returnSuffix();\n    }\n    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n  }\n  shouldUseIntlApi() {\n    return !nonIntlVersions.includes(this.options.compatibilityJSON);\n  }\n}\n\nfunction deepFindWithDefaults(data, defaultData, key) {\n  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nclass Interpolator {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || (value => value);\n    this.init(options);\n  }\n  init() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!options.interpolation) options.interpolation = {\n      escapeValue: true\n    };\n    const iOpts = options.interpolation;\n    this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n    this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n    this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n    this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n    this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n    this.resetRegExp();\n  }\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n  resetRegExp() {\n    const regexpStr = `${this.prefix}(.+?)${this.suffix}`;\n    this.regexp = new RegExp(regexpStr, 'g');\n    const regexpUnescapeStr = `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;\n    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n    const nestingRegexpStr = `${this.nestingPrefix}(.+?)${this.nestingSuffix}`;\n    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n  }\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n    function regexSafe(val) {\n      return val.replace(/\\$/g, '$$$$');\n    }\n    const handleFormat = key => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);\n        return this.alwaysFormat ? this.format(path, undefined, lng, {\n          ...options,\n          ...data,\n          interpolationkey: key\n        }) : path;\n      }\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k\n      });\n    };\n    this.resetRegExp();\n    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n    const todos = [{\n      regex: this.regexpUnescape,\n      safeValue: val => regexSafe(val)\n    }, {\n      regex: this.regexp,\n      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)\n    }];\n    todos.forEach(todo => {\n      replaces = 0;\n      while (match = todo.regex.exec(str)) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = typeof temp === 'string' ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue;\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n  nest(str, fc) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let match;\n    let value;\n    let clonedOptions;\n    function handleHasOptions(key, inheritedOptions) {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n      try {\n        clonedOptions = JSON.parse(optionsString);\n        if (inheritedOptions) clonedOptions = {\n          ...inheritedOptions,\n          ...clonedOptions\n        };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n      delete clonedOptions.defaultValue;\n      return key;\n    }\n    while (match = this.nestingRegexp.exec(str)) {\n      let formatters = [];\n      clonedOptions = {\n        ...options\n      };\n      clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n      if (value && match[0] === str && typeof value !== 'string') return value;\n      if (typeof value !== 'string') value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n      if (doReduce) {\n        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {\n          ...options,\n          interpolationkey: match[1].trim()\n        }), value.trim());\n      }\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nfunction parseFormatStr(formatStr) {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    const optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n      opts.forEach(opt => {\n        if (!opt) return;\n        const [key, ...rest] = opt.split(':');\n        const val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName,\n    formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  const cache = {};\n  return function invokeFormatter(val, lng, options) {\n    const key = lng + JSON.stringify(options);\n    let formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(getCleanedCode(lng), options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nclass Formatter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      currency: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt,\n          style: 'currency'\n        });\n        return val => formatter.format(val);\n      }),\n      datetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      relativetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val, opt.range || 'day');\n      }),\n      list: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      })\n    };\n    this.init(options);\n  }\n  init(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    const iOpts = options.interpolation;\n    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n  }\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n  format(value, format, lng) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const formats = format.split(this.formatSeparator);\n    const result = formats.reduce((mem, f) => {\n      const {\n        formatName,\n        formatOptions\n      } = parseFormatStr(f);\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n    return result;\n  }\n}\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nclass Connector extends EventEmitter {\n  constructor(backend, store, services) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super();\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    this.state = {};\n    this.queue = [];\n    if (this.backend && this.backend.init) {\n      this.backend.init(services, options.backend, options);\n    }\n  }\n  queueLoad(languages, namespaces, options, callback) {\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n    languages.forEach(lng => {\n      let hasAllNamespaces = true;\n      namespaces.forEach(ns => {\n        const name = `${lng}|${ns}`;\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2;\n        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1;\n          hasAllNamespaces = false;\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback\n      });\n    }\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces)\n    };\n  }\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    if (err) this.emit('failedLoading', lng, ns, err);\n    if (data) {\n      this.store.addResourceBundle(lng, ns, data);\n    }\n    this.state[name] = err ? -1 : 2;\n    const loaded = {};\n    this.queue.forEach(q => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n      if (err) q.errors.push(err);\n      if (q.pendingCount === 0 && !q.done) {\n        Object.keys(q.loaded).forEach(l => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach(n => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n    this.emit('loaded', loaded);\n    this.queue = this.queue.filter(q => !q.done);\n  }\n  read(lng, ns, fcName) {\n    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n    let callback = arguments.length > 5 ? arguments[5] : undefined;\n    if (!lng.length) return callback(null, {});\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({\n        lng,\n        ns,\n        fcName,\n        tried,\n        wait,\n        callback\n      });\n      return;\n    }\n    this.readingCalls++;\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          r.then(data => resolver(null, data)).catch(resolver);\n        } else {\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n    return fc(lng, ns, resolver);\n  }\n  prepareLoading(languages, namespaces) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let callback = arguments.length > 3 ? arguments[3] : undefined;\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback();\n      return null;\n    }\n    toLoad.toLoad.forEach(name => {\n      this.loadOne(name);\n    });\n  }\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {\n      reload: true\n    }, callback);\n  }\n  loadOne(name) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n      this.loaded(name, err, data);\n    });\n  }\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};\n    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n      this.logger.warn(`did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n      return;\n    }\n    if (key === undefined || key === null || key === '') return;\n    if (this.backend && this.backend.create) {\n      const opts = {\n        ...options,\n        isUpdate\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        try {\n          let r;\n          if (fc.length === 5) {\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            r.then(data => clb(null, data)).catch(clb);\n          } else {\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        fc(languages, namespace, key, fallbackValue, clb, opts);\n      }\n    }\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: false,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      let ret = {};\n      if (typeof args[1] === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n        const options = args[3] || args[2];\n        Object.keys(options).forEach(key => {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: (value, format, lng, options) => value,\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(mem => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nclass I18n extends EventEmitter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = {\n      external: []\n    };\n    bindMemberFunctions(this);\n    if (callback && !this.isInitialized && !options.isClone) {\n      if (!this.options.initImmediate) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n  init() {\n    var _this = this;\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n      if (typeof options.ns === 'string') {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n    const defOpts = get();\n    this.options = {\n      ...defOpts,\n      ...this.options,\n      ...transformOptions(options)\n    };\n    if (this.options.compatibilityAPI !== 'v1') {\n      this.options.interpolation = {\n        ...defOpts.interpolation,\n        ...this.options.interpolation\n      };\n    }\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n    function createClassOnDemand(ClassOrObject) {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    }\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else if (typeof Intl !== 'undefined') {\n        formatter = Formatter;\n      }\n      const lu = new LanguageUtil(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        _this.emit(event, ...args);\n      });\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n      this.translator = new Translator(this.services, this.options);\n      this.translator.on('*', function (event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _this.emit(event, ...args);\n      });\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n    storeApi.forEach(fcName => {\n      this[fcName] = function () {\n        return _this.store[fcName](...arguments);\n      };\n    });\n    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = function () {\n        _this.store[fcName](...arguments);\n        return _this;\n      };\n    });\n    const deferred = defer();\n    const load = () => {\n      const finish = (err, t) => {\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n        deferred.resolve(t);\n        callback(err, t);\n      };\n      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n    return deferred;\n  }\n  loadResources(language) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    let usedCallback = callback;\n    const usedLng = typeof language === 'string' ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();\n      const toLoad = [];\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      if (!usedLng) {\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n      if (this.options.preload) {\n        this.options.preload.forEach(l => append(l));\n      }\n      this.services.backendConnector.load(toLoad, this.options.ns, e => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve();\n      callback(err);\n    });\n    return deferred;\n  }\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n    return this;\n  }\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n  }\n  changeLanguage(lng, callback) {\n    var _this2 = this;\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n    const setLngProps = l => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n      deferred.resolve(function () {\n        return _this2.t(...arguments);\n      });\n      if (callback) callback(err, function () {\n        return _this2.t(...arguments);\n      });\n    };\n    const setLng = lngs => {\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      const l = typeof lngs === 'string' ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);\n      }\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n    return deferred;\n  }\n  getFixedT(lng, ns, keyPrefix) {\n    var _this3 = this;\n    const fixedT = function (key, opts) {\n      let options;\n      if (typeof opts !== 'object') {\n        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n          rest[_key3 - 2] = arguments[_key3];\n        }\n        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = {\n          ...opts\n        };\n      }\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n      const keySeparator = _this3.options.keySeparator || '.';\n      let resultKey;\n      if (options.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);\n      } else {\n        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return _this3.t(resultKey, options);\n    };\n    if (typeof lng === 'string') {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n  t() {\n    return this.translator && this.translator.translate(...arguments);\n  }\n  exists() {\n    return this.translator && this.translator.exists(...arguments);\n  }\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n  hasLoadedNamespace(ns) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n    if (lng.toLowerCase() === 'cimode') return true;\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 2;\n    };\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n    if (this.hasResourceBundle(lng, ns)) return true;\n    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n    return false;\n  }\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (typeof ns === 'string') ns = [ns];\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'string') lngs = [lngs];\n    const preloaded = this.options.preload || [];\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0);\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n  }\n  static createInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    return new I18n(options, callback);\n  }\n  cloneInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = {\n      ...this.options,\n      ...options,\n      ...{\n        isClone: true\n      }\n    };\n    const clone = new I18n(mergedOptions);\n    if (options.debug !== undefined || options.prefix !== undefined) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = {\n      ...this.services\n    };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      clone.store = new ResourceStore(this.store.data, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', function (event) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions;\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    return clone;\n  }\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\nconst instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nconst createInstance = instance.createInstance;\nconst dir = instance.dir;\nconst init = instance.init;\nconst loadResources = instance.loadResources;\nconst reloadResources = instance.reloadResources;\nconst use = instance.use;\nconst changeLanguage = instance.changeLanguage;\nconst getFixedT = instance.getFixedT;\nconst t = instance.t;\nconst exists = instance.exists;\nconst setDefaultNamespace = instance.setDefaultNamespace;\nconst hasLoadedNamespace = instance.hasLoadedNamespace;\nconst loadNamespaces = instance.loadNamespaces;\nconst loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import app from 'apprun'\n\nimport i18next from \"i18next\"\n\n// take care of treeshaking - removing the below line may cause that the Wc gets removed by treeshaking\nimport '../../src'\nimport { intlMessage, intlDatetime, intlRelativeTime, intlNumber } from '../../src'\n\n// our app state\nconst state = 'en-GB'\n\n// initialize i18next\ni18next.init({\n  lng: state,\n  fallbackLng: \"en\",\n  resources: {\n    en: {\n      default: {\n        title: \"My {{value}}\",\n        deep: \"In English: {{value.key}} {{value.val}}!\",\n        html: \"With HTML it might get {{value}}\",\n        item: \"One item\",\n        item_plural: \"{{count}} items\",\n        placeholder: 'fill in here',\n        'Selected language': 'Selected language:'\n      },\n      test: {\n        key: \"A value\"\n      }\n    },\n    'en-US': {\n      default: {\n        deep: \"In US English: {{value.key}} {{value.val}}!\"\n      }\n    },\n    fr: {\n      default: {\n        title: \"Mon {{value}}\",\n        deep: \"En anglais: {{value.key}} {{value.val}} !\",\n        html: \"Avec le HTML, cela pourrait devenir {{value}}\",\n        item: \"Un seul article\",\n        item_plural: \"{{count}} articles\",\n        placeholder: 'remplir ici',\n        'Selected language': 'Langue choisie :'\n      },\n      test: {\n        key: \"une valeur\"\n      }\n    }\n  },\n  defaultNS: \"default\",\n  fallbackNS: \"global\"\n})\n\n// inject i18next into web-components\nconst IntlMessage = (props: object) => (<intl-message { ...{i18next, ...props }} />)\nconst IntlDatetime = (props: object) => (<intl-datetime { ...{i18next, ...props }} />)\nconst IntlRelativeTime = (props: object) => (<intl-relative-time { ...{i18next, ...props }} />)\nconst IntlNumber = (props: object) => (<intl-number { ...{i18next, ...props }} />)\n\n// our view\nconst view = (state: string) => (\n  <section>\n    <h1>demo with JSX</h1>\n\n    <p><IntlMessage label='Selected language' /> <strong>{state}</strong></p>\n    <button onclick={() => app.run('lng', 'en-GB')}>en-GB</button>\n    <button onclick={() => app.run('lng', 'en-US')}>en-US</button>\n    <button onclick={() => app.run('lng', 'fr')}>fr</button>\n    <button onclick={() => app.run('lng', 'ar')}>ar</button>\n    <button onclick={() => app.run('lng', 'zh-CN')}>zh-CN</button>\n\n    <section>\n      <h2>intl-message</h2>\n      <IntlMessage label='deep' value={{ key:'Hello', val:'World' }} />\n      <IntlMessage label='html' value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='html' dangerous value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='item' count={1} />\n      <IntlMessage label='item' count={10} />\n      <p><input placeholder={intlMessage({i18next, key: 'placeholder'})} /></p>\n    </section>\n\n    <section>\n      <h2>intl-datetime</h2>\n      <IntlDatetime />\n      <IntlDatetime value='2020-03-12' />\n      <IntlDatetime value={new Date('2020-03-12')} lng='en-US' />\n      <IntlDatetime value='2020-03-12' options={{weekday: 'short', year: 'numeric', month: 'long', day: 'numeric'}} />\n      <IntlDatetime value='2020-03-12 12:00:00' date time timeZone='Asia/Tokyo'/>\n      <p>as text: \"{intlDatetime({i18next, time: true, date: true})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-relative-time</h2>\n      <IntlRelativeTime numeric='auto'/>\n      <IntlRelativeTime value={new Date(Date.now() - (3 * 7 * 24 * 3600000))} />\n      <p>as text: \"{intlRelativeTime({i18next})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-number</h2>\n      <IntlNumber />\n      <IntlNumber value={123456.789} />\n      <IntlNumber value={123456.789} options={{\"style\":\"currency\",\"currency\":\"EUR\"}} />\n      <IntlNumber value={123456.789} styleProp=\"currency\" currency=\"JPY\" />\n      <IntlNumber value={50} styleProp=\"unit\" unit=\"mile-per-hour\" />\n      <IntlNumber value={987654321} notation=\"scientific\" />\n      <IntlNumber value=\"987654321\" notation=\"engineering\" />\n      <IntlNumber value={987654321} notation=\"compact\" />\n      <p>as text: \"{intlNumber({i18next, value: 987654321, notation: 'compact'})}\"</p>\n    </section>\n  </section>\n)\n\nconst update = {\n  lng: (state: string, nextState: string): string => {\n    i18next.changeLanguage(nextState)\n    return nextState\n  }\n}\n\napp.start(document.body, state, view, update)\n"],"names":["EVENTS","BaseElement","HTMLElement","i18next","this","_i18next","_disconnect","_connect","observedAttributes","constructor","attributes","super","_observedAttributes","_initialized","_props","window","attrMap","reduce","map","name","lc","toLowerCase","_attrMap","connectedCallback","_assignProps","_render","disconnectedCallback","attributeChangedCallback","oldValue","value","_properties","requestAnimationFrame","Array","from","forEach","item","undefined","Object","defineProperty","get","set","configurable","enumerable","_off","evName","fn","on","off","_languages","lng","lngs","languages","navigator","concat","filter","Boolean","ATTR","DATE","year","month","day","TIME","hour","minute","second","IntlDatetime","assign","hour12","other","options","date","Date","textContent","Intl","DateTimeFormat","format","e","console","log","intlDatetime","props","customElements","define","IntlMessage","interpolation","escapeValue","val","label","key","transl","t","innerHTML","intlMessage","IntlNumber","style","NumberFormat","intlNumber","UNITS","LOWER","INTERVALS","quarter","week","weekDiff","diff","now","dayOfWeek","getDay","realdays","Math","ceil","floor","inUnit","end","start","divider","trunc","getTime","relativeTime","unit","isNaN","days","abs","getMonth","getFullYear","i","length","ms","nextIntervalMs","exact","interval","IntlRelativeTime","clearTimeout","_timerId","_setTimer","timeout","setTimeout","change","indexOf","lowerUnit","update","_valueOrDate","String","replace","RelativeTimeFormat","intlRelativeTime","trueish","isDate","RE_DATE","toDate","test","toJson","def","JSON","parse","toNumber","n","Number","elementText","tag","el","document","createElement","entries","attributesToLowerCase","attrs","attr","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","App","_events","push","subscribers","sub","find","run","args","getSubscribers","assert","delay","keys","apply","once","_t","query","promises","Promise","all","events","evt","endsWith","startsWith","sort","a","b","event","app","root","self","global","getStateValue","component","setStateValue","state","setState","directive","vdom","isArray","element","children","substring","handler","p","type","target","checked","multiple","selected","apply_directive","ATTR_PROPS","collect","ch","c","keyCache","WeakMap","node","isSvg","key1","nodeName","key2","toUpperCase","same","updateChildren","updateProps","parentNode","replaceChild","create","old_len","childNodes","new_len","len","min","child","nodeType","nodeValue","createText","SVGElement","insertBefore","old","temp","nextSibling","appendChild","removeChild","lastChild","createDocumentFragment","safeHTML","html","div","insertAdjacentHTML","createTextNode","stringify","createElementNS","cached","oldProps","newProps","mergeProps","cname","match","dataset","cssText","s","xname","removeAttributeNS","setAttributeNS","setAttribute","removeAttribute","getAttribute","createComponent","parent","idx","getPrototypeOf","__isAppRunComponent","id","asTag","__componentCache","renderState","mounted","new_state","render_component","new_parent","_component","customElement","componentClass","isConnected","opts","_shadowRoot","shadow","attachShadow","mode","parentElement","mount","dispatchEvent","bind","render","unload","unmount","mappedName","Reflect","meta","defineMetadata","metadataKey","metadataValue","has","getMetadataKeys","getMetadata","componentCache","Map","components","REFRESH","Component","view","_app","_actions","_global_events","_history","_history_idx","_history_prev","history","_history_next","_","getElementById","querySelector","tracking_attr","tracking_id","valueOf","toString","MutationObserver","observer","changes","body","contains","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","rendered","resolve","then","v","_state","enable_history","callback","global_event","prev","next","route","add_actions","is_global_event","add_action","action","current_state","newState","actions","act","split","trim","ROUTER_EVENT","ROUTER_404_EVENT","url","rest","h","Error","nodes","Fragment","webComponent","model","NOOP","addEventListener","onpopstate","location","hash","hasAttribute","consoleLogger","output","warn","error","Logger","concreteLogger","arguments","init","prefix","logger","debug","_len","_key","forward","_len2","_key2","_len3","_key3","deprecate","_len4","_key4","lvl","debugOnly","moduleName","clone","baseLogger","EventEmitter","observers","listener","l","emit","defer","res","rej","promise","reject","makeString","object","getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","shift","k","setPath","newValue","getPath","deepExtend","source","overwrite","regexEscape","str","_entityMap","data","chars","deepFind","keySeparator","paths","current","j","slice","join","mix","joinedPath","getCleanedCode","code","ResourceStore","ns","defaultNS","ignoreJSONStructure","addNamespaces","removeNamespaces","index","splice","getResource","result","addResource","silent","addResources","resources","m","addResourceBundle","deep","pack","removeResourceBundle","hasResourceBundle","getResourceBundle","compatibilityAPI","getDataByLanguage","hasLanguageSomeTranslations","toJSON","postProcessor","processors","addPostProcessor","handle","translator","processor","process","checkedLoadedFor","Translator","services","changeLanguage","language","exists","resolved","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","r","RegExp","matched","ki","looksLikeObjectPath","interpolator","nestingRegexp","parts","translate","lastKey","overloadTranslationOptionHandler","returnDetails","namespace","appendNamespaceToCIMode","usedKey","exactUsedKey","usedLng","usedNS","resUsedKey","resExactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy","newKeyToUse","deepKey","extendTranslation","usedDefault","needsPluralHandling","count","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValueSuffixOrdinalFallback","ordinal","defaultValue","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this","defaultVariables","skipInterpolation","skipOnVariables","nestBef","nb","interpolate","na","nest","context","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsZeroSuffixLookup","shouldUseIntlApi","needsContextHandling","codes","utils","hasLoadedNamespace","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","ordinalPrefix","contextKey","contextSeparator","possibleKey","pop","returnNull","returnEmptyString","resourceStore","option","capitalize","string","charAt","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","specialCases","lowerCaseLng","part","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngOnly","supportedLng","fallbacks","default","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","nonIntlVersions","intlVersions","suffixesOrder","zero","one","two","few","many","PluralResolver","compatibilityJSON","includes","PluralRules","rules","numbers","plurals","createRules","addRule","getRule","needsPlural","rule","resolvedOptions","pluralCategories","getPluralFormsOfKey","pluralCategory1","pluralCategory2","pluralCategory","prepend","number","select","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","deepFindWithDefaults","defaultData","getPathWithDefaults","Interpolator","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","f","missingInterpolationHandler","regex","safeValue","todo","exec","matchedVar","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","createCachedFormatter","cache","formatter","Formatter","formats","opt","currency","datetime","relativetime","range","list","ListFormat","add","addCached","mem","formatName","formatOptions","formatStr","optStr","parseInt","parseFormatStr","formatted","valOptions","formatParams","locale","Connector","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","queue","queueLoad","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","errors","err","q","pushPath","removePending","done","loadedKeys","read","fcName","tried","wait","resolver","catch","prepareLoading","loadOne","fallbackValue","isUpdate","clb","initImmediate","preload","partialBundledLanguages","ret","tDescription","transformOptions","noop","I18n","inst","modules","external","getOwnPropertyNames","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","deferred","finish","initializedStoreOnce","loadResources","usedCallback","append","resolvedLanguage","setResolvedLanguage","reloadResources","use","li","lngInLngs","_this2","isLanguageChangingTo","setLngProps","setLng","cacheUserLanguage","async","detect","getFixedT","keyPrefix","_this3","fixedT","resultKey","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","dir","createInstance","cloneInstance","forkResourceStore","mergedOptions","instance","en","title","item_plural","placeholder","fr","nextState","onclick","dangerous","weekday","time","timeZone","numeric","styleProp","notation"],"sourceRoot":""}