{"version":3,"file":"examples/jsx.js","mappings":"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","sources":["webpack://i18next-wc/./src/BaseElement.tsx","webpack://i18next-wc/./src/intl-datetime.ts","webpack://i18next-wc/./src/intl-message.ts","webpack://i18next-wc/./src/intl-number.ts","webpack://i18next-wc/./src/relativeTime.ts","webpack://i18next-wc/./src/intl-relative-time.ts","webpack://i18next-wc/./src/utils.ts","webpack://i18next-wc/webpack/bootstrap","webpack://i18next-wc/webpack/runtime/define property getters","webpack://i18next-wc/webpack/runtime/global","webpack://i18next-wc/webpack/runtime/hasOwnProperty shorthand","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/app.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/directive.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/vdom-my.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/web-component.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/decorator.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/component.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/router.ts","webpack://i18next-wc/./node_modules/.pnpm/apprun@3.31.0/node_modules/apprun/src/apprun.ts","webpack://i18next-wc/./node_modules/.pnpm/i18next@23.7.6/node_modules/i18next/dist/esm/i18next.js","webpack://i18next-wc/./test/jsx/test.tsx"],"sourcesContent":["import { IFnVoid } from './types'\n\nconst EVENTS = ['initialized', 'loaded', 'languageChanged']\n\nexport class BaseElement extends HTMLElement {\n  private _off: IFnVoid[]\n  private _observedAttributes: string[] = []\n  private _attrMap: (arg0: string) => string\n  protected _initialized: boolean = false\n  protected _props: object = {}\n  protected _i18next: any\n\n  set i18next (i18next :any) {\n    if (this._i18next !== i18next) {\n      this._disconnect()\n      this._i18next = i18next\n      this._connect()\n    }\n  }\n\n  static get observedAttributes () {\n    return []\n  }\n\n  constructor (attributes: string[]) {\n    super()\n    this._i18next = (window as any).i18next\n    const attrMap = attributes.reduce((map, name) => {\n      const lc = name.toLowerCase()\n      if (lc !== name) {\n        map[lc] = name\n      }\n      return map\n    }, {})\n    this._observedAttributes = attributes\n    this._attrMap = (name: string) : string => attrMap[name] || name\n  }\n\n  connectedCallback () {\n    this._assignProps()\n    this._disconnect() // try not to attach more than one event handler\n    this._connect()\n    this._initialized = true\n    this._render()\n  }\n\n  disconnectedCallback () {\n    this._disconnect()\n  }\n\n  attributeChangedCallback (name: string, oldValue: unknown, value: unknown) {\n    if (oldValue !== value) {\n      // camelCase attributes arrive only as lowercase\n      this._properties(this._attrMap(name), value)\n      window.requestAnimationFrame(() => {\n        this._render()\n      })\n    }\n  }\n\n  private _assignProps () {\n    Array.from(this.attributes).forEach(item => this._properties(this._attrMap(item.name), item.value))\n\n    this._observedAttributes.forEach(name => {\n      if (this[name] !== undefined) this._properties(name, this[name])\n\n      Object.defineProperty(this, name, {\n        get (): any {\n          return this._props[name]\n        },\n        set (this: BaseElement, value: unknown) {\n          this.attributeChangedCallback(name, this._props[name], value)\n        },\n        configurable: true,\n        enumerable: true\n      })\n    })\n  }\n\n  private _connect () {\n    if (this._i18next) {\n      this._off = EVENTS.map(evName => {\n        const fn = () => {\n          window.requestAnimationFrame(() => {\n            this._assignProps() // reassure that props are assigned after a remount\n            this._render()\n          })\n        }\n        this._i18next.on(evName, fn)\n        return () => this._i18next.off(evName, fn)\n      })\n    }\n  }\n\n  private _disconnect () {\n    this._off && this._off.forEach(fn => fn())\n  }\n\n  protected _languages (lng: string | undefined) {\n    const lngs = (this._i18next && this._i18next.languages) || (navigator as any).languages\n    return [].concat(lng, lngs).filter(Boolean)\n  }\n\n  protected _properties (name: string, value: unknown) {\n    // Needs implementation\n  }\n\n  protected _render () {\n    // Needs implementation\n  }\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: Date\n  lng?: string\n  options?: IOptions\n  date?: boolean\n  time?: boolean\n  weekday?: string\n  era?: string\n  year?: string\n  month?: string\n  day?: string\n  hour?: string\n  minute?: string\n  second?: string\n  hour12?: boolean\n  hourCycle?: string\n  timeZone?: string\n  timeZoneName?: string\n  localeMatcher?: string\n  formatMatcher?: string\n  numberingSystem?: string\n  calendar?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  'date',  // show date\n  'time',  // show time\n  // DateTimeFormatOptions\n  'weekday',\n  'era',\n  'year',\n  'month',\n  'day',\n  'hour',\n  'minute',\n  'second',\n  'hour12',\n  'hourCycle',\n  'timeZone',\n  'timeZoneName',\n  'localeMatcher',\n  'formatMatcher',\n  'numberingSystem',\n  'calendar'\n]\n\nconst DATE = {\n  year: 'numeric',\n  month: 'numeric',\n  day: 'numeric'\n}\n\nconst TIME = {\n  hour: 'numeric',\n  minute: 'numeric',\n  second: 'numeric'\n}\n\nexport class IntlDatetime extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'value':\n        _props[name] = toDate(value)\n        break\n      case 'date':\n        if (trueish(value)) {\n          this._props = Object.assign(_props, DATE)\n        }\n        break\n      case 'time':\n        if (trueish(value)) {\n          const hour12 = _props.hour12 || false\n          this._props = Object.assign(_props, TIME, { hour12 })\n        } else {\n          const { hour, minute, second, ...other } = _props\n          this._props = other\n        }\n        break\n      case 'hour12': {\n        _props[name] = trueish(value)\n        break\n      }\n      case 'options':\n        this._props = Object.assign(_props, toJson(value, value))\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const date = value || new Date()\n      const lngs = this._languages(lng)\n      try {\n        // @ts-expect-error\n        this.textContent = new Intl.DateTimeFormat(lngs, options).format(date)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.DateTimeFormat(lngs).format(date)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-datetime', IntlDatetime)\n\nexport function intlDatetime (props: object | undefined) {\n  return elementText('intl-datetime', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { trueish, toDate, toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  label?: string\n  key?: string\n  count?: number\n  context?: string\n  lng?: string\n  ns?: string[] | string\n  options?: IOptions\n  interpolation?: object\n  value?: Date | object | string\n  dangerous?: boolean\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  'key',\n  'label',\n  'count',\n  'context',\n  'lng',\n  'ns',\n  'options',\n  // own attribs\n  'value',\n  'dangerous'\n]\n\nexport class IntlMessage extends BaseElement {\n  protected _props: IOptions = {}\n  protected _initialized: boolean\n  protected _i18next: any\n  public innerHTML: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  protected _properties (name: string, value: any): void {\n    if (name === 'dangerous') {\n      this._props.interpolation = { escapeValue: !trueish(value) }\n    } else {\n      const val = toDate(value) || toJson(value) || value\n      if (name === 'options' && typeof val === 'object') {\n        this._props = { ...this._props, ...val }\n      } else {\n        this._props[name] = val\n      }\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { label, key, ...options } = this._props\n      const transl = this._i18next.t(label || key, options)\n      if (transl) this.innerHTML = transl\n    }\n  }\n}\n\n// @ts-ignore\ncustomElements.define('intl-message', IntlMessage)\n\nexport function intlMessage (props: object = {}) {\n  return elementText('intl-message', props)\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, elementText, attributesToLowerCase } from './utils'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  style?: string\n  currency?: string\n  currencyDisplay?: string\n  currencySign?: string\n  unit?: string\n  unitDisplay?: string\n  notation?: string\n  compactDisplay?: string\n  useGrouping?: boolean\n  signDisplay?: string\n  localeMatcher?: string\n  minimumIntegerDigits?: number\n  minimumFractionDigits?: number\n  maximumFractionDigits?: number\n  minimumSignificantDigits?: number\n  maximumSignificantDigits?: number\n  numberingSystem?: string\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  // NumberFormatOptions\n  'styleProp',\n  'currency',\n  'currencyDisplay',\n  'currencySign',\n  'unit',\n  'unitDisplay',\n  'notation',\n  'compactDisplay',\n  'useGrouping',\n  'signDisplay',\n  'localeMatcher',\n  'minimumIntegerDigits',\n  'minimumFractionDigits',\n  'maximumFractionDigits',\n  'minimumSignificantDigits',\n  'maximumSignificantDigits',\n  'numberingSystem'\n]\n\nexport class IntlNumber extends BaseElement {\n  protected _props: IOptions\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n    this._props.value = 0\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n    switch (name) {\n      case 'options':\n        this._props = Object.assign(_props, toJson(value))\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value, lng, ...options } = this._props\n      const lngs = this._languages(lng)\n      try {\n        // @ts-expect-error\n        this.textContent = new Intl.NumberFormat(lngs, options).format(value)\n      } catch (e) {\n        // fail safe display without options\n        this.textContent = new Intl.NumberFormat(lngs).format(value)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-number', IntlNumber)\n\nexport function intlNumber (props: object | undefined) {\n  return elementText('intl-number', props)\n}\n","\nimport {toNumber} from './utils'\n\ninterface IValueUnit {\n  value: number\n  unit: string\n  date?: Date\n}\n\nconst isDate = (value: any): boolean =>\n  value && (value instanceof Date) && !isNaN(value.getTime())\n\nconst UNITS = ['year', 'month', 'week', 'day', 'hour', 'minute', 'second']\n\nconst LOWER = [12, 4, 7, 24, 60, 60]\n\nconst INTERVAL_DAY = 86400\n\nconst INTERVALS = {\n  year: 365 * INTERVAL_DAY,\n  quarter: 4 * 30 * INTERVAL_DAY,\n  month: 30 * INTERVAL_DAY,\n  week: 7 * INTERVAL_DAY,\n  day: INTERVAL_DAY,\n  hour: 3600,\n  minute: 60\n}\n\nexport const toUnit = (unit?: string) => {\n  unit = String(unit).replace(/s$/, '')\n  return UNITS.indexOf(unit) !== -1 ? unit : 'second'\n}\n\nexport const weekDiff = (diff: any, now: Date) : number => {\n  const dayOfWeek = now.getDay()\n  const { day } = diff\n  const realdays = day < 0 ? day + dayOfWeek - 7 : day - dayOfWeek + 7\n  const realweeks = day < 0 ? Math.ceil(realdays / 7) : Math.floor(realdays / 7)\n  return realweeks\n}\n\nconst inUnit = (end: Date, start: Date, divider: number = 1) =>\n  Math.trunc((end.getTime() - start.getTime()) / 1000 / divider )\n\nconst inMonths = (end: Date, start: Date, days: number) : number => {\n  if (Math.abs(days) < 31) return 0\n  return Math.trunc(end.getMonth() + 12 * end.getFullYear() - (start.getMonth() + 12 * start.getFullYear()))\n}\n\nexport const relativeTime = (date?: Date | number, unit?: string) : IValueUnit => {\n  if (isDate(date)) {\n    date = date as Date\n    const now = new Date()\n    const day = inUnit(date as Date, now, INTERVALS.day)\n    const month = inMonths(date as Date, now, day)\n\n    const diff = {\n      year: Math.trunc(month / 12),\n      month,\n      week: inUnit(date, now, INTERVALS.week),\n      day,\n      hour: inUnit(date, now, INTERVALS.hour),\n      minute: inUnit(date, now, INTERVALS.minute),\n      second: inUnit(date, now)\n    }\n    for (let i = 0; i < UNITS.length; i++) {\n      const unit = UNITS[i]\n      let value = diff[unit]\n      if (value !== 0) {\n        if (unit === 'week') {\n          value = weekDiff(diff, now)\n        }\n        // console.log(date.toISOString(), diff, value, unit)\n        return { value, unit, date }\n      }\n    }\n    return { value: 0, unit: 'second', date: new Date() }\n  } else {\n    const ms = nextIntervalMs({ unit }, true) * (date as number) + Date.now()\n    return { value: toNumber(date), unit, date: new Date(ms) }\n  }\n}\n\nexport const nextIntervalMs = ({date = new Date(), unit}, exact?: boolean) : number => {\n  const interval = (INTERVALS[unit] || 1)\n  const delta = inUnit(date, new Date())\n  let diff = ((interval + delta) % interval) || interval\n  if (diff < 0) {\n    diff = (interval + diff) || 1\n  }\n  if (!exact) {\n    diff = Math.trunc(diff / 6) || 1\n  }\n  return diff * 1000\n}\n\nexport const lowerUnit = ({ value, unit }) : IValueUnit => {\n  if (value === 1) {\n    const i = UNITS.indexOf(unit)\n    value = LOWER[i] || value\n    unit = (i !== -1 && UNITS[i + 1]) || 'second'\n  }\n  return { value, unit }\n}\n","import { BaseElement } from './BaseElement'\nimport { toJson, trueish, toNumber, toDate, elementText, attributesToLowerCase } from './utils'\nimport { relativeTime, nextIntervalMs, lowerUnit, toUnit } from './relativeTime'\n\ninterface IOptions {\n  i18next?: any\n  value?: number\n  lng?: string\n  options?: IOptions\n  unit?: string\n  localeMatcher?: string\n  style?: string\n  numeric?: string\n  update?: boolean\n  updateUnit?: boolean\n  date?: Date\n}\n\n// @see https://www.i18next.com/translation-function/essentials#overview-options\nconst ATTR = [\n  // own attribs\n  'value', // the Date local \"YYYY-MM-DD [hh:mm:ss]\" or UTC \"YYYY-MM-DDThh:mm:ssZ\"\n  'lng',   // change language\n  'options', // json formatted string of DateTimeFormatOptions\n  //\n  'unit',\n  'localeMatcher',\n  'styleProp', // gets resolved to style\n  'numeric',\n  'update'\n]\n\nexport class IntlRelativeTime extends BaseElement {\n  protected _props: IOptions\n  private _timerId: any\n\n  static get observedAttributes() {\n    return attributesToLowerCase(ATTR)\n  }\n\n  constructor () {\n    super(ATTR)\n  }\n\n  disconnectedCallback () {\n    clearTimeout(this._timerId)\n    super.disconnectedCallback()\n  }\n\n  private _setTimer ()  {\n    const { date, value, unit } = this._props\n    const timeout = nextIntervalMs({ date, unit })\n    this._timerId = setTimeout(() => {\n      this._timerId = null\n      const change = lowerUnit(relativeTime(date, unit))\n      if (change.value !== value) {\n        this._props.value = change.value\n        this._properties('unit', change.unit)\n        this._render()\n      } else if (this._props.update) {\n        this._setTimer()\n      }\n    }, timeout)\n  }\n\n  protected _properties (name: string, value: any): void {\n    const {_props} = this\n\n    switch (name) {\n      case 'value':\n        const _valueOrDate = toDate(value) || toNumber(value) || 0\n        this._props = Object.assign(_props, relativeTime(_valueOrDate, _props.unit))\n        break\n      case 'options':\n        const options = toJson(value)\n        if (typeof options === 'object') {\n          this._props = Object.assign(_props, options)\n        }\n        break\n      case 'update':\n        const isActive = _props[name] = trueish(value)\n        if (!isActive) clearTimeout(this._timerId)\n        break\n      case 'styleProp':\n        if (typeof value === 'string') _props.style = value\n        break\n      case 'unit':\n        _props[name] = toUnit(value)\n        break\n      default:\n        _props[name] = toJson(value, value)\n    }\n  }\n\n  protected _render (): any {\n    if (this._initialized) {\n      const { value = 0, lng, unit = 'second', date, update, ...options } = this._props\n      if (update && !this._timerId) this._setTimer()\n      const lngs = this._languages(lng)\n      try {\n        // @ts-ignore - ts does not know Intl.RelativeTimeFormat yet\n        this.textContent = new Intl.RelativeTimeFormat(lngs, options).format(value, unit)\n      } catch (e) {\n        // fail safe display without options\n        // @ts-ignore\n        this.textContent = new Intl.RelativeTimeFormat(lngs).format(value, unit)\n        // can't use console.error here as mocha thinks that tests have failed\n        console.log(e) // eslint-disable-line no-console\n      }\n    }\n  }\n}\n\ncustomElements.define('intl-relative-time', IntlRelativeTime)\n\nexport function intlRelativeTime (props: IOptions | undefined) {\n  const { update, ..._props } = props\n  return elementText('intl-relative-time', _props)\n}\n","export const trueish = (val: unknown) : boolean => val === '' || !!val\n\nexport const isDate = (date?: any) : boolean => date instanceof Date && !isNaN(date.getTime())\n\nconst RE_DATE = /^\\d{4}-\\d{2}-\\d{2}/\n\nexport const toDate = (val: any) : Date | undefined => {\n  if (isDate(val)) {\n    return val\n  } else if (typeof val === 'string') {\n    const date = new Date(val)\n    if (RE_DATE.test(String(val)) && isDate(date)) return date\n  }\n}\n\nexport const toJson = (val: any, def?: any) : any => {\n  if (typeof val === 'string') {\n    try {\n      return JSON.parse(val)\n    } catch (e) {}\n  }\n  return def\n}\n\nexport const toNumber = (val: any) => {\n  const n = Number(val)\n  if (!isNaN(n)) return n\n}\n\nexport const elementText = (tag: string, props: object | undefined) => {\n  const el = document.createElement(tag)\n  Object.entries(props).forEach(([name, value]) => { el[name] = value })\n  // @ts-ignore\n  el.connectedCallback()\n  return el.textContent\n}\n\nexport const attributesToLowerCase = (attrs: string[]) => attrs.map(attr => attr.toLowerCase())\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { EventOptions} from './types'\nexport class App {\n\n  private _events: Object;\n\n  public start;\n  public h;\n  public createElement;\n  public render;\n  public Fragment;\n  public webComponent;\n  public safeHTML;\n\n  constructor() {\n    this._events = {};\n  }\n\n  on(name: string, fn: (...args) => void, options: EventOptions = {}): void {\n    this._events[name] = this._events[name] || [];\n    this._events[name].push({ fn, options });\n  }\n\n  off(name: string, fn: (...args) => void): void {\n    const subscribers = this._events[name] || [];\n\n    this._events[name] = subscribers.filter((sub) => sub.fn !== fn);\n  }\n\n  find(name: string): any {\n    return this._events[name];\n  }\n\n  run(name: string, ...args): number {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    subscribers.forEach((sub) => {\n      const { fn, options } = sub;\n      if (options.delay) {\n        this.delay(name, fn, args, options);\n      } else {\n        Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n      }\n      return !sub.options.once;\n    });\n\n    return subscribers.length;\n  }\n\n  once(name: string, fn, options: EventOptions = {}): void {\n    this.on(name, fn, { ...options, once: true });\n  }\n\n  private delay(name, fn, args, options): void {\n    if (options._t) clearTimeout(options._t);\n    options._t = setTimeout(() => {\n      clearTimeout(options._t);\n      Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    }, options.delay);\n  }\n\n  query(name: string, ...args): Promise<any[]> {\n    const subscribers = this.getSubscribers(name, this._events);\n    console.assert(subscribers && subscribers.length > 0, 'No subscriber for event: ' + name);\n    const promises = subscribers.map(sub => {\n      const { fn, options } = sub;\n      return Object.keys(options).length > 0 ? fn.apply(this, [...args, options]) : fn.apply(this, args);\n    });\n    return Promise.all(promises);\n  }\n\n  private getSubscribers(name: string, events) {\n    const subscribers = events[name] || [];\n\n    // Update the list of subscribers by pulling out those which will run once.\n    // We must do this update prior to running any of the events in case they\n    // cause additional events to be turned off or on.\n    events[name] = subscribers.filter((sub) => {\n      return !sub.options.once;\n    });\n    Object.keys(events).filter(evt => evt.endsWith('*') && name.startsWith(evt.replace('*', '')))\n      .sort((a, b) => b.length - a.length)\n      .forEach(evt => subscribers.push(...events[evt].map(sub => ({\n        ...sub,\n        options: { ...sub.options, event: name }\n      }))));\n    return subscribers;\n  }\n}\n\nconst AppRunVersions = 'AppRun-3';\nlet app: App;\nconst root = (typeof self === 'object' && self.self === self && self) ||\n  (typeof global === 'object' && global.global === global && global)\nif (root['app'] && root['_AppRunVersions']) {\n  app = root['app'];\n} else {\n  app = new App();\n  root['app'] = app;\n  root['_AppRunVersions'] = AppRunVersions;\n}\nexport default app;\n","import app from './app';\n\nconst getStateValue = (component, name) => {\n  return (name ? component['state'][name] : component['state']) || '';\n}\n\nconst setStateValue = (component, name, value) => {\n  if (name) {\n    const state = component['state'] || {};\n    state[name] = value;\n    component.setState(state);\n  } else {\n    component.setState(value);\n  }\n}\n\nconst apply_directive = (key: string, props: {}, tag, component) => {\n  if (key.startsWith('$on')) {\n    const event = props[key];\n    key = key.substring(1)\n    if (typeof event === 'boolean') {\n      props[key] = e => component.run ? component.run(key, e) : app.run(key, e);\n    } else if (typeof event === 'string') {\n      props[key] = e => component.run ? component.run(event, e) : app.run(event, e);\n    } else if (typeof event === 'function') {\n      props[key] = e => component.setState(event(component.state, e));\n    } else if (Array.isArray(event)) {\n      const [handler, ...p] = event;\n      if (typeof handler === 'string') {\n        props[key] = e => component.run ? component.run(handler, ...p, e) : app.run(handler, ...p, e);\n      } else if (typeof handler === 'function') {\n        props[key] = e => component.setState(handler(component.state, ...p, e));\n      }\n    }\n\n  } else if (key === '$bind') {\n    const type = props['type'] || 'text';\n    const name = typeof props[key] === 'string' ? props[key] : props['name'];\n    if (tag === 'input') {\n      switch (type) {\n        case 'checkbox':\n          props['checked'] = getStateValue(component, name);\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.checked);\n          break;\n        case 'radio':\n          props['checked'] = getStateValue(component, name) === props['value'];\n          props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.value);\n          break;\n        case 'number':\n        case 'range':\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, Number(e.target.value));\n          break;\n        default:\n          props['value'] = getStateValue(component, name);\n          props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n      }\n    } else if (tag === 'select') {\n      props['value'] = getStateValue(component, name);\n      props['onchange'] = e => {\n        if (!e.target.multiple) { // multiple selection use $bind on option\n          setStateValue(component, name || e.target.name, e.target.value);\n        }\n      }\n    } else if (tag === 'option') {\n      props['selected'] = getStateValue(component, name);\n      props['onclick'] = e => setStateValue(component, name || e.target.name, e.target.selected);\n    } else if (tag === 'textarea') {\n      props['innerHTML'] = getStateValue(component, name);\n      props['oninput'] = e => setStateValue(component, name || e.target.name, e.target.value);\n    }\n  } else {\n    app.run('$', { key, tag, props, component });\n  }\n}\n\nconst directive = (vdom, component) => {\n  if (Array.isArray(vdom)) {\n    return vdom.map(element => directive(element, component));\n  } else {\n    let { tag, props, children } = vdom;\n    if (tag) {\n      if (props) Object.keys(props).forEach(key => {\n        if (key.startsWith('$')) {\n          apply_directive(key, props, tag, component);\n          delete props[key];\n        }\n      });\n      if (children) children = directive(children, component);\n      return { tag, props, children };\n    } else {\n      return vdom;\n    }\n  }\n}\n\nexport default directive;","import { VDOM, VNode } from './types';\nimport directive from './directive';\nexport type Element = any; //HTMLElement | SVGSVGElement | SVGElement;\n\nexport function Fragment(props, ...children): any[] {\n  return collect(children);\n}\n\nconst ATTR_PROPS = '_props';\n\nfunction collect(children) {\n  const ch = [];\n  const push = (c) => {\n    if (c !== null && c !== undefined && c !== '' && c !== false) {\n      ch.push((typeof c === 'function' || typeof c === 'object') ? c : `${c}`);\n    }\n  }\n  children && children.forEach(c => {\n    if (Array.isArray(c)) {\n      c.forEach(i => push(i));\n    } else {\n      push(c);\n    }\n  });\n  return ch;\n}\n\nexport function createElement(tag: string | Function | [], props?: {}, ...children) {\n  const ch = collect(children);\n  if (typeof tag === 'string') return { tag, props, children: ch };\n  else if (Array.isArray(tag)) return tag; // JSX fragments - babel\n  else if (tag === undefined && children) return ch; // JSX fragments - typescript\n  else if (Object.getPrototypeOf(tag).__isAppRunComponent) return { tag, props, children: ch } // createComponent(tag, { ...props, children });\n  else if (typeof tag === 'function') return tag(props, ch);\n  else throw new Error(`Unknown tag in vdom ${tag}`);\n};\n\nconst keyCache = new WeakMap();\n\nexport const updateElement = (element: Element | string, nodes: VDOM, component = {}) => {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  const el = (typeof element === 'string' && element) ?\n    document.getElementById(element) || document.querySelector(element) : element;\n  nodes = directive(nodes, component);\n  render(el, nodes, component);\n}\n\nfunction render(element: Element, nodes: VDOM, parent = {}) {\n  // tslint:disable-next-line\n  if (nodes == null || nodes === false) return;\n  nodes = createComponent(nodes, parent);\n  if (!element) return;\n  const isSvg = element.nodeName === \"SVG\";\n  if (Array.isArray(nodes)) {\n    updateChildren(element, nodes, isSvg);\n  } else {\n    updateChildren(element, [nodes], isSvg);\n  }\n}\n\nfunction same(el: Element, node: VNode) {\n  // if (!el || !node) return false;\n  const key1 = el.nodeName;\n  const key2 = `${node.tag || ''}`;\n  return key1.toUpperCase() === key2.toUpperCase();\n}\n\nfunction update(element: Element, node: VNode, isSvg: boolean) {\n  if (node['_op'] === 3) return;\n  // console.assert(!!element);\n  isSvg = isSvg || node.tag === \"svg\";\n  if (!same(element, node)) {\n    element.parentNode.replaceChild(create(node, isSvg), element);\n    return;\n  }\n  !(node['_op'] & 2) && updateChildren(element, node.children, isSvg);\n  !(node['_op'] & 1) && updateProps(element, node.props, isSvg);\n}\n\nfunction updateChildren(element, children, isSvg: boolean) {\n  const old_len = element.childNodes?.length || 0;\n  const new_len = children?.length || 0;\n  const len = Math.min(old_len, new_len);\n  for (let i = 0; i < len; i++) {\n    const child = children[i];\n    if (child['_op'] === 3) continue;\n    const el = element.childNodes[i];\n    if (typeof child === 'string') {\n      if (el.textContent !== child) {\n        if (el.nodeType === 3) {\n          el.nodeValue = child\n        } else {\n          element.replaceChild(createText(child), el);\n        }\n      }\n    } else if (child instanceof HTMLElement || child instanceof SVGElement) {\n      element.insertBefore(child, el);\n    } else {\n      const key = child.props && child.props['key'];\n      if (key) {\n        if (el.key === key) {\n          update(element.childNodes[i], child, isSvg);\n        } else {\n          // console.log(el.key, key);\n          const old = keyCache[key];\n          if (old) {\n            const temp = old.nextSibling;\n            element.insertBefore(old, el);\n            temp ? element.insertBefore(el, temp) : element.appendChild(el);\n            update(element.childNodes[i], child, isSvg);\n          } else {\n            element.replaceChild(create(child, isSvg), el);\n          }\n        }\n      } else {\n        update(element.childNodes[i], child, isSvg);\n      }\n    }\n  }\n\n  let n = element.childNodes?.length || 0;\n  while (n > len) {\n    element.removeChild(element.lastChild);\n    n--;\n  }\n\n  if (new_len > len) {\n    const d = document.createDocumentFragment();\n    for (let i = len; i < children.length; i++) {\n      d.appendChild(create(children[i], isSvg));\n    }\n    element.appendChild(d);\n  }\n}\n\nexport const safeHTML = (html: string) => {\n  const div = document.createElement('section');\n  div.insertAdjacentHTML('afterbegin', html)\n  return Array.from(div.children);\n}\n\nfunction createText(node) {\n  if (node?.indexOf('_html:') === 0) { // ?\n    const div = document.createElement('div');\n    div.insertAdjacentHTML('afterbegin', node.substring(6))\n    return div;\n  } else {\n    return document.createTextNode(node??'');\n  }\n}\n\nfunction create(node: VNode | string | HTMLElement | SVGElement, isSvg: boolean): Element {\n  // console.assert(node !== null && node !== undefined);\n  if ((node instanceof HTMLElement) || (node instanceof SVGElement)) return node;\n  if (typeof node === \"string\") return createText(node);\n  if (!node.tag || (typeof node.tag === 'function')) return createText(JSON.stringify(node));\n  isSvg = isSvg || node.tag === \"svg\";\n  const element = isSvg\n    ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.tag)\n    : document.createElement(node.tag);\n\n  updateProps(element, node.props, isSvg);\n  if (node.children) node.children.forEach(child => element.appendChild(create(child, isSvg)));\n  return element\n}\n\nfunction mergeProps(oldProps: {}, newProps: {}): {} {\n  newProps['class'] = newProps['class'] || newProps['className'];\n  delete newProps['className'];\n  const props = {};\n  if (oldProps) Object.keys(oldProps).forEach(p => props[p] = null);\n  if (newProps) Object.keys(newProps).forEach(p => props[p] = newProps[p]);\n  return props;\n}\n\nexport function updateProps(element: Element, props: {}, isSvg) {\n  // console.assert(!!element);\n  const cached = element[ATTR_PROPS] || {};\n  props = mergeProps(cached, props || {});\n  element[ATTR_PROPS] = props;\n\n  for (const name in props) {\n    const value = props[name];\n    // if (cached[name] === value) continue;\n    // console.log('updateProps', name, value);\n    if (name.startsWith('data-')) {\n      const dname = name.substring(5);\n      const cname = dname.replace(/-(\\w)/g, (match) => match[1].toUpperCase());\n      if (element.dataset[cname] !== value) {\n        if (value || value === \"\") element.dataset[cname] = value;\n        else delete element.dataset[cname];\n      }\n    } else if (name === 'style') {\n      if (element.style.cssText) element.style.cssText = '';\n      if (typeof value === 'string') element.style.cssText = value;\n      else {\n        for (const s in value) {\n          if (element.style[s] !== value[s]) element.style[s] = value[s];\n        }\n      }\n    } else if (name.startsWith('xlink')) {\n      const xname = name.replace('xlink', '').toLowerCase();\n      if (value == null || value === false) {\n        element.removeAttributeNS('http://www.w3.org/1999/xlink', xname);\n      } else {\n        element.setAttributeNS('http://www.w3.org/1999/xlink', xname, value);\n      }\n    } else if (name.startsWith('on')) {\n      if (!value || typeof value === 'function') {\n        element[name] = value;\n      } else if (typeof value === 'string') {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (/^id$|^class$|^list$|^readonly$|^contenteditable$|^role|-|^for$/g.test(name) || isSvg) {\n      if (element.getAttribute(name) !== value) {\n        if (value) element.setAttribute(name, value);\n        else element.removeAttribute(name);\n      }\n    } else if (element[name] !== value) {\n      element[name] = value;\n    }\n    if (name === 'key' && value) keyCache[value] = element;\n  }\n  if (props && typeof props['ref'] === 'function') {\n    window.requestAnimationFrame(() => props['ref'](element));\n  }\n}\n\nfunction render_component(node, parent, idx) {\n  const { tag, props, children } = node;\n  let key = `_${idx}`;\n  let id = props && props['id'];\n  if (!id) id = `_${idx}${Date.now()}`;\n  else key = id;\n  let asTag = 'section';\n  if (props && props['as']) {\n    asTag = props['as'];\n    delete props['as'];\n  }\n  if (!parent.__componentCache) parent.__componentCache = {};\n  let component = parent.__componentCache[key];\n  if (!component || !(component instanceof tag) || !component.element) {\n    const element = document.createElement(asTag);\n    component = parent.__componentCache[key] = new tag({ ...props, children }).start(element);\n  } else {\n    component.renderState(component.state);\n  }\n  if (component.mounted) {\n    const new_state = component.mounted(props, children, component.state);\n    (typeof new_state !== 'undefined') && component.setState(new_state);\n  }\n  updateProps(component.element, props, false);\n  return component.element;\n}\n\nfunction createComponent(node, parent, idx = 0) {\n  if (typeof node === 'string') return node;\n  if (Array.isArray(node)) return node.map(child => createComponent(child, parent, idx++));\n  let vdom = node;\n  if (node && typeof node.tag === 'function' && Object.getPrototypeOf(node.tag).__isAppRunComponent) {\n    vdom = render_component(node, parent, idx);\n  }\n  if (vdom && Array.isArray(vdom.children)) {\n    const new_parent = vdom.props?._component;\n    if (new_parent) {\n      let i = 0;\n      vdom.children = vdom.children.map(child => createComponent(child, new_parent, i++));\n    } else {\n      vdom.children = vdom.children.map(child => createComponent(child, parent, idx++));\n    }\n  }\n  return vdom;\n}\n","declare var customElements;\n\nexport type CustomElementOptions = {\n  render?: boolean;\n  shadow?: boolean;\n  history?: boolean;\n  global_event?: boolean;\n  observedAttributes?: string[];\n};\n\nexport const customElement = (componentClass, options: CustomElementOptions = {}) => class CustomElement extends HTMLElement {\n  private _shadowRoot;\n  private _component;\n  private _attrMap: (arg0: string) => string;\n  public on;\n  public run;\n  constructor() {\n    super();\n  }\n  get component() { return this._component; }\n  get state() { return this._component.state; }\n\n  static get observedAttributes() {\n    // attributes need to be set to lowercase in order to get observed\n    return (options.observedAttributes || []).map(attr => attr.toLowerCase());\n  }\n\n  connectedCallback() {\n    if (this.isConnected && !this._component) {\n      const opts = options || {};\n      this._shadowRoot = opts.shadow ? this.attachShadow({ mode: 'open' }) : this;\n      const observedAttributes = (opts.observedAttributes || [])\n\n      const attrMap = observedAttributes.reduce((map, name) => {\n        const lc = name.toLowerCase()\n        if (lc !== name) {\n          map[lc] = name\n        }\n        return map\n      }, {})\n      this._attrMap = (name: string) : string => attrMap[name] || name\n\n      const props = {};\n      Array.from(this.attributes).forEach(item => props[this._attrMap(item.name)] = item.value);\n\n      // add getters/ setters to allow observation on observedAttributes\n      observedAttributes.forEach(name => {\n        if (this[name] !== undefined) props[name] = this[name];\n        Object.defineProperty(this, name, {\n          get(): any {\n            return props[name];\n          },\n          set(this: CustomElement, value: unknown) {\n            // trigger change event\n            this.attributeChangedCallback(name, props[name], value)\n          },\n          configurable: true,\n          enumerable: true\n        });\n      })\n\n      requestAnimationFrame(() => {\n        const children = this.children ? Array.from(this.children) : [];\n        children.forEach(el => el.parentElement.removeChild(el));\n        this._component = new componentClass({ ...props, children }).mount(this._shadowRoot, opts);\n        // attach props to component\n        this._component._props = props;\n        // expose dispatchEvent\n        this._component.dispatchEvent = this.dispatchEvent.bind(this)\n        if (this._component.mounted) {\n          const new_state = this._component.mounted(props, children, this._component.state);\n          if (typeof new_state !== 'undefined') this._component.state = new_state;\n        }\n        this.on = this._component.on.bind(this._component);\n        this.run = this._component.run.bind(this._component);\n        if (!(opts.render === false)) this._component.run('.');\n      });\n    }\n  }\n\n  disconnectedCallback() {\n    this._component?.unload?.();\n    this._component?.unmount?.();\n    this._component = null;\n  }\n\n  attributeChangedCallback(name: string, oldValue: unknown, value: unknown) {\n    if (this._component) {\n      // camelCase attributes arrive only in lowercase\n      const mappedName = this._attrMap(name);\n      // store the new property/ attribute\n      this._component._props[mappedName] = value;\n      this._component.run('attributeChanged', mappedName, oldValue, value);\n\n      if (value !== oldValue && !(options.render === false)) {\n        window.requestAnimationFrame(() => {\n          // re-render state with new combined props on next animation frame\n          this._component.run('.')\n        })\n      }\n    }\n  }\n}\n\nexport default (name: string, componentClass, options?: CustomElementOptions) => {\n  (typeof customElements !== 'undefined') && customElements.define(name, customElement(componentClass, options))\n}\n","import webComponent, { CustomElementOptions } from './web-component';\n\n// tslint:disable:no-invalid-this\nexport const Reflect = {\n\n  meta: new WeakMap(),\n\n  defineMetadata(metadataKey, metadataValue, target) {\n    if (!this.meta.has(target)) this.meta.set(target, {});\n    this.meta.get(target)[metadataKey] = metadataValue;\n  },\n\n  getMetadataKeys(target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? Object.keys(this.meta.get(target)) : [];\n  },\n\n  getMetadata(metadataKey, target) {\n    target = Object.getPrototypeOf(target);\n    return this.meta.get(target) ? this.meta.get(target)[metadataKey] : null;\n  }\n}\n\nexport function update<E=string>(events?: E, options: any = {}) {\n  return (target: any, key: string, descriptor: any) => {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target);\n    return descriptor;\n  }\n}\n\nexport function on<E = string>(events?: E, options: any = {}) {\n  return function (target: any, key: string) {\n    const name = events ? events.toString() : key;\n    Reflect.defineMetadata(`apprun-update:${name}`,\n      { name, key, options }, target)\n  }\n}\n\nexport function customElement(name: string, options?: CustomElementOptions) {\n  return function _customElement<T extends { new(...args: any[]): {} }>(constructor: T) {\n    webComponent(name, constructor, options);\n    return constructor;\n  }\n}\n\n","\r\nimport app, { App } from './app';\r\nimport { Reflect } from './decorator'\r\nimport { View, Update, ActionDef, ActionOptions, MountOptions, EventOptions } from './types';\r\nimport directive from './directive';\r\n\r\nconst componentCache = new Map();\r\nif (!app.find('get-components')) app.on('get-components', o => o.components = componentCache);\r\n\r\nconst REFRESH = state => state;\r\n\r\nexport class Component<T = any, E = any> {\r\n  static __isAppRunComponent = true;\r\n  private _app = new App();\r\n  private _actions = [];\r\n  private _global_events = [];\r\n  private _state;\r\n  private _history = [];\r\n  private _history_idx = -1;\r\n  private enable_history;\r\n  private global_event;\r\n  public element;\r\n  public rendered;\r\n  public mounted;\r\n  public unload;\r\n  private tracking_id;\r\n  private observer;\r\n\r\n\r\n  private renderState(state: T, vdom = null) {\r\n    if (!this.view) return;\r\n    let html = vdom || this.view(state);\r\n    app['debug'] && app.run('debug', {\r\n      component: this,\r\n      _: html ? '.' : '-',\r\n      state,\r\n      vdom: html,\r\n      el: this.element\r\n    });\r\n\r\n    if (typeof document !== 'object') return;\r\n\r\n    const el = (typeof this.element === 'string' && this.element) ?\r\n      document.getElementById(this.element) || document.querySelector(this.element) : this.element;\r\n\r\n    if (el) {\r\n      const tracking_attr = '_c';\r\n      if (!this.unload) {\r\n        el.removeAttribute && el.removeAttribute(tracking_attr);\r\n      } else if (el['_component'] !== this || el.getAttribute(tracking_attr) !== this.tracking_id) {\r\n        this.tracking_id = new Date().valueOf().toString();\r\n        el.setAttribute(tracking_attr, this.tracking_id);\r\n        if (typeof MutationObserver !== 'undefined') {\r\n          if (!this.observer) this.observer = new MutationObserver(changes => {\r\n            if (changes[0].oldValue === this.tracking_id || !document.body.contains(el)) {\r\n              this.unload(this.state);\r\n              this.observer.disconnect();\r\n              this.observer = null;\r\n            }\r\n          });\r\n          this.observer.observe(document.body, {\r\n            childList: true, subtree: true,\r\n            attributes: true, attributeOldValue: true, attributeFilter: [tracking_attr]\r\n          });\r\n        }\r\n      }\r\n      el['_component'] = this;\r\n    }\r\n    if (!vdom && html) {\r\n      html = directive(html, this);\r\n\r\n      if (this.options.transition && document && document['startViewTransition']) {\r\n        document['startViewTransition'](() => app.render(el, html, this));\r\n      } else {\r\n        app.render(el, html, this);\r\n      }\r\n    }\r\n    this.rendered && this.rendered(this.state);\r\n  }\r\n\r\n  public setState(state: T, options: ActionOptions & EventOptions\r\n    = { render: true, history: false }) {\r\n    if (state instanceof Promise) {\r\n      // Promise will not be saved or rendered\r\n      // state will be saved and rendered when promise is resolved\r\n      Promise.resolve(state).then(v => {\r\n        this.setState(v, options);\r\n        this._state = state;\r\n      });\r\n    } else {\r\n      this._state = state;\r\n      if (state == null) return;\r\n      this.state = state;\r\n      if (options.render !== false) {\r\n        // before render state\r\n        if (options.transition && document && document['startViewTransition']) {\r\n          document['startViewTransition'](() => this.renderState(state));\r\n        } else {\r\n          this.renderState(state);\r\n        }\r\n      }\r\n      if (options.history !== false && this.enable_history) {\r\n        this._history = [...this._history, state];\r\n        this._history_idx = this._history.length - 1;\r\n      }\r\n      if (typeof options.callback === 'function') options.callback(this.state);\r\n    }\r\n  }\r\n\r\n  private _history_prev = () => {\r\n    this._history_idx--;\r\n    if (this._history_idx >= 0) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = 0;\r\n    }\r\n  };\r\n\r\n  private _history_next = () => {\r\n    this._history_idx++;\r\n    if (this._history_idx < this._history.length) {\r\n      this.setState(this._history[this._history_idx], { render: true, history: false });\r\n    }\r\n    else {\r\n      this._history_idx = this._history.length - 1;\r\n    }\r\n  };\r\n\r\n  constructor(\r\n    protected state?: T,\r\n    protected view?: View<T>,\r\n    protected update?: Update<T, E>,\r\n    protected options?) {\r\n  }\r\n\r\n  start = (element = null, options?: MountOptions): Component<T, E> => {\r\n    return this.mount(element, { render: true, ...options });\r\n  }\r\n\r\n  public mount(element = null, options?: MountOptions): Component<T, E> {\r\n    console.assert(!this.element, 'Component already mounted.')\r\n    this.options = options = { ...this.options, ...options };\r\n    this.element = element;\r\n    this.global_event = options.global_event;\r\n    this.enable_history = !!options.history;\r\n\r\n    if (this.enable_history) {\r\n      this.on(options.history.prev || 'history-prev', this._history_prev);\r\n      this.on(options.history.next || 'history-next', this._history_next);\r\n    }\r\n\r\n    if (options.route) {\r\n      this.update = this.update || {};\r\n      if (!this.update[options.route]) this.update[options.route] = REFRESH;\r\n    }\r\n\r\n    this.add_actions();\r\n    this.state = this.state ?? this['model'] ?? {};\r\n    if (typeof this.state === 'function') this.state = this.state();\r\n\r\n    this.setState(this.state, { render: !!options.render, history: true });\r\n\r\n    if (app['debug']) {\r\n      if (componentCache.get(element)) { componentCache.get(element).push(this) }\r\n      else { componentCache.set(element, [this]) }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  is_global_event(name: string): boolean {\r\n    return name && (\r\n      this.global_event ||\r\n      this._global_events.indexOf(name) >= 0 ||\r\n      name.startsWith('#') || name.startsWith('/') || name.startsWith('@'));\r\n  }\r\n\r\n  add_action(name: string, action, options: ActionOptions = {}) {\r\n    if (!action || typeof action !== 'function') return;\r\n    if (options.global) this._global_events.push(name);\r\n    this.on(name as any, (...p) => {\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '>',\r\n        event: name, p,\r\n        current_state: this.state,\r\n        options\r\n      });\r\n\r\n      const newState = action(this.state, ...p);\r\n\r\n      app['debug'] && app.run('debug', {\r\n        component: this,\r\n        _: '<',\r\n        event: name, p,\r\n        newState,\r\n        state: this.state,\r\n        options\r\n      });\r\n\r\n      this.setState(newState, options)\r\n    }, options);\r\n  }\r\n\r\n  add_actions() {\r\n    const actions = this.update || {};\r\n    Reflect.getMetadataKeys(this).forEach(key => {\r\n      if (key.startsWith('apprun-update:')) {\r\n        const meta = Reflect.getMetadata(key, this)\r\n        actions[meta.name] = [this[meta.key].bind(this), meta.options];\r\n      }\r\n    })\r\n\r\n    const all = {};\r\n    if (Array.isArray(actions)) {\r\n      actions.forEach(act => {\r\n        const [name, action, opts] = act as ActionDef<T, E>;\r\n        const names = name.toString();\r\n        names.split(',').forEach(n => all[n.trim()] = [action, opts])\r\n      })\r\n    } else {\r\n      Object.keys(actions).forEach(name => {\r\n        const action = actions[name];\r\n        if (typeof action === 'function' || Array.isArray(action)) {\r\n          name.split(',').forEach(n => all[n.trim()] = action)\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!all['.']) all['.'] = REFRESH;\r\n    Object.keys(all).forEach(name => {\r\n      const action = all[name];\r\n      if (typeof action === 'function') {\r\n        this.add_action(name, action);\r\n      } else if (Array.isArray(action)) {\r\n        this.add_action(name, action[0], action[1]);\r\n      }\r\n    });\r\n  }\r\n\r\n  public run(event: E, ...args) {\r\n    if (this.state instanceof Promise) {\r\n      return Promise.resolve(this.state).then(state => {\r\n        this.state = state;\r\n        this.run(event, ...args)\r\n      });\r\n    } else {\r\n      const name = event.toString();\r\n      return this.is_global_event(name) ?\r\n        app.run(name, ...args) :\r\n        this._app.run(name, ...args);\r\n    }\r\n  }\r\n\r\n  public on(event: E, fn: (...args) => void, options?: any) {\r\n    const name = event.toString();\r\n    this._actions.push({ name, fn });\r\n    return this.is_global_event(name) ?\r\n      app.on(name, fn, options) :\r\n      this._app.on(name, fn, options);\r\n  }\r\n\r\n  public query(event: E, ...args) {\r\n    const name = event.toString();\r\n    return this.is_global_event(name) ?\r\n      app.query(name, ...args) :\r\n      this._app.query(name, ...args);\r\n  }\r\n\r\n  public unmount() {\r\n    this.observer?.disconnect();\r\n    this._actions.forEach(action => {\r\n      const { name, fn } = action;\r\n      this.is_global_event(name) ?\r\n        app.off(name, fn) :\r\n        this._app.off(name, fn);\r\n    });\r\n  }\r\n}\r\n","import app from './app';\n\nexport type Route = (url: string, ...args: any[]) => any;\n\nexport const ROUTER_EVENT: string = '//';\nexport const ROUTER_404_EVENT: string = '///';\n\nexport const route: Route = (url: string) => {\n  if (!url) url = '#';\n  if (url.startsWith('#')) {\n    const [name, ...rest] = url.split('/');\n    app.run(name, ...rest) || app.run(ROUTER_404_EVENT, name, ...rest);\n    app.run(ROUTER_EVENT, name, ...rest);\n  } else if (url.startsWith('/')) {\n    const [_, name, ...rest] = url.split('/');\n    app.run('/' + name, ...rest) || app.run(ROUTER_404_EVENT, '/' + name, ...rest);\n    app.run(ROUTER_EVENT, '/' + name, ...rest);\n  } else {\n    app.run(url) || app.run(ROUTER_404_EVENT, url);\n    app.run(ROUTER_EVENT, url);\n  }\n}\nexport default route;","import app, { App } from './app';\nimport { createElement, render, Fragment, safeHTML } from './vdom';\nimport { Component } from './component';\nimport { VNode, View, Action, Update, EventOptions, ActionOptions, MountOptions, AppStartOptions } from './types';\nimport { on, update, customElement } from './decorator';\nimport webComponent, { CustomElementOptions } from './web-component';\nimport { Route, route, ROUTER_EVENT, ROUTER_404_EVENT } from './router';\n\nexport interface IApp {\n  start<T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n    options?: AppStartOptions<T>): Component<T, E>;\n  on(name: string, fn: (...args: any[]) => void, options?: any): void;\n  off(name: string, fn: (...args: any[]) => void): void;\n  run(name: string, ...args: any[]): number;\n  find(name: string): any | any[];\n  h(tag: string | Function, props, ...children): VNode | VNode[];\n  createElement(tag: string | Function, props, ...children): VNode | VNode[];\n  render(element: Element | string, node: VNode): void;\n  Fragment(props, ...children): any[];\n  route?: Route;\n  webComponent(name: string, componentClass, options?: CustomElementOptions): void;\n  safeHTML(html: string): any[];\n}\n\napp.h = app.createElement = createElement;\napp.render = render;\napp.Fragment = Fragment;\napp.webComponent = webComponent;\napp.safeHTML = safeHTML;\n\napp.start = <T, E = any>(element?: Element | string, model?: T, view?: View<T>, update?: Update<T, E>,\n  options?: AppStartOptions<T>): Component<T, E> => {\n  const opts = { render: true, global_event: true, ...options };\n  const component = new Component<T, E>(model, view, update);\n  if (options && options.rendered) component.rendered = options.rendered;\n  component.mount(element, opts);\n  return component;\n};\n\nconst NOOP = _ => {/* Intentionally empty */ }\napp.on('$', NOOP);\napp.on('debug', _ => NOOP);\napp.on(ROUTER_EVENT, NOOP);\napp.on('#', NOOP);\napp['route'] = route;\napp.on('route', url => app['route'] && app['route'](url));\n\nif (typeof document === 'object') {\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    if (app['route'] === route) {\n      window.onpopstate = () => route(location.hash);\n      document.body.hasAttribute('apprun-no-init') || app['no-init-route'] || route(location.hash);\n    }\n  });\n}\nexport type StatelessComponent<T = {}> = (args: T) => string | VNode | void;\nexport { App, app, Component, View, Action, Update, on, update, EventOptions, ActionOptions, MountOptions, Fragment, safeHTML }\nexport { update as event };\nexport { ROUTER_EVENT, ROUTER_404_EVENT };\nexport { customElement, CustomElementOptions, AppStartOptions };\nexport default app as IApp;\n\nif (typeof window === 'object') {\n  window['Component'] = Component;\n  window['_React'] = window['React'];\n  window['React'] = app;\n  window['on'] = on;\n  window['customElement'] = customElement;\n  window['safeHTML'] = safeHTML;\n}\n\n\n","const consoleLogger = {\n  type: 'logger',\n  log(args) {\n    this.output('log', args);\n  },\n  warn(args) {\n    this.output('warn', args);\n  },\n  error(args) {\n    this.output('error', args);\n  },\n  output(type, args) {\n    if (console && console[type]) console[type].apply(console, args);\n  }\n};\nclass Logger {\n  constructor(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.init(concreteLogger, options);\n  }\n  init(concreteLogger) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.prefix = options.prefix || 'i18next:';\n    this.logger = concreteLogger || consoleLogger;\n    this.options = options;\n    this.debug = options.debug;\n  }\n  log() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return this.forward(args, 'log', '', true);\n  }\n  warn() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return this.forward(args, 'warn', '', true);\n  }\n  error() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    return this.forward(args, 'error', '');\n  }\n  deprecate() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);\n  }\n  forward(args, lvl, prefix, debugOnly) {\n    if (debugOnly && !this.debug) return null;\n    if (typeof args[0] === 'string') args[0] = `${prefix}${this.prefix} ${args[0]}`;\n    return this.logger[lvl](args);\n  }\n  create(moduleName) {\n    return new Logger(this.logger, {\n      ...{\n        prefix: `${this.prefix}:${moduleName}:`\n      },\n      ...this.options\n    });\n  }\n  clone(options) {\n    options = options || this.options;\n    options.prefix = options.prefix || this.prefix;\n    return new Logger(this.logger, options);\n  }\n}\nvar baseLogger = new Logger();\n\nclass EventEmitter {\n  constructor() {\n    this.observers = {};\n  }\n  on(events, listener) {\n    events.split(' ').forEach(event => {\n      this.observers[event] = this.observers[event] || [];\n      this.observers[event].push(listener);\n    });\n    return this;\n  }\n  off(event, listener) {\n    if (!this.observers[event]) return;\n    if (!listener) {\n      delete this.observers[event];\n      return;\n    }\n    this.observers[event] = this.observers[event].filter(l => l !== listener);\n  }\n  emit(event) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (this.observers[event]) {\n      const cloned = [].concat(this.observers[event]);\n      cloned.forEach(observer => {\n        observer(...args);\n      });\n    }\n    if (this.observers['*']) {\n      const cloned = [].concat(this.observers['*']);\n      cloned.forEach(observer => {\n        observer.apply(observer, [event, ...args]);\n      });\n    }\n  }\n}\n\nfunction defer() {\n  let res;\n  let rej;\n  const promise = new Promise((resolve, reject) => {\n    res = resolve;\n    rej = reject;\n  });\n  promise.resolve = res;\n  promise.reject = rej;\n  return promise;\n}\nfunction makeString(object) {\n  if (object == null) return '';\n  return '' + object;\n}\nfunction copy(a, s, t) {\n  a.forEach(m => {\n    if (s[m]) t[m] = s[m];\n  });\n}\nfunction getLastOfPath(object, path, Empty) {\n  function cleanKey(key) {\n    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;\n  }\n  function canNotTraverseDeeper() {\n    return !object || typeof object === 'string';\n  }\n  const stack = typeof path !== 'string' ? [].concat(path) : path.split('.');\n  while (stack.length > 1) {\n    if (canNotTraverseDeeper()) return {};\n    const key = cleanKey(stack.shift());\n    if (!object[key] && Empty) object[key] = new Empty();\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      object = object[key];\n    } else {\n      object = {};\n    }\n  }\n  if (canNotTraverseDeeper()) return {};\n  return {\n    obj: object,\n    k: cleanKey(stack.shift())\n  };\n}\nfunction setPath(object, path, newValue) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = newValue;\n}\nfunction pushPath(object, path, newValue, concat) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path, Object);\n  obj[k] = obj[k] || [];\n  if (concat) obj[k] = obj[k].concat(newValue);\n  if (!concat) obj[k].push(newValue);\n}\nfunction getPath(object, path) {\n  const {\n    obj,\n    k\n  } = getLastOfPath(object, path);\n  if (!obj) return undefined;\n  return obj[k];\n}\nfunction getPathWithDefaults(data, defaultData, key) {\n  const value = getPath(data, key);\n  if (value !== undefined) {\n    return value;\n  }\n  return getPath(defaultData, key);\n}\nfunction deepExtend(target, source, overwrite) {\n  for (const prop in source) {\n    if (prop !== '__proto__' && prop !== 'constructor') {\n      if (prop in target) {\n        if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {\n          if (overwrite) target[prop] = source[prop];\n        } else {\n          deepExtend(target[prop], source[prop], overwrite);\n        }\n      } else {\n        target[prop] = source[prop];\n      }\n    }\n  }\n  return target;\n}\nfunction regexEscape(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\nvar _entityMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n  '/': '&#x2F;'\n};\nfunction escape(data) {\n  if (typeof data === 'string') {\n    return data.replace(/[&<>\"'\\/]/g, s => _entityMap[s]);\n  }\n  return data;\n}\nconst chars = [' ', ',', '?', '!', ';'];\nfunction looksLikeObjectPath(key, nsSeparator, keySeparator) {\n  nsSeparator = nsSeparator || '';\n  keySeparator = keySeparator || '';\n  const possibleChars = chars.filter(c => nsSeparator.indexOf(c) < 0 && keySeparator.indexOf(c) < 0);\n  if (possibleChars.length === 0) return true;\n  const r = new RegExp(`(${possibleChars.map(c => c === '?' ? '\\\\?' : c).join('|')})`);\n  let matched = !r.test(key);\n  if (!matched) {\n    const ki = key.indexOf(keySeparator);\n    if (ki > 0 && !r.test(key.substring(0, ki))) {\n      matched = true;\n    }\n  }\n  return matched;\n}\nfunction deepFind(obj, path) {\n  let keySeparator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '.';\n  if (!obj) return undefined;\n  if (obj[path]) return obj[path];\n  const paths = path.split(keySeparator);\n  let current = obj;\n  for (let i = 0; i < paths.length; ++i) {\n    if (!current) return undefined;\n    if (typeof current[paths[i]] === 'string' && i + 1 < paths.length) {\n      return undefined;\n    }\n    if (current[paths[i]] === undefined) {\n      let j = 2;\n      let p = paths.slice(i, i + j).join(keySeparator);\n      let mix = current[p];\n      while (mix === undefined && paths.length > i + j) {\n        j++;\n        p = paths.slice(i, i + j).join(keySeparator);\n        mix = current[p];\n      }\n      if (mix === undefined) return undefined;\n      if (mix === null) return null;\n      if (path.endsWith(p)) {\n        if (typeof mix === 'string') return mix;\n        if (p && typeof mix[p] === 'string') return mix[p];\n      }\n      const joinedPath = paths.slice(i + j).join(keySeparator);\n      if (joinedPath) return deepFind(mix, joinedPath, keySeparator);\n      return undefined;\n    }\n    current = current[paths[i]];\n  }\n  return current;\n}\nfunction getCleanedCode(code) {\n  if (code && code.indexOf('_') > 0) return code.replace('_', '-');\n  return code;\n}\n\nclass ResourceStore extends EventEmitter {\n  constructor(data) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      ns: ['translation'],\n      defaultNS: 'translation'\n    };\n    super();\n    this.data = data || {};\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    if (this.options.ignoreJSONStructure === undefined) {\n      this.options.ignoreJSONStructure = true;\n    }\n  }\n  addNamespaces(ns) {\n    if (this.options.ns.indexOf(ns) < 0) {\n      this.options.ns.push(ns);\n    }\n  }\n  removeNamespaces(ns) {\n    const index = this.options.ns.indexOf(ns);\n    if (index > -1) {\n      this.options.ns.splice(index, 1);\n    }\n  }\n  getResource(lng, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const ignoreJSONStructure = options.ignoreJSONStructure !== undefined ? options.ignoreJSONStructure : this.options.ignoreJSONStructure;\n    let path = [lng, ns];\n    if (key && typeof key !== 'string') path = path.concat(key);\n    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n    }\n    const result = getPath(this.data, path);\n    if (result || !ignoreJSONStructure || typeof key !== 'string') return result;\n    return deepFind(this.data && this.data[lng] && this.data[lng][ns], key, keySeparator);\n  }\n  addResource(lng, ns, key, value) {\n    let options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {\n      silent: false\n    };\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let path = [lng, ns];\n    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      value = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    setPath(this.data, path, value);\n    if (!options.silent) this.emit('added', lng, ns, key, value);\n  }\n  addResources(lng, ns, resources) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {\n      silent: false\n    };\n    for (const m in resources) {\n      if (typeof resources[m] === 'string' || Object.prototype.toString.apply(resources[m]) === '[object Array]') this.addResource(lng, ns, m, resources[m], {\n        silent: true\n      });\n    }\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  addResourceBundle(lng, ns, resources, deep, overwrite) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {\n      silent: false\n    };\n    let path = [lng, ns];\n    if (lng.indexOf('.') > -1) {\n      path = lng.split('.');\n      deep = resources;\n      resources = ns;\n      ns = path[1];\n    }\n    this.addNamespaces(ns);\n    let pack = getPath(this.data, path) || {};\n    if (deep) {\n      deepExtend(pack, resources, overwrite);\n    } else {\n      pack = {\n        ...pack,\n        ...resources\n      };\n    }\n    setPath(this.data, path, pack);\n    if (!options.silent) this.emit('added', lng, ns, resources);\n  }\n  removeResourceBundle(lng, ns) {\n    if (this.hasResourceBundle(lng, ns)) {\n      delete this.data[lng][ns];\n    }\n    this.removeNamespaces(ns);\n    this.emit('removed', lng, ns);\n  }\n  hasResourceBundle(lng, ns) {\n    return this.getResource(lng, ns) !== undefined;\n  }\n  getResourceBundle(lng, ns) {\n    if (!ns) ns = this.options.defaultNS;\n    if (this.options.compatibilityAPI === 'v1') return {\n      ...{},\n      ...this.getResource(lng, ns)\n    };\n    return this.getResource(lng, ns);\n  }\n  getDataByLanguage(lng) {\n    return this.data[lng];\n  }\n  hasLanguageSomeTranslations(lng) {\n    const data = this.getDataByLanguage(lng);\n    const n = data && Object.keys(data) || [];\n    return !!n.find(v => data[v] && Object.keys(data[v]).length > 0);\n  }\n  toJSON() {\n    return this.data;\n  }\n}\n\nvar postProcessor = {\n  processors: {},\n  addPostProcessor(module) {\n    this.processors[module.name] = module;\n  },\n  handle(processors, value, key, options, translator) {\n    processors.forEach(processor => {\n      if (this.processors[processor]) value = this.processors[processor].process(value, key, options, translator);\n    });\n    return value;\n  }\n};\n\nconst checkedLoadedFor = {};\nclass Translator extends EventEmitter {\n  constructor(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    super();\n    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector', 'i18nFormat', 'utils'], services, this);\n    this.options = options;\n    if (this.options.keySeparator === undefined) {\n      this.options.keySeparator = '.';\n    }\n    this.logger = baseLogger.create('translator');\n  }\n  changeLanguage(lng) {\n    if (lng) this.language = lng;\n  }\n  exists(key) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    if (key === undefined || key === null) {\n      return false;\n    }\n    const resolved = this.resolve(key, options);\n    return resolved && resolved.res !== undefined;\n  }\n  extractFromKey(key, options) {\n    let nsSeparator = options.nsSeparator !== undefined ? options.nsSeparator : this.options.nsSeparator;\n    if (nsSeparator === undefined) nsSeparator = ':';\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    let namespaces = options.ns || this.options.defaultNS || [];\n    const wouldCheckForNsInKey = nsSeparator && key.indexOf(nsSeparator) > -1;\n    const seemsNaturalLanguage = !this.options.userDefinedKeySeparator && !options.keySeparator && !this.options.userDefinedNsSeparator && !options.nsSeparator && !looksLikeObjectPath(key, nsSeparator, keySeparator);\n    if (wouldCheckForNsInKey && !seemsNaturalLanguage) {\n      const m = key.match(this.interpolator.nestingRegexp);\n      if (m && m.length > 0) {\n        return {\n          key,\n          namespaces\n        };\n      }\n      const parts = key.split(nsSeparator);\n      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();\n      key = parts.join(keySeparator);\n    }\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n    return {\n      key,\n      namespaces\n    };\n  }\n  translate(keys, options, lastKey) {\n    if (typeof options !== 'object' && this.options.overloadTranslationOptionHandler) {\n      options = this.options.overloadTranslationOptionHandler(arguments);\n    }\n    if (typeof options === 'object') options = {\n      ...options\n    };\n    if (!options) options = {};\n    if (keys === undefined || keys === null) return '';\n    if (!Array.isArray(keys)) keys = [String(keys)];\n    const returnDetails = options.returnDetails !== undefined ? options.returnDetails : this.options.returnDetails;\n    const keySeparator = options.keySeparator !== undefined ? options.keySeparator : this.options.keySeparator;\n    const {\n      key,\n      namespaces\n    } = this.extractFromKey(keys[keys.length - 1], options);\n    const namespace = namespaces[namespaces.length - 1];\n    const lng = options.lng || this.language;\n    const appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;\n    if (lng && lng.toLowerCase() === 'cimode') {\n      if (appendNamespaceToCIMode) {\n        const nsSeparator = options.nsSeparator || this.options.nsSeparator;\n        if (returnDetails) {\n          return {\n            res: `${namespace}${nsSeparator}${key}`,\n            usedKey: key,\n            exactUsedKey: key,\n            usedLng: lng,\n            usedNS: namespace,\n            usedParams: this.getUsedParamsDetails(options)\n          };\n        }\n        return `${namespace}${nsSeparator}${key}`;\n      }\n      if (returnDetails) {\n        return {\n          res: key,\n          usedKey: key,\n          exactUsedKey: key,\n          usedLng: lng,\n          usedNS: namespace,\n          usedParams: this.getUsedParamsDetails(options)\n        };\n      }\n      return key;\n    }\n    const resolved = this.resolve(keys, options);\n    let res = resolved && resolved.res;\n    const resUsedKey = resolved && resolved.usedKey || key;\n    const resExactUsedKey = resolved && resolved.exactUsedKey || key;\n    const resType = Object.prototype.toString.apply(res);\n    const noObject = ['[object Number]', '[object Function]', '[object RegExp]'];\n    const joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;\n    const handleAsObjectInI18nFormat = !this.i18nFormat || this.i18nFormat.handleAsObject;\n    const handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';\n    if (handleAsObjectInI18nFormat && res && handleAsObject && noObject.indexOf(resType) < 0 && !(typeof joinArrays === 'string' && resType === '[object Array]')) {\n      if (!options.returnObjects && !this.options.returnObjects) {\n        if (!this.options.returnedObjectHandler) {\n          this.logger.warn('accessing an object - but returnObjects options is not enabled!');\n        }\n        const r = this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, {\n          ...options,\n          ns: namespaces\n        }) : `key '${key} (${this.language})' returned an object instead of string.`;\n        if (returnDetails) {\n          resolved.res = r;\n          resolved.usedParams = this.getUsedParamsDetails(options);\n          return resolved;\n        }\n        return r;\n      }\n      if (keySeparator) {\n        const resTypeIsArray = resType === '[object Array]';\n        const copy = resTypeIsArray ? [] : {};\n        const newKeyToUse = resTypeIsArray ? resExactUsedKey : resUsedKey;\n        for (const m in res) {\n          if (Object.prototype.hasOwnProperty.call(res, m)) {\n            const deepKey = `${newKeyToUse}${keySeparator}${m}`;\n            copy[m] = this.translate(deepKey, {\n              ...options,\n              ...{\n                joinArrays: false,\n                ns: namespaces\n              }\n            });\n            if (copy[m] === deepKey) copy[m] = res[m];\n          }\n        }\n        res = copy;\n      }\n    } else if (handleAsObjectInI18nFormat && typeof joinArrays === 'string' && resType === '[object Array]') {\n      res = res.join(joinArrays);\n      if (res) res = this.extendTranslation(res, keys, options, lastKey);\n    } else {\n      let usedDefault = false;\n      let usedKey = false;\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const hasDefaultValue = Translator.hasDefaultValue(options);\n      const defaultValueSuffix = needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, options) : '';\n      const defaultValueSuffixOrdinalFallback = options.ordinal && needsPluralHandling ? this.pluralResolver.getSuffix(lng, options.count, {\n        ordinal: false\n      }) : '';\n      const defaultValue = options[`defaultValue${defaultValueSuffix}`] || options[`defaultValue${defaultValueSuffixOrdinalFallback}`] || options.defaultValue;\n      if (!this.isValidLookup(res) && hasDefaultValue) {\n        usedDefault = true;\n        res = defaultValue;\n      }\n      if (!this.isValidLookup(res)) {\n        usedKey = true;\n        res = key;\n      }\n      const missingKeyNoValueFallbackToKey = options.missingKeyNoValueFallbackToKey || this.options.missingKeyNoValueFallbackToKey;\n      const resForMissing = missingKeyNoValueFallbackToKey && usedKey ? undefined : res;\n      const updateMissing = hasDefaultValue && defaultValue !== res && this.options.updateMissing;\n      if (usedKey || usedDefault || updateMissing) {\n        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? defaultValue : res);\n        if (keySeparator) {\n          const fk = this.resolve(key, {\n            ...options,\n            keySeparator: false\n          });\n          if (fk && fk.res) this.logger.warn('Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.');\n        }\n        let lngs = [];\n        const fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);\n        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {\n          for (let i = 0; i < fallbackLngs.length; i++) {\n            lngs.push(fallbackLngs[i]);\n          }\n        } else if (this.options.saveMissingTo === 'all') {\n          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);\n        } else {\n          lngs.push(options.lng || this.language);\n        }\n        const send = (l, k, specificDefaultValue) => {\n          const defaultForMissing = hasDefaultValue && specificDefaultValue !== res ? specificDefaultValue : resForMissing;\n          if (this.options.missingKeyHandler) {\n            this.options.missingKeyHandler(l, namespace, k, defaultForMissing, updateMissing, options);\n          } else if (this.backendConnector && this.backendConnector.saveMissing) {\n            this.backendConnector.saveMissing(l, namespace, k, defaultForMissing, updateMissing, options);\n          }\n          this.emit('missingKey', l, namespace, k, res);\n        };\n        if (this.options.saveMissing) {\n          if (this.options.saveMissingPlurals && needsPluralHandling) {\n            lngs.forEach(language => {\n              this.pluralResolver.getSuffixes(language, options).forEach(suffix => {\n                send([language], key + suffix, options[`defaultValue${suffix}`] || defaultValue);\n              });\n            });\n          } else {\n            send(lngs, key, defaultValue);\n          }\n        }\n      }\n      res = this.extendTranslation(res, keys, options, resolved, lastKey);\n      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = `${namespace}:${key}`;\n      if ((usedKey || usedDefault) && this.options.parseMissingKeyHandler) {\n        if (this.options.compatibilityAPI !== 'v1') {\n          res = this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey ? `${namespace}:${key}` : key, usedDefault ? res : undefined);\n        } else {\n          res = this.options.parseMissingKeyHandler(res);\n        }\n      }\n    }\n    if (returnDetails) {\n      resolved.res = res;\n      resolved.usedParams = this.getUsedParamsDetails(options);\n      return resolved;\n    }\n    return res;\n  }\n  extendTranslation(res, key, options, resolved, lastKey) {\n    var _this = this;\n    if (this.i18nFormat && this.i18nFormat.parse) {\n      res = this.i18nFormat.parse(res, {\n        ...this.options.interpolation.defaultVariables,\n        ...options\n      }, options.lng || this.language || resolved.usedLng, resolved.usedNS, resolved.usedKey, {\n        resolved\n      });\n    } else if (!options.skipInterpolation) {\n      if (options.interpolation) this.interpolator.init({\n        ...options,\n        ...{\n          interpolation: {\n            ...this.options.interpolation,\n            ...options.interpolation\n          }\n        }\n      });\n      const skipOnVariables = typeof res === 'string' && (options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables);\n      let nestBef;\n      if (skipOnVariables) {\n        const nb = res.match(this.interpolator.nestingRegexp);\n        nestBef = nb && nb.length;\n      }\n      let data = options.replace && typeof options.replace !== 'string' ? options.replace : options;\n      if (this.options.interpolation.defaultVariables) data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n      res = this.interpolator.interpolate(res, data, options.lng || this.language, options);\n      if (skipOnVariables) {\n        const na = res.match(this.interpolator.nestingRegexp);\n        const nestAft = na && na.length;\n        if (nestBef < nestAft) options.nest = false;\n      }\n      if (!options.lng && this.options.compatibilityAPI !== 'v1' && resolved && resolved.res) options.lng = resolved.usedLng;\n      if (options.nest !== false) res = this.interpolator.nest(res, function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        if (lastKey && lastKey[0] === args[0] && !options.context) {\n          _this.logger.warn(`It seems you are nesting recursively key: ${args[0]} in key: ${key[0]}`);\n          return null;\n        }\n        return _this.translate(...args, key);\n      }, options);\n      if (options.interpolation) this.interpolator.reset();\n    }\n    const postProcess = options.postProcess || this.options.postProcess;\n    const postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;\n    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {\n      res = postProcessor.handle(postProcessorNames, res, key, this.options && this.options.postProcessPassResolved ? {\n        i18nResolved: {\n          ...resolved,\n          usedParams: this.getUsedParamsDetails(options)\n        },\n        ...options\n      } : options, this);\n    }\n    return res;\n  }\n  resolve(keys) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let found;\n    let usedKey;\n    let exactUsedKey;\n    let usedLng;\n    let usedNS;\n    if (typeof keys === 'string') keys = [keys];\n    keys.forEach(k => {\n      if (this.isValidLookup(found)) return;\n      const extracted = this.extractFromKey(k, options);\n      const key = extracted.key;\n      usedKey = key;\n      let namespaces = extracted.namespaces;\n      if (this.options.fallbackNS) namespaces = namespaces.concat(this.options.fallbackNS);\n      const needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';\n      const needsZeroSuffixLookup = needsPluralHandling && !options.ordinal && options.count === 0 && this.pluralResolver.shouldUseIntlApi();\n      const needsContextHandling = options.context !== undefined && (typeof options.context === 'string' || typeof options.context === 'number') && options.context !== '';\n      const codes = options.lngs ? options.lngs : this.languageUtils.toResolveHierarchy(options.lng || this.language, options.fallbackLng);\n      namespaces.forEach(ns => {\n        if (this.isValidLookup(found)) return;\n        usedNS = ns;\n        if (!checkedLoadedFor[`${codes[0]}-${ns}`] && this.utils && this.utils.hasLoadedNamespace && !this.utils.hasLoadedNamespace(usedNS)) {\n          checkedLoadedFor[`${codes[0]}-${ns}`] = true;\n          this.logger.warn(`key \"${usedKey}\" for languages \"${codes.join(', ')}\" won't get resolved as namespace \"${usedNS}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n        }\n        codes.forEach(code => {\n          if (this.isValidLookup(found)) return;\n          usedLng = code;\n          const finalKeys = [key];\n          if (this.i18nFormat && this.i18nFormat.addLookupKeys) {\n            this.i18nFormat.addLookupKeys(finalKeys, key, code, ns, options);\n          } else {\n            let pluralSuffix;\n            if (needsPluralHandling) pluralSuffix = this.pluralResolver.getSuffix(code, options.count, options);\n            const zeroSuffix = `${this.options.pluralSeparator}zero`;\n            const ordinalPrefix = `${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;\n            if (needsPluralHandling) {\n              finalKeys.push(key + pluralSuffix);\n              if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                finalKeys.push(key + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n              }\n              if (needsZeroSuffixLookup) {\n                finalKeys.push(key + zeroSuffix);\n              }\n            }\n            if (needsContextHandling) {\n              const contextKey = `${key}${this.options.contextSeparator}${options.context}`;\n              finalKeys.push(contextKey);\n              if (needsPluralHandling) {\n                finalKeys.push(contextKey + pluralSuffix);\n                if (options.ordinal && pluralSuffix.indexOf(ordinalPrefix) === 0) {\n                  finalKeys.push(contextKey + pluralSuffix.replace(ordinalPrefix, this.options.pluralSeparator));\n                }\n                if (needsZeroSuffixLookup) {\n                  finalKeys.push(contextKey + zeroSuffix);\n                }\n              }\n            }\n          }\n          let possibleKey;\n          while (possibleKey = finalKeys.pop()) {\n            if (!this.isValidLookup(found)) {\n              exactUsedKey = possibleKey;\n              found = this.getResource(code, ns, possibleKey, options);\n            }\n          }\n        });\n      });\n    });\n    return {\n      res: found,\n      usedKey,\n      exactUsedKey,\n      usedLng,\n      usedNS\n    };\n  }\n  isValidLookup(res) {\n    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');\n  }\n  getResource(code, ns, key) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    if (this.i18nFormat && this.i18nFormat.getResource) return this.i18nFormat.getResource(code, ns, key, options);\n    return this.resourceStore.getResource(code, ns, key, options);\n  }\n  getUsedParamsDetails() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const optionsKeys = ['defaultValue', 'ordinal', 'context', 'replace', 'lng', 'lngs', 'fallbackLng', 'ns', 'keySeparator', 'nsSeparator', 'returnObjects', 'returnDetails', 'joinArrays', 'postProcess', 'interpolation'];\n    const useOptionsReplaceForData = options.replace && typeof options.replace !== 'string';\n    let data = useOptionsReplaceForData ? options.replace : options;\n    if (useOptionsReplaceForData && typeof options.count !== 'undefined') {\n      data.count = options.count;\n    }\n    if (this.options.interpolation.defaultVariables) {\n      data = {\n        ...this.options.interpolation.defaultVariables,\n        ...data\n      };\n    }\n    if (!useOptionsReplaceForData) {\n      data = {\n        ...data\n      };\n      for (const key of optionsKeys) {\n        delete data[key];\n      }\n    }\n    return data;\n  }\n  static hasDefaultValue(options) {\n    const prefix = 'defaultValue';\n    for (const option in options) {\n      if (Object.prototype.hasOwnProperty.call(options, option) && prefix === option.substring(0, prefix.length) && undefined !== options[option]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\nfunction capitalize(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\nclass LanguageUtil {\n  constructor(options) {\n    this.options = options;\n    this.supportedLngs = this.options.supportedLngs || false;\n    this.logger = baseLogger.create('languageUtils');\n  }\n  getScriptPartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return null;\n    const p = code.split('-');\n    if (p.length === 2) return null;\n    p.pop();\n    if (p[p.length - 1].toLowerCase() === 'x') return null;\n    return this.formatLanguageCode(p.join('-'));\n  }\n  getLanguagePartFromCode(code) {\n    code = getCleanedCode(code);\n    if (!code || code.indexOf('-') < 0) return code;\n    const p = code.split('-');\n    return this.formatLanguageCode(p[0]);\n  }\n  formatLanguageCode(code) {\n    if (typeof code === 'string' && code.indexOf('-') > -1) {\n      const specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];\n      let p = code.split('-');\n      if (this.options.lowerCaseLng) {\n        p = p.map(part => part.toLowerCase());\n      } else if (p.length === 2) {\n        p[0] = p[0].toLowerCase();\n        p[1] = p[1].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n      } else if (p.length === 3) {\n        p[0] = p[0].toLowerCase();\n        if (p[1].length === 2) p[1] = p[1].toUpperCase();\n        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();\n        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());\n        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());\n      }\n      return p.join('-');\n    }\n    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;\n  }\n  isSupportedCode(code) {\n    if (this.options.load === 'languageOnly' || this.options.nonExplicitSupportedLngs) {\n      code = this.getLanguagePartFromCode(code);\n    }\n    return !this.supportedLngs || !this.supportedLngs.length || this.supportedLngs.indexOf(code) > -1;\n  }\n  getBestMatchFromCodes(codes) {\n    if (!codes) return null;\n    let found;\n    codes.forEach(code => {\n      if (found) return;\n      const cleanedLng = this.formatLanguageCode(code);\n      if (!this.options.supportedLngs || this.isSupportedCode(cleanedLng)) found = cleanedLng;\n    });\n    if (!found && this.options.supportedLngs) {\n      codes.forEach(code => {\n        if (found) return;\n        const lngOnly = this.getLanguagePartFromCode(code);\n        if (this.isSupportedCode(lngOnly)) return found = lngOnly;\n        found = this.options.supportedLngs.find(supportedLng => {\n          if (supportedLng === lngOnly) return supportedLng;\n          if (supportedLng.indexOf('-') < 0 && lngOnly.indexOf('-') < 0) return;\n          if (supportedLng.indexOf(lngOnly) === 0) return supportedLng;\n        });\n      });\n    }\n    if (!found) found = this.getFallbackCodes(this.options.fallbackLng)[0];\n    return found;\n  }\n  getFallbackCodes(fallbacks, code) {\n    if (!fallbacks) return [];\n    if (typeof fallbacks === 'function') fallbacks = fallbacks(code);\n    if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;\n    if (!code) return fallbacks.default || [];\n    let found = fallbacks[code];\n    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];\n    if (!found) found = fallbacks[this.formatLanguageCode(code)];\n    if (!found) found = fallbacks[this.getLanguagePartFromCode(code)];\n    if (!found) found = fallbacks.default;\n    return found || [];\n  }\n  toResolveHierarchy(code, fallbackCode) {\n    const fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);\n    const codes = [];\n    const addCode = c => {\n      if (!c) return;\n      if (this.isSupportedCode(c)) {\n        codes.push(c);\n      } else {\n        this.logger.warn(`rejecting language code not found in supportedLngs: ${c}`);\n      }\n    };\n    if (typeof code === 'string' && (code.indexOf('-') > -1 || code.indexOf('_') > -1)) {\n      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));\n      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));\n      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));\n    } else if (typeof code === 'string') {\n      addCode(this.formatLanguageCode(code));\n    }\n    fallbackCodes.forEach(fc => {\n      if (codes.indexOf(fc) < 0) addCode(this.formatLanguageCode(fc));\n    });\n    return codes;\n  }\n}\n\nlet sets = [{\n  lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'tl', 'ti', 'tr', 'uz', 'wa'],\n  nr: [1, 2],\n  fc: 1\n}, {\n  lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'hi', 'hu', 'hy', 'ia', 'it', 'kk', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'],\n  nr: [1, 2],\n  fc: 2\n}, {\n  lngs: ['ay', 'bo', 'cgg', 'fa', 'ht', 'id', 'ja', 'jbo', 'ka', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'],\n  nr: [1],\n  fc: 3\n}, {\n  lngs: ['be', 'bs', 'cnr', 'dz', 'hr', 'ru', 'sr', 'uk'],\n  nr: [1, 2, 5],\n  fc: 4\n}, {\n  lngs: ['ar'],\n  nr: [0, 1, 2, 3, 11, 100],\n  fc: 5\n}, {\n  lngs: ['cs', 'sk'],\n  nr: [1, 2, 5],\n  fc: 6\n}, {\n  lngs: ['csb', 'pl'],\n  nr: [1, 2, 5],\n  fc: 7\n}, {\n  lngs: ['cy'],\n  nr: [1, 2, 3, 8],\n  fc: 8\n}, {\n  lngs: ['fr'],\n  nr: [1, 2],\n  fc: 9\n}, {\n  lngs: ['ga'],\n  nr: [1, 2, 3, 7, 11],\n  fc: 10\n}, {\n  lngs: ['gd'],\n  nr: [1, 2, 3, 20],\n  fc: 11\n}, {\n  lngs: ['is'],\n  nr: [1, 2],\n  fc: 12\n}, {\n  lngs: ['jv'],\n  nr: [0, 1],\n  fc: 13\n}, {\n  lngs: ['kw'],\n  nr: [1, 2, 3, 4],\n  fc: 14\n}, {\n  lngs: ['lt'],\n  nr: [1, 2, 10],\n  fc: 15\n}, {\n  lngs: ['lv'],\n  nr: [1, 2, 0],\n  fc: 16\n}, {\n  lngs: ['mk'],\n  nr: [1, 2],\n  fc: 17\n}, {\n  lngs: ['mnk'],\n  nr: [0, 1, 2],\n  fc: 18\n}, {\n  lngs: ['mt'],\n  nr: [1, 2, 11, 20],\n  fc: 19\n}, {\n  lngs: ['or'],\n  nr: [2, 1],\n  fc: 2\n}, {\n  lngs: ['ro'],\n  nr: [1, 2, 20],\n  fc: 20\n}, {\n  lngs: ['sl'],\n  nr: [5, 1, 2, 3],\n  fc: 21\n}, {\n  lngs: ['he', 'iw'],\n  nr: [1, 2, 20, 21],\n  fc: 22\n}];\nlet _rulesPluralsTypes = {\n  1: function (n) {\n    return Number(n > 1);\n  },\n  2: function (n) {\n    return Number(n != 1);\n  },\n  3: function (n) {\n    return 0;\n  },\n  4: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  5: function (n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);\n  },\n  6: function (n) {\n    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);\n  },\n  7: function (n) {\n    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  8: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);\n  },\n  9: function (n) {\n    return Number(n >= 2);\n  },\n  10: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);\n  },\n  11: function (n) {\n    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);\n  },\n  12: function (n) {\n    return Number(n % 10 != 1 || n % 100 == 11);\n  },\n  13: function (n) {\n    return Number(n !== 0);\n  },\n  14: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);\n  },\n  15: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);\n  },\n  16: function (n) {\n    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);\n  },\n  17: function (n) {\n    return Number(n == 1 || n % 10 == 1 && n % 100 != 11 ? 0 : 1);\n  },\n  18: function (n) {\n    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);\n  },\n  19: function (n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);\n  },\n  20: function (n) {\n    return Number(n == 1 ? 0 : n == 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);\n  },\n  21: function (n) {\n    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);\n  },\n  22: function (n) {\n    return Number(n == 1 ? 0 : n == 2 ? 1 : (n < 0 || n > 10) && n % 10 == 0 ? 2 : 3);\n  }\n};\nconst nonIntlVersions = ['v1', 'v2', 'v3'];\nconst intlVersions = ['v4'];\nconst suffixesOrder = {\n  zero: 0,\n  one: 1,\n  two: 2,\n  few: 3,\n  many: 4,\n  other: 5\n};\nfunction createRules() {\n  const rules = {};\n  sets.forEach(set => {\n    set.lngs.forEach(l => {\n      rules[l] = {\n        numbers: set.nr,\n        plurals: _rulesPluralsTypes[set.fc]\n      };\n    });\n  });\n  return rules;\n}\nclass PluralResolver {\n  constructor(languageUtils) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.languageUtils = languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('pluralResolver');\n    if ((!this.options.compatibilityJSON || intlVersions.includes(this.options.compatibilityJSON)) && (typeof Intl === 'undefined' || !Intl.PluralRules)) {\n      this.options.compatibilityJSON = 'v3';\n      this.logger.error('Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.');\n    }\n    this.rules = createRules();\n  }\n  addRule(lng, obj) {\n    this.rules[lng] = obj;\n  }\n  getRule(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.shouldUseIntlApi()) {\n      try {\n        return new Intl.PluralRules(getCleanedCode(code), {\n          type: options.ordinal ? 'ordinal' : 'cardinal'\n        });\n      } catch {\n        return;\n      }\n    }\n    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];\n  }\n  needsPlural(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (this.shouldUseIntlApi()) {\n      return rule && rule.resolvedOptions().pluralCategories.length > 1;\n    }\n    return rule && rule.numbers.length > 1;\n  }\n  getPluralFormsOfKey(code, key) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return this.getSuffixes(code, options).map(suffix => `${key}${suffix}`);\n  }\n  getSuffixes(code) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const rule = this.getRule(code, options);\n    if (!rule) {\n      return [];\n    }\n    if (this.shouldUseIntlApi()) {\n      return rule.resolvedOptions().pluralCategories.sort((pluralCategory1, pluralCategory2) => suffixesOrder[pluralCategory1] - suffixesOrder[pluralCategory2]).map(pluralCategory => `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${pluralCategory}`);\n    }\n    return rule.numbers.map(number => this.getSuffix(code, number, options));\n  }\n  getSuffix(code, count) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const rule = this.getRule(code, options);\n    if (rule) {\n      if (this.shouldUseIntlApi()) {\n        return `${this.options.prepend}${options.ordinal ? `ordinal${this.options.prepend}` : ''}${rule.select(count)}`;\n      }\n      return this.getSuffixRetroCompatible(rule, count);\n    }\n    this.logger.warn(`no plural rule found for: ${code}`);\n    return '';\n  }\n  getSuffixRetroCompatible(rule, count) {\n    const idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));\n    let suffix = rule.numbers[idx];\n    if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      if (suffix === 2) {\n        suffix = 'plural';\n      } else if (suffix === 1) {\n        suffix = '';\n      }\n    }\n    const returnSuffix = () => this.options.prepend && suffix.toString() ? this.options.prepend + suffix.toString() : suffix.toString();\n    if (this.options.compatibilityJSON === 'v1') {\n      if (suffix === 1) return '';\n      if (typeof suffix === 'number') return `_plural_${suffix.toString()}`;\n      return returnSuffix();\n    } else if (this.options.compatibilityJSON === 'v2') {\n      return returnSuffix();\n    } else if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {\n      return returnSuffix();\n    }\n    return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();\n  }\n  shouldUseIntlApi() {\n    return !nonIntlVersions.includes(this.options.compatibilityJSON);\n  }\n}\n\nfunction deepFindWithDefaults(data, defaultData, key) {\n  let keySeparator = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '.';\n  let ignoreJSONStructure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n  let path = getPathWithDefaults(data, defaultData, key);\n  if (!path && ignoreJSONStructure && typeof key === 'string') {\n    path = deepFind(data, key, keySeparator);\n    if (path === undefined) path = deepFind(defaultData, key, keySeparator);\n  }\n  return path;\n}\nclass Interpolator {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('interpolator');\n    this.options = options;\n    this.format = options.interpolation && options.interpolation.format || (value => value);\n    this.init(options);\n  }\n  init() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (!options.interpolation) options.interpolation = {\n      escapeValue: true\n    };\n    const iOpts = options.interpolation;\n    this.escape = iOpts.escape !== undefined ? iOpts.escape : escape;\n    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;\n    this.useRawValueToEscape = iOpts.useRawValueToEscape !== undefined ? iOpts.useRawValueToEscape : false;\n    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';\n    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';\n    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';\n    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';\n    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');\n    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');\n    this.nestingOptionsSeparator = iOpts.nestingOptionsSeparator ? iOpts.nestingOptionsSeparator : iOpts.nestingOptionsSeparator || ',';\n    this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;\n    this.alwaysFormat = iOpts.alwaysFormat !== undefined ? iOpts.alwaysFormat : false;\n    this.resetRegExp();\n  }\n  reset() {\n    if (this.options) this.init(this.options);\n  }\n  resetRegExp() {\n    const regexpStr = `${this.prefix}(.+?)${this.suffix}`;\n    this.regexp = new RegExp(regexpStr, 'g');\n    const regexpUnescapeStr = `${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;\n    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');\n    const nestingRegexpStr = `${this.nestingPrefix}(.+?)${this.nestingSuffix}`;\n    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');\n  }\n  interpolate(str, data, lng, options) {\n    let match;\n    let value;\n    let replaces;\n    const defaultData = this.options && this.options.interpolation && this.options.interpolation.defaultVariables || {};\n    function regexSafe(val) {\n      return val.replace(/\\$/g, '$$$$');\n    }\n    const handleFormat = key => {\n      if (key.indexOf(this.formatSeparator) < 0) {\n        const path = deepFindWithDefaults(data, defaultData, key, this.options.keySeparator, this.options.ignoreJSONStructure);\n        return this.alwaysFormat ? this.format(path, undefined, lng, {\n          ...options,\n          ...data,\n          interpolationkey: key\n        }) : path;\n      }\n      const p = key.split(this.formatSeparator);\n      const k = p.shift().trim();\n      const f = p.join(this.formatSeparator).trim();\n      return this.format(deepFindWithDefaults(data, defaultData, k, this.options.keySeparator, this.options.ignoreJSONStructure), f, lng, {\n        ...options,\n        ...data,\n        interpolationkey: k\n      });\n    };\n    this.resetRegExp();\n    const missingInterpolationHandler = options && options.missingInterpolationHandler || this.options.missingInterpolationHandler;\n    const skipOnVariables = options && options.interpolation && options.interpolation.skipOnVariables !== undefined ? options.interpolation.skipOnVariables : this.options.interpolation.skipOnVariables;\n    const todos = [{\n      regex: this.regexpUnescape,\n      safeValue: val => regexSafe(val)\n    }, {\n      regex: this.regexp,\n      safeValue: val => this.escapeValue ? regexSafe(this.escape(val)) : regexSafe(val)\n    }];\n    todos.forEach(todo => {\n      replaces = 0;\n      while (match = todo.regex.exec(str)) {\n        const matchedVar = match[1].trim();\n        value = handleFormat(matchedVar);\n        if (value === undefined) {\n          if (typeof missingInterpolationHandler === 'function') {\n            const temp = missingInterpolationHandler(str, match, options);\n            value = typeof temp === 'string' ? temp : '';\n          } else if (options && Object.prototype.hasOwnProperty.call(options, matchedVar)) {\n            value = '';\n          } else if (skipOnVariables) {\n            value = match[0];\n            continue;\n          } else {\n            this.logger.warn(`missed to pass in variable ${matchedVar} for interpolating ${str}`);\n            value = '';\n          }\n        } else if (typeof value !== 'string' && !this.useRawValueToEscape) {\n          value = makeString(value);\n        }\n        const safeValue = todo.safeValue(value);\n        str = str.replace(match[0], safeValue);\n        if (skipOnVariables) {\n          todo.regex.lastIndex += value.length;\n          todo.regex.lastIndex -= match[0].length;\n        } else {\n          todo.regex.lastIndex = 0;\n        }\n        replaces++;\n        if (replaces >= this.maxReplaces) {\n          break;\n        }\n      }\n    });\n    return str;\n  }\n  nest(str, fc) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let match;\n    let value;\n    let clonedOptions;\n    function handleHasOptions(key, inheritedOptions) {\n      const sep = this.nestingOptionsSeparator;\n      if (key.indexOf(sep) < 0) return key;\n      const c = key.split(new RegExp(`${sep}[ ]*{`));\n      let optionsString = `{${c[1]}`;\n      key = c[0];\n      optionsString = this.interpolate(optionsString, clonedOptions);\n      const matchedSingleQuotes = optionsString.match(/'/g);\n      const matchedDoubleQuotes = optionsString.match(/\"/g);\n      if (matchedSingleQuotes && matchedSingleQuotes.length % 2 === 0 && !matchedDoubleQuotes || matchedDoubleQuotes.length % 2 !== 0) {\n        optionsString = optionsString.replace(/'/g, '\"');\n      }\n      try {\n        clonedOptions = JSON.parse(optionsString);\n        if (inheritedOptions) clonedOptions = {\n          ...inheritedOptions,\n          ...clonedOptions\n        };\n      } catch (e) {\n        this.logger.warn(`failed parsing options string in nesting for key ${key}`, e);\n        return `${key}${sep}${optionsString}`;\n      }\n      delete clonedOptions.defaultValue;\n      return key;\n    }\n    while (match = this.nestingRegexp.exec(str)) {\n      let formatters = [];\n      clonedOptions = {\n        ...options\n      };\n      clonedOptions = clonedOptions.replace && typeof clonedOptions.replace !== 'string' ? clonedOptions.replace : clonedOptions;\n      clonedOptions.applyPostProcessor = false;\n      delete clonedOptions.defaultValue;\n      let doReduce = false;\n      if (match[0].indexOf(this.formatSeparator) !== -1 && !/{.*}/.test(match[1])) {\n        const r = match[1].split(this.formatSeparator).map(elem => elem.trim());\n        match[1] = r.shift();\n        formatters = r;\n        doReduce = true;\n      }\n      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);\n      if (value && match[0] === str && typeof value !== 'string') return value;\n      if (typeof value !== 'string') value = makeString(value);\n      if (!value) {\n        this.logger.warn(`missed to resolve ${match[1]} for nesting ${str}`);\n        value = '';\n      }\n      if (doReduce) {\n        value = formatters.reduce((v, f) => this.format(v, f, options.lng, {\n          ...options,\n          interpolationkey: match[1].trim()\n        }), value.trim());\n      }\n      str = str.replace(match[0], value);\n      this.regexp.lastIndex = 0;\n    }\n    return str;\n  }\n}\n\nfunction parseFormatStr(formatStr) {\n  let formatName = formatStr.toLowerCase().trim();\n  const formatOptions = {};\n  if (formatStr.indexOf('(') > -1) {\n    const p = formatStr.split('(');\n    formatName = p[0].toLowerCase().trim();\n    const optStr = p[1].substring(0, p[1].length - 1);\n    if (formatName === 'currency' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.currency) formatOptions.currency = optStr.trim();\n    } else if (formatName === 'relativetime' && optStr.indexOf(':') < 0) {\n      if (!formatOptions.range) formatOptions.range = optStr.trim();\n    } else {\n      const opts = optStr.split(';');\n      opts.forEach(opt => {\n        if (!opt) return;\n        const [key, ...rest] = opt.split(':');\n        const val = rest.join(':').trim().replace(/^'+|'+$/g, '');\n        if (!formatOptions[key.trim()]) formatOptions[key.trim()] = val;\n        if (val === 'false') formatOptions[key.trim()] = false;\n        if (val === 'true') formatOptions[key.trim()] = true;\n        if (!isNaN(val)) formatOptions[key.trim()] = parseInt(val, 10);\n      });\n    }\n  }\n  return {\n    formatName,\n    formatOptions\n  };\n}\nfunction createCachedFormatter(fn) {\n  const cache = {};\n  return function invokeFormatter(val, lng, options) {\n    const key = lng + JSON.stringify(options);\n    let formatter = cache[key];\n    if (!formatter) {\n      formatter = fn(getCleanedCode(lng), options);\n      cache[key] = formatter;\n    }\n    return formatter(val);\n  };\n}\nclass Formatter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.logger = baseLogger.create('formatter');\n    this.options = options;\n    this.formats = {\n      number: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      currency: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.NumberFormat(lng, {\n          ...opt,\n          style: 'currency'\n        });\n        return val => formatter.format(val);\n      }),\n      datetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.DateTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      }),\n      relativetime: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.RelativeTimeFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val, opt.range || 'day');\n      }),\n      list: createCachedFormatter((lng, opt) => {\n        const formatter = new Intl.ListFormat(lng, {\n          ...opt\n        });\n        return val => formatter.format(val);\n      })\n    };\n    this.init(options);\n  }\n  init(services) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      interpolation: {}\n    };\n    const iOpts = options.interpolation;\n    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';\n  }\n  add(name, fc) {\n    this.formats[name.toLowerCase().trim()] = fc;\n  }\n  addCached(name, fc) {\n    this.formats[name.toLowerCase().trim()] = createCachedFormatter(fc);\n  }\n  format(value, format, lng) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    const formats = format.split(this.formatSeparator);\n    const result = formats.reduce((mem, f) => {\n      const {\n        formatName,\n        formatOptions\n      } = parseFormatStr(f);\n      if (this.formats[formatName]) {\n        let formatted = mem;\n        try {\n          const valOptions = options && options.formatParams && options.formatParams[options.interpolationkey] || {};\n          const l = valOptions.locale || valOptions.lng || options.locale || options.lng || lng;\n          formatted = this.formats[formatName](mem, l, {\n            ...formatOptions,\n            ...options,\n            ...valOptions\n          });\n        } catch (error) {\n          this.logger.warn(error);\n        }\n        return formatted;\n      } else {\n        this.logger.warn(`there was no format function for ${formatName}`);\n      }\n      return mem;\n    }, value);\n    return result;\n  }\n}\n\nfunction removePending(q, name) {\n  if (q.pending[name] !== undefined) {\n    delete q.pending[name];\n    q.pendingCount--;\n  }\n}\nclass Connector extends EventEmitter {\n  constructor(backend, store, services) {\n    let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    super();\n    this.backend = backend;\n    this.store = store;\n    this.services = services;\n    this.languageUtils = services.languageUtils;\n    this.options = options;\n    this.logger = baseLogger.create('backendConnector');\n    this.waitingReads = [];\n    this.maxParallelReads = options.maxParallelReads || 10;\n    this.readingCalls = 0;\n    this.maxRetries = options.maxRetries >= 0 ? options.maxRetries : 5;\n    this.retryTimeout = options.retryTimeout >= 1 ? options.retryTimeout : 350;\n    this.state = {};\n    this.queue = [];\n    if (this.backend && this.backend.init) {\n      this.backend.init(services, options.backend, options);\n    }\n  }\n  queueLoad(languages, namespaces, options, callback) {\n    const toLoad = {};\n    const pending = {};\n    const toLoadLanguages = {};\n    const toLoadNamespaces = {};\n    languages.forEach(lng => {\n      let hasAllNamespaces = true;\n      namespaces.forEach(ns => {\n        const name = `${lng}|${ns}`;\n        if (!options.reload && this.store.hasResourceBundle(lng, ns)) {\n          this.state[name] = 2;\n        } else if (this.state[name] < 0) ; else if (this.state[name] === 1) {\n          if (pending[name] === undefined) pending[name] = true;\n        } else {\n          this.state[name] = 1;\n          hasAllNamespaces = false;\n          if (pending[name] === undefined) pending[name] = true;\n          if (toLoad[name] === undefined) toLoad[name] = true;\n          if (toLoadNamespaces[ns] === undefined) toLoadNamespaces[ns] = true;\n        }\n      });\n      if (!hasAllNamespaces) toLoadLanguages[lng] = true;\n    });\n    if (Object.keys(toLoad).length || Object.keys(pending).length) {\n      this.queue.push({\n        pending,\n        pendingCount: Object.keys(pending).length,\n        loaded: {},\n        errors: [],\n        callback\n      });\n    }\n    return {\n      toLoad: Object.keys(toLoad),\n      pending: Object.keys(pending),\n      toLoadLanguages: Object.keys(toLoadLanguages),\n      toLoadNamespaces: Object.keys(toLoadNamespaces)\n    };\n  }\n  loaded(name, err, data) {\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    if (err) this.emit('failedLoading', lng, ns, err);\n    if (data) {\n      this.store.addResourceBundle(lng, ns, data);\n    }\n    this.state[name] = err ? -1 : 2;\n    const loaded = {};\n    this.queue.forEach(q => {\n      pushPath(q.loaded, [lng], ns);\n      removePending(q, name);\n      if (err) q.errors.push(err);\n      if (q.pendingCount === 0 && !q.done) {\n        Object.keys(q.loaded).forEach(l => {\n          if (!loaded[l]) loaded[l] = {};\n          const loadedKeys = q.loaded[l];\n          if (loadedKeys.length) {\n            loadedKeys.forEach(n => {\n              if (loaded[l][n] === undefined) loaded[l][n] = true;\n            });\n          }\n        });\n        q.done = true;\n        if (q.errors.length) {\n          q.callback(q.errors);\n        } else {\n          q.callback();\n        }\n      }\n    });\n    this.emit('loaded', loaded);\n    this.queue = this.queue.filter(q => !q.done);\n  }\n  read(lng, ns, fcName) {\n    let tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : this.retryTimeout;\n    let callback = arguments.length > 5 ? arguments[5] : undefined;\n    if (!lng.length) return callback(null, {});\n    if (this.readingCalls >= this.maxParallelReads) {\n      this.waitingReads.push({\n        lng,\n        ns,\n        fcName,\n        tried,\n        wait,\n        callback\n      });\n      return;\n    }\n    this.readingCalls++;\n    const resolver = (err, data) => {\n      this.readingCalls--;\n      if (this.waitingReads.length > 0) {\n        const next = this.waitingReads.shift();\n        this.read(next.lng, next.ns, next.fcName, next.tried, next.wait, next.callback);\n      }\n      if (err && data && tried < this.maxRetries) {\n        setTimeout(() => {\n          this.read.call(this, lng, ns, fcName, tried + 1, wait * 2, callback);\n        }, wait);\n        return;\n      }\n      callback(err, data);\n    };\n    const fc = this.backend[fcName].bind(this.backend);\n    if (fc.length === 2) {\n      try {\n        const r = fc(lng, ns);\n        if (r && typeof r.then === 'function') {\n          r.then(data => resolver(null, data)).catch(resolver);\n        } else {\n          resolver(null, r);\n        }\n      } catch (err) {\n        resolver(err);\n      }\n      return;\n    }\n    return fc(lng, ns, resolver);\n  }\n  prepareLoading(languages, namespaces) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let callback = arguments.length > 3 ? arguments[3] : undefined;\n    if (!this.backend) {\n      this.logger.warn('No backend was added via i18next.use. Will not load resources.');\n      return callback && callback();\n    }\n    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);\n    if (typeof namespaces === 'string') namespaces = [namespaces];\n    const toLoad = this.queueLoad(languages, namespaces, options, callback);\n    if (!toLoad.toLoad.length) {\n      if (!toLoad.pending.length) callback();\n      return null;\n    }\n    toLoad.toLoad.forEach(name => {\n      this.loadOne(name);\n    });\n  }\n  load(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {}, callback);\n  }\n  reload(languages, namespaces, callback) {\n    this.prepareLoading(languages, namespaces, {\n      reload: true\n    }, callback);\n  }\n  loadOne(name) {\n    let prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    const s = name.split('|');\n    const lng = s[0];\n    const ns = s[1];\n    this.read(lng, ns, 'read', undefined, undefined, (err, data) => {\n      if (err) this.logger.warn(`${prefix}loading namespace ${ns} for language ${lng} failed`, err);\n      if (!err && data) this.logger.log(`${prefix}loaded namespace ${ns} for language ${lng}`, data);\n      this.loaded(name, err, data);\n    });\n  }\n  saveMissing(languages, namespace, key, fallbackValue, isUpdate) {\n    let options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let clb = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : () => {};\n    if (this.services.utils && this.services.utils.hasLoadedNamespace && !this.services.utils.hasLoadedNamespace(namespace)) {\n      this.logger.warn(`did not save key \"${key}\" as the namespace \"${namespace}\" was not yet loaded`, 'This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!');\n      return;\n    }\n    if (key === undefined || key === null || key === '') return;\n    if (this.backend && this.backend.create) {\n      const opts = {\n        ...options,\n        isUpdate\n      };\n      const fc = this.backend.create.bind(this.backend);\n      if (fc.length < 6) {\n        try {\n          let r;\n          if (fc.length === 5) {\n            r = fc(languages, namespace, key, fallbackValue, opts);\n          } else {\n            r = fc(languages, namespace, key, fallbackValue);\n          }\n          if (r && typeof r.then === 'function') {\n            r.then(data => clb(null, data)).catch(clb);\n          } else {\n            clb(null, r);\n          }\n        } catch (err) {\n          clb(err);\n        }\n      } else {\n        fc(languages, namespace, key, fallbackValue, clb, opts);\n      }\n    }\n    if (!languages || !languages[0]) return;\n    this.store.addResource(languages[0], namespace, key, fallbackValue);\n  }\n}\n\nfunction get() {\n  return {\n    debug: false,\n    initImmediate: true,\n    ns: ['translation'],\n    defaultNS: ['translation'],\n    fallbackLng: ['dev'],\n    fallbackNS: false,\n    supportedLngs: false,\n    nonExplicitSupportedLngs: false,\n    load: 'all',\n    preload: false,\n    simplifyPluralSuffix: true,\n    keySeparator: '.',\n    nsSeparator: ':',\n    pluralSeparator: '_',\n    contextSeparator: '_',\n    partialBundledLanguages: false,\n    saveMissing: false,\n    updateMissing: false,\n    saveMissingTo: 'fallback',\n    saveMissingPlurals: true,\n    missingKeyHandler: false,\n    missingInterpolationHandler: false,\n    postProcess: false,\n    postProcessPassResolved: false,\n    returnNull: false,\n    returnEmptyString: true,\n    returnObjects: false,\n    joinArrays: false,\n    returnedObjectHandler: false,\n    parseMissingKeyHandler: false,\n    appendNamespaceToMissingKey: false,\n    appendNamespaceToCIMode: false,\n    overloadTranslationOptionHandler: function handle(args) {\n      let ret = {};\n      if (typeof args[1] === 'object') ret = args[1];\n      if (typeof args[1] === 'string') ret.defaultValue = args[1];\n      if (typeof args[2] === 'string') ret.tDescription = args[2];\n      if (typeof args[2] === 'object' || typeof args[3] === 'object') {\n        const options = args[3] || args[2];\n        Object.keys(options).forEach(key => {\n          ret[key] = options[key];\n        });\n      }\n      return ret;\n    },\n    interpolation: {\n      escapeValue: true,\n      format: (value, format, lng, options) => value,\n      prefix: '{{',\n      suffix: '}}',\n      formatSeparator: ',',\n      unescapePrefix: '-',\n      nestingPrefix: '$t(',\n      nestingSuffix: ')',\n      nestingOptionsSeparator: ',',\n      maxReplaces: 1000,\n      skipOnVariables: true\n    }\n  };\n}\nfunction transformOptions(options) {\n  if (typeof options.ns === 'string') options.ns = [options.ns];\n  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];\n  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];\n  if (options.supportedLngs && options.supportedLngs.indexOf('cimode') < 0) {\n    options.supportedLngs = options.supportedLngs.concat(['cimode']);\n  }\n  return options;\n}\n\nfunction noop() {}\nfunction bindMemberFunctions(inst) {\n  const mems = Object.getOwnPropertyNames(Object.getPrototypeOf(inst));\n  mems.forEach(mem => {\n    if (typeof inst[mem] === 'function') {\n      inst[mem] = inst[mem].bind(inst);\n    }\n  });\n}\nclass I18n extends EventEmitter {\n  constructor() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    super();\n    this.options = transformOptions(options);\n    this.services = {};\n    this.logger = baseLogger;\n    this.modules = {\n      external: []\n    };\n    bindMemberFunctions(this);\n    if (callback && !this.isInitialized && !options.isClone) {\n      if (!this.options.initImmediate) {\n        this.init(options, callback);\n        return this;\n      }\n      setTimeout(() => {\n        this.init(options, callback);\n      }, 0);\n    }\n  }\n  init() {\n    var _this = this;\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n    if (!options.defaultNS && options.defaultNS !== false && options.ns) {\n      if (typeof options.ns === 'string') {\n        options.defaultNS = options.ns;\n      } else if (options.ns.indexOf('translation') < 0) {\n        options.defaultNS = options.ns[0];\n      }\n    }\n    const defOpts = get();\n    this.options = {\n      ...defOpts,\n      ...this.options,\n      ...transformOptions(options)\n    };\n    if (this.options.compatibilityAPI !== 'v1') {\n      this.options.interpolation = {\n        ...defOpts.interpolation,\n        ...this.options.interpolation\n      };\n    }\n    if (options.keySeparator !== undefined) {\n      this.options.userDefinedKeySeparator = options.keySeparator;\n    }\n    if (options.nsSeparator !== undefined) {\n      this.options.userDefinedNsSeparator = options.nsSeparator;\n    }\n    function createClassOnDemand(ClassOrObject) {\n      if (!ClassOrObject) return null;\n      if (typeof ClassOrObject === 'function') return new ClassOrObject();\n      return ClassOrObject;\n    }\n    if (!this.options.isClone) {\n      if (this.modules.logger) {\n        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);\n      } else {\n        baseLogger.init(null, this.options);\n      }\n      let formatter;\n      if (this.modules.formatter) {\n        formatter = this.modules.formatter;\n      } else if (typeof Intl !== 'undefined') {\n        formatter = Formatter;\n      }\n      const lu = new LanguageUtil(this.options);\n      this.store = new ResourceStore(this.options.resources, this.options);\n      const s = this.services;\n      s.logger = baseLogger;\n      s.resourceStore = this.store;\n      s.languageUtils = lu;\n      s.pluralResolver = new PluralResolver(lu, {\n        prepend: this.options.pluralSeparator,\n        compatibilityJSON: this.options.compatibilityJSON,\n        simplifyPluralSuffix: this.options.simplifyPluralSuffix\n      });\n      if (formatter && (!this.options.interpolation.format || this.options.interpolation.format === defOpts.interpolation.format)) {\n        s.formatter = createClassOnDemand(formatter);\n        s.formatter.init(s, this.options);\n        this.options.interpolation.format = s.formatter.format.bind(s.formatter);\n      }\n      s.interpolator = new Interpolator(this.options);\n      s.utils = {\n        hasLoadedNamespace: this.hasLoadedNamespace.bind(this)\n      };\n      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);\n      s.backendConnector.on('*', function (event) {\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        _this.emit(event, ...args);\n      });\n      if (this.modules.languageDetector) {\n        s.languageDetector = createClassOnDemand(this.modules.languageDetector);\n        if (s.languageDetector.init) s.languageDetector.init(s, this.options.detection, this.options);\n      }\n      if (this.modules.i18nFormat) {\n        s.i18nFormat = createClassOnDemand(this.modules.i18nFormat);\n        if (s.i18nFormat.init) s.i18nFormat.init(this);\n      }\n      this.translator = new Translator(this.services, this.options);\n      this.translator.on('*', function (event) {\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        _this.emit(event, ...args);\n      });\n      this.modules.external.forEach(m => {\n        if (m.init) m.init(this);\n      });\n    }\n    this.format = this.options.interpolation.format;\n    if (!callback) callback = noop;\n    if (this.options.fallbackLng && !this.services.languageDetector && !this.options.lng) {\n      const codes = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n      if (codes.length > 0 && codes[0] !== 'dev') this.options.lng = codes[0];\n    }\n    if (!this.services.languageDetector && !this.options.lng) {\n      this.logger.warn('init: no languageDetector is used and no lng is defined');\n    }\n    const storeApi = ['getResource', 'hasResourceBundle', 'getResourceBundle', 'getDataByLanguage'];\n    storeApi.forEach(fcName => {\n      this[fcName] = function () {\n        return _this.store[fcName](...arguments);\n      };\n    });\n    const storeApiChained = ['addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle'];\n    storeApiChained.forEach(fcName => {\n      this[fcName] = function () {\n        _this.store[fcName](...arguments);\n        return _this;\n      };\n    });\n    const deferred = defer();\n    const load = () => {\n      const finish = (err, t) => {\n        if (this.isInitialized && !this.initializedStoreOnce) this.logger.warn('init: i18next is already initialized. You should call init just once!');\n        this.isInitialized = true;\n        if (!this.options.isClone) this.logger.log('initialized', this.options);\n        this.emit('initialized', this.options);\n        deferred.resolve(t);\n        callback(err, t);\n      };\n      if (this.languages && this.options.compatibilityAPI !== 'v1' && !this.isInitialized) return finish(null, this.t.bind(this));\n      this.changeLanguage(this.options.lng, finish);\n    };\n    if (this.options.resources || !this.options.initImmediate) {\n      load();\n    } else {\n      setTimeout(load, 0);\n    }\n    return deferred;\n  }\n  loadResources(language) {\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    let usedCallback = callback;\n    const usedLng = typeof language === 'string' ? language : this.language;\n    if (typeof language === 'function') usedCallback = language;\n    if (!this.options.resources || this.options.partialBundledLanguages) {\n      if (usedLng && usedLng.toLowerCase() === 'cimode' && (!this.options.preload || this.options.preload.length === 0)) return usedCallback();\n      const toLoad = [];\n      const append = lng => {\n        if (!lng) return;\n        if (lng === 'cimode') return;\n        const lngs = this.services.languageUtils.toResolveHierarchy(lng);\n        lngs.forEach(l => {\n          if (l === 'cimode') return;\n          if (toLoad.indexOf(l) < 0) toLoad.push(l);\n        });\n      };\n      if (!usedLng) {\n        const fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);\n        fallbacks.forEach(l => append(l));\n      } else {\n        append(usedLng);\n      }\n      if (this.options.preload) {\n        this.options.preload.forEach(l => append(l));\n      }\n      this.services.backendConnector.load(toLoad, this.options.ns, e => {\n        if (!e && !this.resolvedLanguage && this.language) this.setResolvedLanguage(this.language);\n        usedCallback(e);\n      });\n    } else {\n      usedCallback(null);\n    }\n  }\n  reloadResources(lngs, ns, callback) {\n    const deferred = defer();\n    if (!lngs) lngs = this.languages;\n    if (!ns) ns = this.options.ns;\n    if (!callback) callback = noop;\n    this.services.backendConnector.reload(lngs, ns, err => {\n      deferred.resolve();\n      callback(err);\n    });\n    return deferred;\n  }\n  use(module) {\n    if (!module) throw new Error('You are passing an undefined module! Please check the object you are passing to i18next.use()');\n    if (!module.type) throw new Error('You are passing a wrong module! Please check the object you are passing to i18next.use()');\n    if (module.type === 'backend') {\n      this.modules.backend = module;\n    }\n    if (module.type === 'logger' || module.log && module.warn && module.error) {\n      this.modules.logger = module;\n    }\n    if (module.type === 'languageDetector') {\n      this.modules.languageDetector = module;\n    }\n    if (module.type === 'i18nFormat') {\n      this.modules.i18nFormat = module;\n    }\n    if (module.type === 'postProcessor') {\n      postProcessor.addPostProcessor(module);\n    }\n    if (module.type === 'formatter') {\n      this.modules.formatter = module;\n    }\n    if (module.type === '3rdParty') {\n      this.modules.external.push(module);\n    }\n    return this;\n  }\n  setResolvedLanguage(l) {\n    if (!l || !this.languages) return;\n    if (['cimode', 'dev'].indexOf(l) > -1) return;\n    for (let li = 0; li < this.languages.length; li++) {\n      const lngInLngs = this.languages[li];\n      if (['cimode', 'dev'].indexOf(lngInLngs) > -1) continue;\n      if (this.store.hasLanguageSomeTranslations(lngInLngs)) {\n        this.resolvedLanguage = lngInLngs;\n        break;\n      }\n    }\n  }\n  changeLanguage(lng, callback) {\n    var _this2 = this;\n    this.isLanguageChangingTo = lng;\n    const deferred = defer();\n    this.emit('languageChanging', lng);\n    const setLngProps = l => {\n      this.language = l;\n      this.languages = this.services.languageUtils.toResolveHierarchy(l);\n      this.resolvedLanguage = undefined;\n      this.setResolvedLanguage(l);\n    };\n    const done = (err, l) => {\n      if (l) {\n        setLngProps(l);\n        this.translator.changeLanguage(l);\n        this.isLanguageChangingTo = undefined;\n        this.emit('languageChanged', l);\n        this.logger.log('languageChanged', l);\n      } else {\n        this.isLanguageChangingTo = undefined;\n      }\n      deferred.resolve(function () {\n        return _this2.t(...arguments);\n      });\n      if (callback) callback(err, function () {\n        return _this2.t(...arguments);\n      });\n    };\n    const setLng = lngs => {\n      if (!lng && !lngs && this.services.languageDetector) lngs = [];\n      const l = typeof lngs === 'string' ? lngs : this.services.languageUtils.getBestMatchFromCodes(lngs);\n      if (l) {\n        if (!this.language) {\n          setLngProps(l);\n        }\n        if (!this.translator.language) this.translator.changeLanguage(l);\n        if (this.services.languageDetector && this.services.languageDetector.cacheUserLanguage) this.services.languageDetector.cacheUserLanguage(l);\n      }\n      this.loadResources(l, err => {\n        done(err, l);\n      });\n    };\n    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {\n      setLng(this.services.languageDetector.detect());\n    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {\n      if (this.services.languageDetector.detect.length === 0) {\n        this.services.languageDetector.detect().then(setLng);\n      } else {\n        this.services.languageDetector.detect(setLng);\n      }\n    } else {\n      setLng(lng);\n    }\n    return deferred;\n  }\n  getFixedT(lng, ns, keyPrefix) {\n    var _this3 = this;\n    const fixedT = function (key, opts) {\n      let options;\n      if (typeof opts !== 'object') {\n        for (var _len3 = arguments.length, rest = new Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n          rest[_key3 - 2] = arguments[_key3];\n        }\n        options = _this3.options.overloadTranslationOptionHandler([key, opts].concat(rest));\n      } else {\n        options = {\n          ...opts\n        };\n      }\n      options.lng = options.lng || fixedT.lng;\n      options.lngs = options.lngs || fixedT.lngs;\n      options.ns = options.ns || fixedT.ns;\n      options.keyPrefix = options.keyPrefix || keyPrefix || fixedT.keyPrefix;\n      const keySeparator = _this3.options.keySeparator || '.';\n      let resultKey;\n      if (options.keyPrefix && Array.isArray(key)) {\n        resultKey = key.map(k => `${options.keyPrefix}${keySeparator}${k}`);\n      } else {\n        resultKey = options.keyPrefix ? `${options.keyPrefix}${keySeparator}${key}` : key;\n      }\n      return _this3.t(resultKey, options);\n    };\n    if (typeof lng === 'string') {\n      fixedT.lng = lng;\n    } else {\n      fixedT.lngs = lng;\n    }\n    fixedT.ns = ns;\n    fixedT.keyPrefix = keyPrefix;\n    return fixedT;\n  }\n  t() {\n    return this.translator && this.translator.translate(...arguments);\n  }\n  exists() {\n    return this.translator && this.translator.exists(...arguments);\n  }\n  setDefaultNamespace(ns) {\n    this.options.defaultNS = ns;\n  }\n  hasLoadedNamespace(ns) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (!this.isInitialized) {\n      this.logger.warn('hasLoadedNamespace: i18next was not initialized', this.languages);\n      return false;\n    }\n    if (!this.languages || !this.languages.length) {\n      this.logger.warn('hasLoadedNamespace: i18n.languages were undefined or empty', this.languages);\n      return false;\n    }\n    const lng = options.lng || this.resolvedLanguage || this.languages[0];\n    const fallbackLng = this.options ? this.options.fallbackLng : false;\n    const lastLng = this.languages[this.languages.length - 1];\n    if (lng.toLowerCase() === 'cimode') return true;\n    const loadNotPending = (l, n) => {\n      const loadState = this.services.backendConnector.state[`${l}|${n}`];\n      return loadState === -1 || loadState === 2;\n    };\n    if (options.precheck) {\n      const preResult = options.precheck(this, loadNotPending);\n      if (preResult !== undefined) return preResult;\n    }\n    if (this.hasResourceBundle(lng, ns)) return true;\n    if (!this.services.backendConnector.backend || this.options.resources && !this.options.partialBundledLanguages) return true;\n    if (loadNotPending(lng, ns) && (!fallbackLng || loadNotPending(lastLng, ns))) return true;\n    return false;\n  }\n  loadNamespaces(ns, callback) {\n    const deferred = defer();\n    if (!this.options.ns) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    if (typeof ns === 'string') ns = [ns];\n    ns.forEach(n => {\n      if (this.options.ns.indexOf(n) < 0) this.options.ns.push(n);\n    });\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  loadLanguages(lngs, callback) {\n    const deferred = defer();\n    if (typeof lngs === 'string') lngs = [lngs];\n    const preloaded = this.options.preload || [];\n    const newLngs = lngs.filter(lng => preloaded.indexOf(lng) < 0);\n    if (!newLngs.length) {\n      if (callback) callback();\n      return Promise.resolve();\n    }\n    this.options.preload = preloaded.concat(newLngs);\n    this.loadResources(err => {\n      deferred.resolve();\n      if (callback) callback(err);\n    });\n    return deferred;\n  }\n  dir(lng) {\n    if (!lng) lng = this.resolvedLanguage || (this.languages && this.languages.length > 0 ? this.languages[0] : this.language);\n    if (!lng) return 'rtl';\n    const rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ug', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam', 'ckb'];\n    const languageUtils = this.services && this.services.languageUtils || new LanguageUtil(get());\n    return rtlLngs.indexOf(languageUtils.getLanguagePartFromCode(lng)) > -1 || lng.toLowerCase().indexOf('-arab') > 1 ? 'rtl' : 'ltr';\n  }\n  static createInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 ? arguments[1] : undefined;\n    return new I18n(options, callback);\n  }\n  cloneInstance() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n    const forkResourceStore = options.forkResourceStore;\n    if (forkResourceStore) delete options.forkResourceStore;\n    const mergedOptions = {\n      ...this.options,\n      ...options,\n      ...{\n        isClone: true\n      }\n    };\n    const clone = new I18n(mergedOptions);\n    if (options.debug !== undefined || options.prefix !== undefined) {\n      clone.logger = clone.logger.clone(options);\n    }\n    const membersToCopy = ['store', 'services', 'language'];\n    membersToCopy.forEach(m => {\n      clone[m] = this[m];\n    });\n    clone.services = {\n      ...this.services\n    };\n    clone.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    if (forkResourceStore) {\n      clone.store = new ResourceStore(this.store.data, mergedOptions);\n      clone.services.resourceStore = clone.store;\n    }\n    clone.translator = new Translator(clone.services, mergedOptions);\n    clone.translator.on('*', function (event) {\n      for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        args[_key4 - 1] = arguments[_key4];\n      }\n      clone.emit(event, ...args);\n    });\n    clone.init(mergedOptions, callback);\n    clone.translator.options = mergedOptions;\n    clone.translator.backendConnector.services.utils = {\n      hasLoadedNamespace: clone.hasLoadedNamespace.bind(clone)\n    };\n    return clone;\n  }\n  toJSON() {\n    return {\n      options: this.options,\n      store: this.store,\n      language: this.language,\n      languages: this.languages,\n      resolvedLanguage: this.resolvedLanguage\n    };\n  }\n}\nconst instance = I18n.createInstance();\ninstance.createInstance = I18n.createInstance;\n\nconst createInstance = instance.createInstance;\nconst dir = instance.dir;\nconst init = instance.init;\nconst loadResources = instance.loadResources;\nconst reloadResources = instance.reloadResources;\nconst use = instance.use;\nconst changeLanguage = instance.changeLanguage;\nconst getFixedT = instance.getFixedT;\nconst t = instance.t;\nconst exists = instance.exists;\nconst setDefaultNamespace = instance.setDefaultNamespace;\nconst hasLoadedNamespace = instance.hasLoadedNamespace;\nconst loadNamespaces = instance.loadNamespaces;\nconst loadLanguages = instance.loadLanguages;\n\nexport { changeLanguage, createInstance, instance as default, dir, exists, getFixedT, hasLoadedNamespace, init, loadLanguages, loadNamespaces, loadResources, reloadResources, setDefaultNamespace, t, use };\n","import app from 'apprun'\n\nimport i18next from \"i18next\"\n\n// take care of treeshaking - removing the below line may cause that the Wc gets removed by treeshaking\nimport '../../src'\nimport { intlMessage, intlDatetime, intlRelativeTime, intlNumber } from '../../src'\n\n// our app state\nconst state = 'en-GB'\n\n// initialize i18next\ni18next.init({\n  lng: state,\n  fallbackLng: \"en\",\n  resources: {\n    en: {\n      default: {\n        title: \"My {{value}}\",\n        deep: \"In English: {{value.key}} {{value.val}}!\",\n        html: \"With HTML it might get {{value}}\",\n        item: \"One item\",\n        item_plural: \"{{count}} items\",\n        placeholder: 'fill in here',\n        'Selected language': 'Selected language:'\n      },\n      test: {\n        key: \"A value\"\n      }\n    },\n    'en-US': {\n      default: {\n        deep: \"In US English: {{value.key}} {{value.val}}!\"\n      }\n    },\n    fr: {\n      default: {\n        title: \"Mon {{value}}\",\n        deep: \"En anglais: {{value.key}} {{value.val}} !\",\n        html: \"Avec le HTML, cela pourrait devenir {{value}}\",\n        item: \"Un seul article\",\n        item_plural: \"{{count}} articles\",\n        placeholder: 'remplir ici',\n        'Selected language': 'Langue choisie :'\n      },\n      test: {\n        key: \"une valeur\"\n      }\n    }\n  },\n  defaultNS: \"default\",\n  fallbackNS: \"global\"\n})\n\n// inject i18next into web-components\nconst IntlMessage = (props: object) => (<intl-message { ...{i18next, ...props }} />)\nconst IntlDatetime = (props: object) => (<intl-datetime { ...{i18next, ...props }} />)\nconst IntlRelativeTime = (props: object) => (<intl-relative-time { ...{i18next, ...props }} />)\nconst IntlNumber = (props: object) => (<intl-number { ...{i18next, ...props }} />)\n\n// our view\nconst view = (state: string) => (\n  <section>\n    <h1>demo with JSX</h1>\n\n    <p><IntlMessage label='Selected language' /> <strong>{state}</strong></p>\n    <button onclick={() => app.run('lng', 'en-GB')}>en-GB</button>\n    <button onclick={() => app.run('lng', 'en-US')}>en-US</button>\n    <button onclick={() => app.run('lng', 'fr')}>fr</button>\n    <button onclick={() => app.run('lng', 'ar')}>ar</button>\n    <button onclick={() => app.run('lng', 'zh-CN')}>zh-CN</button>\n\n    <section>\n      <h2>intl-message</h2>\n      <IntlMessage label='deep' value={{ key:'Hello', val:'World' }} />\n      <IntlMessage label='html' value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='html' dangerous value='<span style=\"color: red\">dangerous</span>' />\n      <IntlMessage label='item' count={1} />\n      <IntlMessage label='item' count={10} />\n      <p><input placeholder={intlMessage({i18next, key: 'placeholder'})} /></p>\n    </section>\n\n    <section>\n      <h2>intl-datetime</h2>\n      <IntlDatetime />\n      <IntlDatetime value='2020-03-12' />\n      <IntlDatetime value={new Date('2020-03-12')} lng='en-US' />\n      <IntlDatetime value='2020-03-12' options={{weekday: 'short', year: 'numeric', month: 'long', day: 'numeric'}} />\n      <IntlDatetime value='2020-03-12 12:00:00' date time timeZone='Asia/Tokyo'/>\n      <p>as text: \"{intlDatetime({i18next, time: true, date: true})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-relative-time</h2>\n      <IntlRelativeTime numeric='auto'/>\n      <IntlRelativeTime value={new Date(Date.now() - (3 * 7 * 24 * 3600000))} />\n      <p>as text: \"{intlRelativeTime({i18next})}\"</p>\n    </section>\n\n    <section>\n      <h2>intl-number</h2>\n      <IntlNumber />\n      <IntlNumber value={123456.789} />\n      <IntlNumber value={123456.789} options={{\"style\":\"currency\",\"currency\":\"EUR\"}} />\n      <IntlNumber value={123456.789} styleProp=\"currency\" currency=\"JPY\" />\n      <IntlNumber value={50} styleProp=\"unit\" unit=\"mile-per-hour\" />\n      <IntlNumber value={987654321} notation=\"scientific\" />\n      <IntlNumber value=\"987654321\" notation=\"engineering\" />\n      <IntlNumber value={987654321} notation=\"compact\" />\n      <p>as text: \"{intlNumber({i18next, value: 987654321, notation: 'compact'})}\"</p>\n    </section>\n  </section>\n)\n\nconst update = {\n  lng: (state: string, nextState: string): string => {\n    i18next.changeLanguage(nextState)\n    return nextState\n  }\n}\n\napp.start(document.body, state, view, update)\n"],"names":["EVENTS","BaseElement","HTMLElement","i18next","this","_i18next","_disconnect","_connect","observedAttributes","constructor","attributes","super","_observedAttributes","_initialized","_props","window","attrMap","reduce","map","name","lc","toLowerCase","_attrMap","connectedCallback","_assignProps","_render","disconnectedCallback","attributeChangedCallback","oldValue","value","_properties","requestAnimationFrame","Array","from","forEach","item","undefined","Object","defineProperty","get","set","configurable","enumerable","_off","evName","fn","on","off","_languages","lng","lngs","languages","navigator","concat","filter","Boolean","ATTR","DATE","year","month","day","TIME","hour","minute","second","IntlDatetime","assign","hour12","other","options","date","Date","textContent","Intl","DateTimeFormat","format","e","console","log","intlDatetime","props","customElements","define","IntlMessage","interpolation","escapeValue","val","label","key","transl","t","innerHTML","intlMessage","IntlNumber","style","NumberFormat","intlNumber","UNITS","LOWER","INTERVALS","quarter","week","weekDiff","diff","now","dayOfWeek","getDay","realdays","Math","ceil","floor","inUnit","end","start","divider","trunc","getTime","relativeTime","unit","isNaN","days","abs","getMonth","getFullYear","i","length","ms","nextIntervalMs","exact","interval","IntlRelativeTime","clearTimeout","_timerId","_setTimer","timeout","setTimeout","change","indexOf","lowerUnit","update","_valueOrDate","String","replace","RelativeTimeFormat","intlRelativeTime","trueish","isDate","RE_DATE","toDate","test","toJson","def","JSON","parse","toNumber","n","Number","elementText","tag","el","document","createElement","entries","attributesToLowerCase","attrs","attr","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","o","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","call","App","_events","push","subscribers","sub","find","run","args","getSubscribers","assert","delay","keys","apply","once","_t","query","promises","Promise","all","events","evt","endsWith","startsWith","sort","a","b","event","app","root","self","global","getStateValue","component","setStateValue","state","setState","directive","vdom","isArray","element","children","substring","handler","p","type","target","checked","multiple","selected","apply_directive","ATTR_PROPS","collect","ch","c","keyCache","WeakMap","node","isSvg","key1","nodeName","key2","toUpperCase","same","updateChildren","updateProps","parentNode","replaceChild","create","old_len","childNodes","new_len","len","min","child","nodeType","nodeValue","createText","SVGElement","insertBefore","old","temp","nextSibling","appendChild","removeChild","lastChild","createDocumentFragment","safeHTML","html","div","insertAdjacentHTML","createTextNode","stringify","createElementNS","cached","oldProps","newProps","mergeProps","cname","match","dataset","cssText","s","xname","removeAttributeNS","setAttributeNS","setAttribute","removeAttribute","getAttribute","createComponent","parent","idx","getPrototypeOf","__isAppRunComponent","id","asTag","__componentCache","renderState","mounted","new_state","render_component","new_parent","_component","customElement","componentClass","isConnected","opts","_shadowRoot","shadow","attachShadow","mode","parentElement","mount","dispatchEvent","bind","render","unload","unmount","mappedName","Reflect","meta","defineMetadata","metadataKey","metadataValue","has","getMetadataKeys","getMetadata","componentCache","Map","components","REFRESH","Component","view","_app","_actions","_global_events","_history","_history_idx","_history_prev","history","_history_next","_","getElementById","querySelector","tracking_attr","tracking_id","valueOf","toString","MutationObserver","observer","changes","body","contains","disconnect","observe","childList","subtree","attributeOldValue","attributeFilter","transition","rendered","resolve","then","v","_state","enable_history","callback","global_event","prev","next","route","add_actions","is_global_event","add_action","action","current_state","newState","actions","act","split","trim","ROUTER_EVENT","ROUTER_404_EVENT","url","rest","h","Error","nodes","Fragment","webComponent","model","NOOP","addEventListener","onpopstate","location","hash","hasAttribute","consoleLogger","output","warn","error","Logger","concreteLogger","arguments","init","prefix","logger","debug","_len","_key","forward","_len2","_key2","_len3","_key3","deprecate","_len4","_key4","lvl","debugOnly","moduleName","clone","baseLogger","EventEmitter","observers","listener","l","emit","defer","res","rej","promise","reject","makeString","object","getLastOfPath","path","Empty","cleanKey","canNotTraverseDeeper","stack","shift","k","setPath","newValue","getPath","deepExtend","source","overwrite","regexEscape","str","_entityMap","data","chars","deepFind","keySeparator","paths","current","j","slice","join","mix","joinedPath","getCleanedCode","code","ResourceStore","ns","defaultNS","ignoreJSONStructure","addNamespaces","removeNamespaces","index","splice","getResource","result","addResource","silent","addResources","resources","m","addResourceBundle","deep","pack","removeResourceBundle","hasResourceBundle","getResourceBundle","compatibilityAPI","getDataByLanguage","hasLanguageSomeTranslations","toJSON","postProcessor","processors","addPostProcessor","handle","translator","processor","process","checkedLoadedFor","Translator","services","changeLanguage","language","exists","resolved","extractFromKey","nsSeparator","namespaces","wouldCheckForNsInKey","seemsNaturalLanguage","userDefinedKeySeparator","userDefinedNsSeparator","possibleChars","r","RegExp","matched","ki","looksLikeObjectPath","interpolator","nestingRegexp","parts","translate","lastKey","overloadTranslationOptionHandler","returnDetails","namespace","appendNamespaceToCIMode","usedKey","exactUsedKey","usedLng","usedNS","usedParams","getUsedParamsDetails","resUsedKey","resExactUsedKey","resType","joinArrays","handleAsObjectInI18nFormat","i18nFormat","handleAsObject","returnObjects","returnedObjectHandler","resTypeIsArray","copy","newKeyToUse","deepKey","extendTranslation","usedDefault","needsPluralHandling","count","hasDefaultValue","defaultValueSuffix","pluralResolver","getSuffix","defaultValueSuffixOrdinalFallback","ordinal","defaultValue","isValidLookup","resForMissing","missingKeyNoValueFallbackToKey","updateMissing","fk","fallbackLngs","languageUtils","getFallbackCodes","fallbackLng","saveMissingTo","toResolveHierarchy","send","specificDefaultValue","defaultForMissing","missingKeyHandler","backendConnector","saveMissing","saveMissingPlurals","getSuffixes","suffix","appendNamespaceToMissingKey","parseMissingKeyHandler","_this","defaultVariables","skipInterpolation","skipOnVariables","nestBef","nb","interpolate","na","nest","context","reset","postProcess","postProcessorNames","applyPostProcessor","postProcessPassResolved","i18nResolved","found","extracted","fallbackNS","needsZeroSuffixLookup","shouldUseIntlApi","needsContextHandling","codes","utils","hasLoadedNamespace","finalKeys","addLookupKeys","pluralSuffix","zeroSuffix","pluralSeparator","ordinalPrefix","contextKey","contextSeparator","possibleKey","pop","returnNull","returnEmptyString","resourceStore","optionsKeys","useOptionsReplaceForData","option","capitalize","string","charAt","LanguageUtil","supportedLngs","getScriptPartFromCode","formatLanguageCode","getLanguagePartFromCode","specialCases","lowerCaseLng","part","cleanCode","isSupportedCode","load","nonExplicitSupportedLngs","getBestMatchFromCodes","cleanedLng","lngOnly","supportedLng","fallbacks","default","fallbackCode","fallbackCodes","addCode","fc","sets","nr","_rulesPluralsTypes","nonIntlVersions","intlVersions","suffixesOrder","zero","one","two","few","many","PluralResolver","compatibilityJSON","includes","PluralRules","rules","numbers","plurals","createRules","addRule","getRule","needsPlural","rule","resolvedOptions","pluralCategories","getPluralFormsOfKey","pluralCategory1","pluralCategory2","pluralCategory","prepend","number","select","getSuffixRetroCompatible","noAbs","simplifyPluralSuffix","returnSuffix","deepFindWithDefaults","defaultData","getPathWithDefaults","Interpolator","iOpts","escape","useRawValueToEscape","prefixEscaped","suffixEscaped","formatSeparator","unescapePrefix","unescapeSuffix","nestingPrefix","nestingPrefixEscaped","nestingSuffix","nestingSuffixEscaped","nestingOptionsSeparator","maxReplaces","alwaysFormat","resetRegExp","regexpStr","regexp","regexpUnescapeStr","regexpUnescape","nestingRegexpStr","replaces","regexSafe","handleFormat","interpolationkey","f","missingInterpolationHandler","regex","safeValue","todo","exec","matchedVar","lastIndex","clonedOptions","handleHasOptions","inheritedOptions","sep","optionsString","matchedSingleQuotes","matchedDoubleQuotes","formatters","doReduce","elem","createCachedFormatter","cache","formatter","Formatter","formats","opt","currency","datetime","relativetime","range","list","ListFormat","add","addCached","mem","formatName","formatOptions","formatStr","optStr","parseInt","parseFormatStr","formatted","valOptions","formatParams","locale","Connector","backend","store","waitingReads","maxParallelReads","readingCalls","maxRetries","retryTimeout","queue","queueLoad","toLoad","pending","toLoadLanguages","toLoadNamespaces","hasAllNamespaces","reload","pendingCount","loaded","errors","err","q","pushPath","removePending","done","loadedKeys","read","fcName","tried","wait","resolver","catch","prepareLoading","loadOne","fallbackValue","isUpdate","clb","initImmediate","preload","partialBundledLanguages","ret","tDescription","transformOptions","noop","I18n","inst","modules","external","getOwnPropertyNames","isInitialized","isClone","defOpts","createClassOnDemand","ClassOrObject","lu","languageDetector","detection","deferred","finish","initializedStoreOnce","loadResources","usedCallback","append","resolvedLanguage","setResolvedLanguage","reloadResources","use","li","lngInLngs","_this2","isLanguageChangingTo","setLngProps","setLng","cacheUserLanguage","async","detect","getFixedT","keyPrefix","_this3","fixedT","resultKey","setDefaultNamespace","lastLng","loadNotPending","loadState","precheck","preResult","loadNamespaces","loadLanguages","preloaded","newLngs","dir","createInstance","cloneInstance","forkResourceStore","mergedOptions","instance","en","title","item_plural","placeholder","fr","nextState","onclick","dangerous","weekday","time","timeZone","numeric","styleProp","notation"],"sourceRoot":""}